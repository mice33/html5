// Copyright 1998-2005 David Shapiro.

// Copyright 2004-2005 David Shapiro.

/*
 * $Id: base64.js,v 2.12 2013/05/06 07:54:20 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *    http://opensource.org/licenses/mit-license
 *
 *  References:
 *    https://github.com/leewind/js-base64
 *    http://en.wikipedia.org/wiki/Base64
 */

define("cCoreInherit",["libs"],function(e){var t=[].slice,n=function(){};return n.Class=function(){function r(){this.__propertys__(),this.initialize.apply(this,arguments)}if(arguments.length==0||arguments.length>2)throw"参数错误";var e=null,n=t.call(arguments);typeof n[0]=="function"&&(e=n.shift()),n=n[0],r.superclass=e,r.subclasses=[];var i=function(){},s=n.__propertys__||function(){};if(e){e.prototype.__propertys__&&(i=e.prototype.__propertys__);var o=function(){};o.prototype=e.prototype,r.prototype=new o,e.subclasses.push(r)}var u=r.superclass&&r.superclass.prototype;for(var a in n){var f=n[a];if(u&&typeof f=="function"){var l=/^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(f.toString())[1].replace(/\s/i,"").split(",");l[0]==="$super"&&u[a]&&(f=function(e,n){return function(){var r=this,i=[function(){return u[e].apply(r,arguments)}];return n.apply(this,i.concat(t.call(arguments)))}}(a,f))}r.prototype[a]=f}r.prototype.initialize||(r.prototype.initialize=function(){}),r.prototype.__propertys__=function(){i.call(this),s.call(this)};for(key in e)e.hasOwnProperty(key)&&key!=="prototype"&&key!=="superclass"&&(r[key]=e[key]);return r.prototype.constructor=r,r},n.extend=function(){var e=t.call(arguments),n=e.shift()||{};if(!n)return!1;for(var r=0,i=e.length;r<i;r++)if(typeof e[r]=="object")for(var s in e[r])n[s]=e[r][s];return n},n.implement=function(e,t){if(typeof e!="function")return!1;for(var n in t)e.prototype[n]=t[n];return e},n}),define("cUtilityHybrid",[],function(){var e={};return e.isInApp=function(){var e=window.navigator.userAgent;if(e.indexOf("CtripWireless")>-1)return!0;var t=window.localStorage.getItem("isInApp");if(t)return t=="1"?!0:!1;var n=window.localStorage.getItem("ISINAPP");if(n)return n=="1"?!0:!1},e.isInWeichat=function(){var e=window.navigator.userAgent;return e.indexOf("MicroMessenger")>-1?!0:!1},e.isPreProduction=function(){return window.localStorage.getItem("isPreProduction")},e}),define("cUtilityHash",["cCoreInherit"],function(e){var t=function(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n={},r={};return r.__propertys__=function(){this.keys=[],this.values=[]},r.initialize=function(e){typeof e!="object"&&(e={});for(var t in e)e.hasOwnProperty(t)&&(this.keys.push(t),this.values.push(e[t]));var n=""},r.length=function(){return this.keys.length},r.getItem=function(e){var n=t(e,this.keys);return n<0?null:this.values[n]},r.getKey=function(e){return this.keys[e]},r.index=function(e){return this.values[e]},r.push=function(e,n,r){if(typeof e=="object"&&!n)for(var i in e)e.hasOwnProperty(i)&&that.push(i,e[i],r);else{var s=t(e,this.keys);s<0||r?(r&&this.del(k),this.keys.push(e),this.values.push(n)):this.values[s]=n}return this},r.add=function(e,t){return this.push(e,t)},r.del=function(e){var n=t(e,this.keys);return n<0?this:(this.keys.splice(n,1),this.values.splice(n,1),this)},r.delByIndex=function(e){return e<0?this:(this.keys.splice(e,1),this.values.splice(e,1),this)},r.pop=function(){return this.keys.length?(this.keys.pop(),this.values.pop()):null},r.indexOf=function(e){var n=t(e,this.values);return n>=0?this.keys[n]:-1},r.shift=function(){return this.keys.length?(this.keys.shift(),this.values.shift()):null},r.unshift=function(e,n,r){if(typeof e=="object"&&!n)for(var i in e)e.hasOwnProperty(i)&&this.unshift(i,e[i]);else{var s=t(e,this.keys);s<0||r?(r&&this.del(e),this.keys.unshift(e),this.values.unshift(n)):this.values[s]=n}return this},r.slice=function(e,t){var n=this.keys.slice(e,t||null),r=this.values.slice(e,t||null),i={};for(var s=0;s<n.length;s++)i[n[s]]=r[s];return i},r.splice=function(e,t){var n=this.keys.splice(e,t||null),r=this.values.splice(e,t||null),i={};for(var s=0,o=n.length;s<o;s++)i[n[s]]=r[s];return i},r.filter=function(e){var t={};if(typeof e!="function")return null;for(var n=0;n<this.keys.length;n++)e.call(this.values[n],this.values[n],this.keys[n])&&(t[this.keys[n]]=this.values[n]);return t},r.each=function(e){var t={};if(typeof e!="function")return null;for(var n=0;n<this.keys.length;n++)e.call(this.values[n],this.values[n],this.keys[n],n)},r.valueOf=function(){var e={};for(var t=0;t<this.keys.length;t++)e[this.keys[t]]=this.values[t];return e},r.sortBy=function(e){var t=_.sortBy(this.values,e),n=[];for(var r=0;r<t.length;r++){var i=this.indexOf(t[r]);n[r]=i}this.values=t,this.keys=n},r.toString=function(){return typeof JSON!="undefined"&&JSON.stringify?JSON.stringify(this.valueOf()):typeof this.values},n.Hash=new e.Class(r),n}),define("cUtilityServertime",["cUtilityHybrid"],function(e){var t={};return t.getServerDate=function(t){var n=function(e){return typeof t=="function"?t(e):e},r=function(){var e=new Date,t=window.localStorage.getItem("SERVERDATE");if(!t)return n(e);try{t=JSON.parse(t);if(t&&t.server&&t.local){var r=window.parseInt(t.server),i=window.parseInt(t.local),s=(new Date).getTime(),o=new Date(r+s-i);return n(o)}return n(e)}catch(u){return n(e)}},i=function(){if(location.pathname.match(/^\/?html5/i))return n(now);if(typeof __SERVERDATE__=="undefined"||!__SERVERDATE__.server)return 0,n(now);var e=new Date(__SERVERDATE__.server.valueOf()+((new Date).valueOf()-__SERVERDATE__.local.valueOf()));return n(e)};return e.isInApp?r():i()},t}),define("cUtilityDate",["cCoreInherit","cUtilityServertime"],function(e,t){var n={};return n.Date=new e.Class({initialize:function(e){e=e||new Date,this.date=new Date(e)},addDay:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this},addMonth:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this},addHours:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this},addMinutes:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this},addSeconds:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this},addYear:function(e){return e=e||0,this.date.setYear(this.date.getFullYear()+e),this},setHours:function(){return this.date.setHours.apply(this.date,arguments),this},valueOf:function(){return this.date},getTime:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},format:function(e){typeof e!="string"&&(e="");for(var t in this._MAPS)e=this._MAPS[t].call(this,e,this.date,t);return e},diffMonth:function(e){var t=parseInt(this.format("Y")),r=parseInt(this.format("m")),i=new n.Date(e),s=parseInt(i.format("Y")),o=parseInt(i.format("m"));return(s-t)*12+(o-r)},_DAY1:["周日","周一","周二","周三","周四","周五","周六"],_DAY2:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],_MAPS:{d:function(e,t,n){var r=t.getDate().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},j:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getDate())},N:function(e,t,n){var r=t.getDay();return r===0&&(r=7),e.replace(new RegExp(n,"mg"),r)},w:function(e,t,n){var r=t.getDay(),i=this._DAY1[r];return e.replace(new RegExp(n,"mg"),i)},W:function(e,t,n){var r=t.getDay(),i=this._DAY2[r];return e.replace(new RegExp(n,"mg"),i)},m:function(e,t,n){var r=(t.getMonth()+1).toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},n:function(e,t,n){return e.replace(n,t.getMonth()+1)},Y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getFullYear())},y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getYear())},g:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),e.replace(new RegExp(n,"mg"),r)},G:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getHours())},h:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),r+="",r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},H:function(e,t,n){var r=t.getHours().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},i:function(e,t,n){var r=t.getMinutes().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},s:function(e,t,n){var r=t.getSeconds().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},I:function(e,t,n){var r=t.getMinutes().toString();return e.replace(new RegExp(n,"mg"),r)},S:function(e,t,n){var r=t.getSeconds().toString();return e.replace(new RegExp(n,"mg"),r)},D:function(e,n,r){var i=t.getServerDate();i.setHours(0,0,0,0),n=new Date(n.valueOf()),n.setHours(0,0,0,0);var s=864e5,o="",u=n-i;return u>=0&&(u<s?o="今天":u<2*s?o="明天":u<3*s&&(o="后天")),e.replace(new RegExp(r,"mg"),o)}}}),e.extend(n.Date,{parse:function(e,t){if(typeof e=="undefined")return new Date;if(typeof e=="string"){e=e||"";var r=/^(\d{4})\-?(\d{1,2})\-?(\d{1,2})/i;e.match(r)&&(e=e.replace(r,"$2/$3/$1"));var i=Date.parse(e),s=new Date(i||new Date);return t?s:new n.Date(s)}return typeof e=="number"?new Date(e):new Date},getHM:function(e){var t=this._getDate(e),n=t.getHours(),r=t.getMinutes();return(n<10?"0"+n:""+n)+":"+(r<10?"0"+r:""+r)},getIntervalDay:function(e,t){var n=this._getDate(e),r=this._getDate(t);return n.setHours(0,0,0,0),r.setHours(0,0,0,0),parseInt((r-n)/864e5)},m2H:function(e){var t=Math.floor(e/60),n=e%60;return(t>0?t+"小时":"")+(n>0?n+"分钟":"")},_getDate:function(e){var t=n.Date.parse(e,!0),r=new Date;return r.setTime(t),r},format:function(e,t){return(new n.Date(e)).format(t)},weekday:function(e){var t=["周日","周一","周二","周三","周四","周五","周六"],n=new Date(e);return t[n.getDay()]},diffMonth:function(e,t){return e=new n.Date(e),e.diffMonth(t)}}),n.Date}),define("Validate",[],function(){var e={};$.each("String Function Boolean RegExp Number Date Object Null Undefined".split(" "),function(t,n){var r;switch(n){case"Null":r=function(e){return e===null};break;case"Undefined":r=function(e){return e===undefined};break;default:typeof obj=="object"&&(obj=Object.prototype.toString.call(obj)),r=function(e){return(new RegExp(n+"]","i")).test(e)}}e["is"+n]=r});var t={isEmail:function(e){var t=/^(?:\w+\.?)*\w+@(?:\w+\.?)*\w+$/;return t.test(e)},isPassword:function(e){var t=/^[a-zA-Z0-9]{6,20}$/;return t.test(e)},isMobile:function(e){var t=/^(1[3-8][0-9])\d{8}$/;return t.test(e)},isChinese:function(e){var t=/^[\u4e00-\u9fff]{0,}$/;return t.test(e)},isEnglish:function(e){var t=/^[A-Za-z]+$/;return t.test(e)},isZip:function(e){var t=/^[1-9]\d{5}$/;return t.test(e)},isDate:function(e){var t=/^(([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229)$/;return t.test(e)?!0:!1},isNum:function(e){var t=/^\d+$/;return t.test(e)},isCellPhone:function(e){var t=/(^0{0,1}1[3|4|5|6|7|8][0-9]{9}$)/;return t.test(e)},isIDCardNo:function(e){var t=/^[A-Za-z0-9]+$/;return t.test(e)},isEnglishAndSpace:function(e){var t=/^([a-zA-Z ]+|[\u4e00-\u9fa5]+)$/;return t.test(e)},isTraditional:function(e){var t="萬與醜專業叢東絲兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場壞塊堅壇壢壩塢墳墜壟壟壚壘墾堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽黿鼂鼉鞀鼴齇齊齏齒齔齕齗齟齡齙齠齜齦齬齪齲齷龍龔龕龜誌製谘隻裡係範鬆冇嚐嘗鬨麵準鐘彆閒儘臟拚";for(var n=0;n<e.length;n++){var r=e.charAt(n);if(t.indexOf(r)>-1)return!0}return!1},isIdCard:function(e){var t=new Array(!0,!1,!1,!1,!1),n={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"xinjiang",71:"台湾",81:"香港",82:"澳门",91:"国外"},r,i,s,o,u=[];u=e.split("");if(n[parseInt(e.substr(0,2))]===null)return t[4];switch(e.length){case 18:return parseInt(e.substr(6,4))%4===0||parseInt(e.substr(6,4))%100===0&&parseInt(e.substr(6,4))%4===0?ereg=/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:ereg=/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(e)?(s=(parseInt(u[0])+parseInt(u[10]))*7+(parseInt(u[1])+parseInt(u[11]))*9+(parseInt(u[2])+parseInt(u[12]))*10+(parseInt(u[3])+parseInt(u[13]))*5+(parseInt(u[4])+parseInt(u[14]))*8+(parseInt(u[5])+parseInt(u[15]))*4+(parseInt(u[6])+parseInt(u[16]))*2+parseInt(u[7])*1+parseInt(u[8])*6+parseInt(u[9])*3,r=s%11,o="F",i="10X98765432",o=i.substr(r,1),o.toUpperCase()==u[17].toUpperCase()?t[0]:t[3]):t[2];default:return t[1]}},isRightVerifycode:function(e){var t=/^[a-z0-9]{4,30}$/;return t.test(e)},isAllowSetTradingPass:function(e){var t=!0,n=!0,r=!0,i=!0;for(var s=0;s<e.length-1;s++){var o=parseInt(e[s]),u=parseInt(e[s+1]);t=t&&o==u,n=n&&u==o+1;var a=s<e.length+1?parseInt(e[s+3]):-1,f=parseInt(e[5-s]);s<e.length/2-1?(r=r&&o==a&&u==o+1,i=i&&o==f&&u==o+1):s==e.length/2-1&&(r=r&&o==a,i=i&&o==f);if(s+2==e.length&&e.length==6&&(t||n||r||i))return!1}return!0},isQq:function(e){return/^[1-9]\d{4,}$/.test(e)},isPhone:function(e){return/^[0-9]{3,4}-[0-9]{7,8}$/.test(e)},isUrl:function(e){return/^http(s)?:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(e)},isPostcode:this.isZip,isIP:function(t){if(!t||e.isNull(t))return!1;var n=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return n.test(t)&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256?!0:!1},isEmptyObject:function(e){for(var t in e)return!1;return!0},isCharsLenWithinRange:function(t,n){if(!e.isString(t))return!1;var r=t.match(/\W/g),i=r==null?t.length:t.length+r.length,s=i>=0&&i<=n;return s?(this.cutLen=t.length,!0):!1},isContactName:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,26):!1},isBookPS:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,100):!1},isInvTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,100):!1},isBoardTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,40):!1},isAreaTitle:function(t){return e.isString(t)?this.isCharsLenWithinRange.call(this,t,80):!1},isMobileNumber:function(t){if(!e.isString(t))return!1;var n=11;return t.length==n&&/^(\d| )+$/g.test(t)},isFlightNumber:function(t){if(!e.isString(t))return!1;var n=3,r=7;return t.length>=n&&t.length<=r&&/^(\d|\w)+$/g.test(t)}};return t}),define("cUtility",["cUtilityHybrid","cUtilityHash","cUtilityDate","cUtilityServertime","Validate"],function(e,t,n,r,i){var s=function(e){return Object.prototype.toString.call(e)},o={};return $.extend(o,e),o.Date=n,o.Hash=t.Hash,o.trim=function(e){return e.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")},o.stripTags=function(e){return(e||"").replace(/<[^>]+>/g,"")},o.mix=function(e,t){return _.extend(e,t)},o.indexOf=function(e,t){return _.indexOf(t,e)},o.each=_.each,o.grep=_.filter,o.getServerDate=r.getServerDate,o.getGuid=function(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var n=window.localStorage.GUID||"";return n||(n=t(),window.localStorage.GUID=n),n},o.Object={},o.Object.set=function(e,t,n){if(!t)return null;var r=t.split(".");e=e||{};for(var i=0,s=r.length,o=Math.max(s-1,0);i<s;i++)i<o?e=e[r[i]]=e[r[i]]||{}:e[r[i]]=n;return e},o.Object.get=function(e,t){if(!e||!t)return null;var n=t.split(".");e=e||{};for(var r=0,i=n.length,s=Math.max(i-1,0);r<i;r++){e=e[n[r]];if(typeof e=="null"||typeof e=="undefined")return null}return e},o.SimpleQueue=function(){this.initialize()},o.SimpleQueue.prototype={initialize:function(){this.index=0,this.handlers=[],this.isStart=!1},add:function(e){this.handlers.push(e),this.isStart||(this.isStart=!0,this._next())},_next:function(e){var t=this.handlers.shift();t&&t.call(this,this,e)},next:function(){this._next.apply(this,arguments),this.stop()},stop:function(){this.isStart=!1}},o.tryUrl=function(e){var t=document.createElement("iframe");t.height=1,t.width=1,t.frameBorder=0,t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),o.tryUrl=function(e){t.src=e},U.tryUrl(e)},o.validate=i,o.JsonArrayToObject=function(e){if(!e)return[];var t=e.shift(),n=[],r=null;for(var i=0,o=e.length;i<o;i++){r={};for(var u=0,a=e[i].length;u<a;u++)switch(s(e[i][u])){case"[object Array]":r[t[u]]=U.JsonArrayToObject(e[i][u]);break;default:r[t[u]]=e[i][u]}n.push(r)}return n},o.dateParse=function(e){var t=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof e){if(t.test(e)||isNaN(Date.parse(e))){var n=e.split(/ |T/),r=n.length>1?n[1].split(/[^\d]/):[0,0,0],i=n[0].split(/[^\d]/);return new Date(i[0]-0,i[1]-1,i[2]-0,r[0]-0,r[1]-0,r[2]-0)}return new Date(e)}return new Date},o.deleteValue=function(e,t){var n=U.indexOf(e,t);return n>-1?t.splice(n,1):null},o}),define("cBase",["libs","cCoreInherit","cUtility"],function(e,t,n){typeof console=="undefined"&&(console={log:function(){},error:function(){}});var r={};r.isInApp=n.isInApp,r.Class=t.Class,r.extend=t.extend,r.implement=t.implement;var i=[].slice,s=function(e,t,n){return n=n||[],function(){e.apply(t,n.concat(i.call(arguments)))}},o=function(e){return Object.prototype.toString.call(e)};r.Object=new r.Class({});var u={keys:function(e){var t=[];if(typeof e=="object")if(typeof Object.keys=="function")Object.keys(e);else for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}};return r.extend(r.Object,u),r.Date=n.Date,r.Hash=n.Hash,r.getInstance=function(){return this.instance||new this},r.getServerDate=n.getServerDate,r}),define("cUIAnimation",[],function(){return{slideleft:function(e,t,n,r){$("body").addClass("hiddenx"),e.addClass("animatestart"),e.addClass("sliderightin"),e.__show();var i=this;return setTimeout(function(){$("body").removeClass("hiddenx"),e.removeClass("animatestart"),e.removeClass("sliderightin"),t&&t.__hide(e.viewname),n&&n.call(r,e,t)},340)},slideright:function(e,t,n,r){$("body").addClass("hiddenx"),t&&(t.addClass("animatestart"),t.addClass("sliderightout")),e.__show();var i=this;return setTimeout(function(){$("body").removeClass("hiddenx"),t&&(t.removeClass("animatestart"),t.removeClass("sliderightout"),t.__hide(e.viewname)),n&&n.call(r,e,t)},340)},noAnimate:function(e,t,n,r){this.mainframe.hide(),t&&t.__hide(e.viewname),e.__show(),this.mainframe.show(),n&&n.call(r,e,t)}}}),define("AbstractAPP",["libs","cBase","cUIAnimation"],function(e,t,n){var r=new t.Class({__propertys__:function(){this.webroot="/#hotelsearch",this.viewRootPath="app/views/",this.defaultView="index",this.request,this.viewpath,this.mainframe,this.viewport,this.statedom,this.views=new t.Hash,this.curView,this.lastView,this.inteface={loadView:_.bind(this.loadView,this),forward:_.bind(this.forward,this),back:_.bind(this.back,this)},this.isCreate=!1,this.history=[],this.stopListening=!1,this.timeoutres,this.lastHash="",this.lashFullHash="",this.isChangeHash=!1,this.animations=n,this.isAnimat=!0,this.animatSwitch=!1,t.isInApp()&&(this.animatSwitch=!0),this.animForwardName="slideleft",this.animBackwardName="slideright",this.animNoName="noAnimate",this.animatName=this.animNoName,this.path=[],this.query={},this.viewMapping={}},initialize:function(e){this.setOption(e),this.buildEvent()},setOption:function(e){e=e||{};for(var t in e)this[t]=e[t]},buildEvent:function(){var e=this;requirejs.onError=function(e){if(e&&e.requireModules)for(var t=0;t<e.requireModules.length;t++){0;break}},$(window).bind("hashchange",_.bind(this.onHashChange,this)),this.onHashChange()},onHashChange:function(){var e=window.history.length;this.history.push(window.location.href);if(!this.stopListening){var t=decodeURIComponent(window.location.hash.replace(/^#+/i,"")).toLowerCase();this._onHashChange(t)}},_onHashChange:function(e,t){e=e.replace(/^#+/i,"");var n=this.parseHash(e);this.localObserver(n,t)},parseHash:function(e){var t=e,e=e.replace(/([^\|]*)(?:\|.*)?$/img,"$1"),n=/^([^?&|]*)(.*)?$/i.exec(e),r=n[1]?n[1].split("!"):[],i=(r.shift()||"").replace(/(^\/+|\/+$)/i,""),s=r.length?r.join("!").replace(/(^\/+|\/+$)/i,"").split("/"):this.path,o=(n[2]||"").replace(/^\?*/i,"").split("&"),u=_.clone(this.query),a,f;this.isChangeHash=!this.lastHash&&t===this.lashFullHash||!!this.lastHash&&this.lastHash!==e,location.hash.indexOf("cui-")!=-1&&(this.isChangeHash=!1);if(o)for(var l=0;l<o.length;l++)o[l]&&(a=o[l].split("="),a[1]?(f=a.shift(),u[f]=a.join("=")):u[a[0]]="");return this.lastHash=e,this.lashFullHash=t,{viewpath:i,path:s,query:u,root:location.pathname+location.search,fullhash:t}},localObserver:function(e,t){this.animatName=t?this.animForwardName:this.animBackwardName,this.request=e,this.viewpath=this.request.viewpath||this.defaultView,this.request.viewpath=this.viewpath,this.switchView(this.viewpath)},switchView:function(e){var t=e,n=this.views.getItem(t),r=this.curView;r&&r!=n&&(this.lastView=r);if(n){if(n==this.curView&&this.isChangeHash==0)return;n.request=this.request,this.curView=n;var i=(r||n).viewname;this.curView.__load(i)}else this.loadView(e,function(e){n=new e(this.request,this.inteface,t),this.views.push(t,n),n.turning=_.bind(function(){this.createViewPort(),n.viewport=this.viewport,this.startAnimation(function(e,t){this.views.each(function(n,r){if(e===n||t===n)return!1;n.$el.hide()}),e.$el.show()})},this),this.curView=n;var i=(r||n).viewname;this.curView.__load(i)})},startAnimation:function(e){var t=this.curView,n=this.lastView;n&&(n.scrollPos={x:window.scrollX,y:window.scrollY}),this.animatSwitch||(this.isAnimat=!1),this.isAnimat||(this.animatName=this.animNoName),this.timeoutres=this.animations[this.animatName]&&this.animations[this.animatName].call(this,t,n,e,this),this.isAnimat=!0},loadView:function(e,t){var n=this;requirejs([this.buildUrl(e)],function(e){t&&t.call(n,e)})},buildUrl:function(e){var t=this.viewMapping[e];return t?t:this.viewRootPath+e},createViewPort:function(){if(this.isCreate)return;var e=['<div class="main-frame">','<div class="main-viewport"></div>','<div class="main-state"></div>',"</div>"].join("");this.mainframe=$(e),this.viewport=this.mainframe.find(".main-viewport"),this.statedom=this.mainframe.find(".main-state");var t=$("#main");t.empty(),t.append(this.mainframe),this.isCreate=!0},lastUrl:function(){return this.history.length<2?document.referrer:this.history[this.history.length-2]},startObserver:function(){this.stopListening=!1},endObserver:function(){this.stopListening=!0},forward:function(e,t,n){e=e.toLowerCase(),n&&(this.isAnimat=!1),this.endObserver(),t?window.location.replace(("#"+e).replace(/^#+/,"#")):window.location.href=("#"+e).replace(/^#+/,"#"),this._onHashChange(e,!0),setTimeout(_.bind(this.startObserver,this),1)},back:function(e,t){t&&(this.isAnimat=!1);var n=this.lastUrl();e&&(!n||n.indexOf(e)!==0)?window.location.hash=e:(e=this.request.query.refer,e?window.location.href=e:history.back())}});return r}),define("cWidgetFactory",["libs"],function(e){var t=t||{};return t.products={},t.hasWidget=function(e){return!!t.products[e]},t.register=function(e){if(!(e&&e.name&&e.fn))throw"WidgetFactory: widget is lack of necessary infomation.";if(t.products[e.name])throw"WidgetFactory: widget has been register in WidgetFactory";t.products[e.name]=e.fn},t.create=function(e){return t.products[e]},t}),define("cAbstractStorage",["cBase"],function(e){var t=window.JSON,n=e.Date,r=new e.Class({__propertys__:function(){this.proxy=null},initialize:function($super,e){},_buildStorageObj:function(e,t,n,r,i){return{value:e,oldvalue:i||null,timeout:t,tag:n,savedate:r}},set:function(e,r,i,s,o,u){o=o||(new n).format("Y/m/d H:i:s"),i=i?new n(i):(new n).addDay(30);var a=this._buildStorageObj(r,i.format("Y/m/d H:i:s"),s,o,u);try{return this.proxy.setItem(e,t.stringify(a)),!0}catch(f){console&&0}return!1},get:function(e,r,i){var s,o=null;try{s=this.proxy.getItem(e),s&&(s=t.parse(s),n.parse(s.timeout,!0)>=new Date&&(r?r===s.tag&&(o=i?s.oldvalue:s.value):o=i?s.oldvalue:s.value))}catch(u){console&&0}return o},getTag:function(e){var n,r=null,i=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),i=n&&n.tag)}catch(s){console&&0}return i},getSaveDate:function(e,r){var i,s=null;try{i=this.proxy.getItem(e),i&&(i=t.parse(i),i.savedate&&(s=n.parse(i.savedate),r||(s=s.valueOf())))}catch(o){console&&0}return s},getExpireTime:function(e){var n=null,r=null;try{n=this.proxy.getItem(e),n&&(n=t.parse(n),r=Date.parse(n.timeout))}catch(i){console&&0}return r},remove:function(e){return this.proxy.removeItem(e)},getAll:function(){var e=this.proxy.length,t=[];for(var n=0;n<e;n++){var r=this.proxy.key(n),i={key:r,value:this.get(r)};t.push(i)}return t},clear:function(){this.proxy.clear()},gc:function(){var e=this.proxy,t=this.proxy.length;for(var n=0;n<t;n++){var r=e.key(n);this.get(r)||this.remove(r)}}});return r}),define("cStorage",["cBase","cAbstractStorage"],function(e,t){var n=new e.Class(t,{__propertys__:function(){},initialize:function($super,e){this.proxy=window.localStorage,$super(e)},oldGet:function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;if(r&&r.timeout){var i=new Date,s=e.Date.parse(r.timeout).valueOf();if(r.timeby){if(s-i>=0)return r}else if(s-e.Date.parse(e.Date.format(i,"Y-m-d")).valueOf()>=0)return r;return localStorage.removeItem(t),null}return r},oldSet:function(e,t){localStorage.setItem(e,t)},getExpireTime:function(t){var n=localStorage.getItem(t),r=n?JSON.parse(n):null;return r&&r.timeout?r.timeout:(new e.Date(e.getServerDate())).addDay(2).format("Y-m-d")},oldRemove:function(e){localStorage.removeItem(e)}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n.localStorage=n.getInstance(),n}),define("cAbstractStore",["cBase","cStorage","cUtility"],function(e,t,n){CDate=e.Date,HObject=n.Object;var r=new e.Class({__propertys__:function(){this.NULL={},this.key=this.NULL,this.lifeTime="30M",this.useServerTime=!1,this.defaultData=null,this.rollbackEnabled=!1,this.sProxy=this.NULL},initialize:function(e){for(var t in e)this[t]=e[t];this.assert()},assert:function(){if(this.key===this.NULL)throw"not override key property"},set:function(e,t,n){var r=this._getNowTime();r.addSeconds(this._getLifeTime()),this.rollbackEnabled&&!n&&(n=e),this.sProxy.set(this.key,e,r,t,null,n)},setLifeTime:function(e,t){this.lifeTime=e;var n=this.getTag(),r=this.get(),i;t?i=this._getNowTime():i=this.sProxy.getSaveDate(this.key,!0)||this._getNowTime();var s=(new CDate(i.valueOf())).format("Y/m/d H:i:s");i.addSeconds(this._getLifeTime()),this.sProxy.set(this.key,r,i,n,s)},setAttr:function(e,t,n){if(_.isObject(e)){for(var r in e)e.hasOwnProperty(r)&&this.setAttr(r,e[r],t);return}n=n||this.getTag();var i=this.get(n)||{},s={};if(i){if(this.rollbackEnabled){s=this.get(n,!0);var o=HObject.get(i,e);HObject.set(s,e,o)}return HObject.set(i,e,t),this.set(i,n,s)}return!1},get:function(t,n){var r=null,i=!0;Object.prototype.toString.call(this.defaultData)==="[object Array]"?r=this.defaultData.slice(0):this.defaultData&&(r=_.clone(this.defaultData));var s=this.sProxy.get(this.key,t,n),o=typeof s;if({string:!0,number:!0,"boolean":!0}[o])return s;if(s)if(Object.prototype.toString.call(s)=="[object Array]"){r=[];for(var u=0,a=s.length;u<a;u++)r[u]=s[u]}else s&&!r&&(r={}),e.extend(r,s);for(var f in r){i=!1;break}return i?null:r},getAttr:function(e,t){var n=this.get(t),r=null;return n&&(r=HObject.get(n,e)),r},getTag:function(){return this.sProxy.getTag(this.key)},remove:function(){this.sProxy.remove(this.key)},removeAttr:function(e){var t=this.get()||{};t[e]&&delete t[e],this.set(t)},getExpireTime:function(){var e=null;try{e=this.sProxy.getExpireTime(this.key)}catch(t){console&&0}return e},setExpireTime:function(e){var t=this.get(),n=new CDate(e);this.sProxy.set(this.key,t,n)},_getNowTime:function(){return this.useServerTime?new CDate(e.getServerDate()):new CDate},_getLifeTime:function(){var e=0,t=this.lifeTime+"",n=t.charAt(t.length-1),r=+t.substring(0,t.length-1);return typeof n=="number"?n="M":n=n.toUpperCase(),n=="D"?e=r*24*60*60:n=="H"?e=r*60*60:n=="M"?e=r*60:n=="S"?e=r:e=r*60,e},rollback:function(e){if(this.rollbackEnabled){var t=this.getTag(),n=this.sProxy.get(this.key,t),r=this.sProxy.get(this.key,t,!0);if(e&&e instanceof Array)for(var i in e){var s=e[i],o=r[s];typeof o!="undefined"&&(n[s]=o)}else n=r,r={};this.set(n,t,r)}}});return r.getInstance=function(){return this.instance?this.instance:this.instance=new this},r}),define("cStore",["cBase","cAbstractStore","cStorage"],function(e,t,n){var r=new e.Class(t,{__propertys__:function(){this.sProxy=n.getInstance()},initialize:function($super,e){$super(e)}});return r}),define("CommonStore",["cBase","cStore","cStorage","cUtility"],function(e,t,n,r){var i={};return i.UserStore=new e.Class(t,{__propertys__:function(){this.key="USER",this.lifeTime="1D"},initialize:function($super,e){$super(e)},getUser:function(){var e=n.localStorage.oldGet("USERINFO");return e=e&&e.data||null,this.set(e),e},setUser:function(e){var t=n.localStorage.getExpireTime("USERINFO"),r={data:e,timeout:t};n.localStorage.oldSet("USERINFO",JSON.stringify(r)),this.set(e)},removeUser:function(){n.localStorage.oldRemove("USERINFO"),this.set(null)},isNonUser:function(){var e=this.getUser();return e&&!!e.IsNonUser},isLogin:function(){var e=this.getUser();return e&&!!e.Auth&&!e.IsNonUser},getUserName:function(){var e=this.getUser();return e.UserName},getUserId:function(){var e=this.getUser()||{};return e.UserID||r.getGuid()},getAuth:function(){var e=i.HeadStore.getInstance(),t=this.getUser();return t&&t.Auth&&e.setAttr("auth",t.Auth),e.getAttr("auth")},setAuth:function(e){var t=this.isLogin(),n=this.getUser()||{};n.Auth=e,n.IsNonUser=t?!1:!0,this.setUser(n)},setNonUser:function(e){var t=n.localStorage.oldGet("USERINFO"),r=i.HeadStore.getInstance(),s=t&&t.data||{};s.Auth=e,s.IsNonUser=!0,this.setUser(s),r.setAttr("auth",e)}}),i.HeadStore=new e.Class(t,{userStore:i.UserStore.getInstance(),__propertys__:function(){this.key="HEADSTORE",this.lifeTime="15D",this.defaultData={cid:r.getGuid(),ctok:"351858059049938",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:""};var e=this.get;this.get=function(){var t=e.apply(this,arguments),n=this.userStore.getUser(),r=i.SalesObjectStore.getInstance().get();return r&&r.sid?t.sid=r.sid:t.sid="8888",n&&n.Auth?t.auth=n.Auth:t.auth="",this.set(t),t}},initialize:function($super,e){$super(e)},setAuth:function(e){var t=i.UserStore.getInstance();t.setAuth(e),this.setAttr("auth",e)}}),i.UnionStore=new e.Class(t,{__propertys__:function(){this.key="UNION",this.lifeTime="7D",this.store=n.localStorage},initialize:function($super,e){$super(e)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesStore=new e.Class(t,{__propertys__:function(){this.key="SALES",this.lifeTime="30D",this.store=n.localStorage},initialize:function($super,e){$super(e)},get:function(){var e=this.store.oldGet(this.key);return e&&e.data||null},set:function(t,n){n||(n=new e.Date(r.getServerDate()),n.addSeconds(this._getLifeTime()));var i={data:t,timeout:n.format("Y/m/d H:i:s")};this.store.oldSet(this.key,JSON.stringify(i))}}),i.SalesObjectStore=new e.Class(t,{__propertys__:function(){this.key="SALES_OBJECT",this.lifeTime="30D"},initialize:function($super,e){$super(e)}}),i.UnionStore.getInstance=i.SalesStore.getInstance=e.getInstance,i}),define("cLog",["libs"],function(){var cLog={},_parse=function(obj){return JSON.stringify?JSON.stringify(obj):eval("("+obj+")")},_getDateTime=function(){var e=new Date,t="";return t+=e.getMonth()+1,t+="/",t+=e.getDate(),t+=" ",t+=e.getHours(),t+=":",t+=e.getMinutes(),t+=":",t+=e.getSeconds(),t},_isExistServerLog=function(){var e=!1,t=window.localStorage.getItem("H5_CFG");return t&&(e=JSON.parse(t).value.serverLog),!!e};return cLog.checkServerLog=_isExistServerLog(window),cLog.serverLog=function(e,t,n){if(!this.checkServerLog)return;var r={url:e,rspCode:n?"200":"404",req:t,rsp:n,dt:_getDateTime()};this.pushLog("SERVER_LOG",r)},cLog.errorLog=function(e,t,n){var r=cLog.buildErrorObj(e,t,n);return cLog.pushLog("ERROR_LOG",r),!1},cLog.urlLog=function(e){if(e.indexOf("monitor")>-1)return;var t={url:e,dt:_getDateTime()};cLog.pushLog("URL_LOG",t)},cLog.restlog=function(e,t,n){if(!this.serverLog)return;var r={url:e,rspCode:n?"200":"404",req:t,rsp:n,dt:_getDateTime()};this.pushLog("SERVER_LOG",r)},cLog.appLog=function(e,t){var n=localStorage.getItem("APP_LOG"),r=n?JSON.parse(n):{};r[e]={data:t,dt:_getDateTime()};var i=_parse(r);localStorage.setItem("APP_LOG",i)},cLog.applog=function(e,t){this.appLog(e,t)},cLog.buildErrorObj=function(e,t,n){var r=typeof t=="string"?t.substr(t.lastIndexOf("/")+1):"";return{msg:e,file:r,line:n,fullPath:t,dt:_getDateTime(),url:window.location.href,restful:{url:"",request:"",response:""}}},cLog.sendLog=function(e,t,n){$.post("http://"+this.logServerUrl+"/"+e,t,function(e){0,typeof n=="function"&&n()})},cLog.pushLog=function(e,t){var n=localStorage.getItem(e),r=[],i=n?JSON.parse(n):[];i.length>0&&i.splice(50),i.unshift(t),r=_parse(i),localStorage.setItem(e,r)},window.onerror=function(e,t,n){cLog.errorLog(e,t,n)},window.onload=function(){cLog.urlLog(window.location.href)},window.onhashchange=function(){cLog.urlLog(window.location.href)},cLog}),define("cHybridFacade",["libs","CommonStore","cLog"],function(e,t,n){var r=r||{};r.METHOD_ENTRY="METHOD_ENTRY",r.METHOD_MEMBER_LOGIN="METHOD_MEMBER_LOGIN",r.METHOD_NON_MEMBER_LOGIN="METHOD_NON_MEMBER_LOGIN",r.METHOD_AUTO_LOGIN="METHOD_AUTO_LOGIN",r.METHOD_LOCATE="METHOD_LOCATE",r.METHOD_REFRESH_NAV_BAR="METHOD_REFRESH_NAV_BAR",r.METHOD_CALL_PHONE="METHOD_CALL_PHONE",r.METHOD_BACK_TO_HOME="METHOD_BACK_TO_HOME",r.METHOD_BACK_TO_BOOK_CAR="METHOD_BACK_TO_BOOK_CAR",r.METHOD_BACK="METHOD_BACK",r.METHOD_COMMIT="METHOD_COMMIT",r.METHOD_CITY_CHOOSE="METHOD_CITY_CHOOSE",r.METHOD_REGISTER="METHOD_REGISTER",r.METHOD_LOG_EVENT="METHOD_LOG_EVENT",r.METHOD_INIT="METHOD_INIT",r.METHOD_CALL_SERVICE_CENTER="METHOD_CALL_SERVICE_CENTER",r.METHOD_BACK_TO_LAST_PAGE="METHOD_BACK_TO_LAST_PAGE",r.METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE="METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE",r.METHOD_GO_TO_HOTEL_DETAIL="METHOD_GO_TO_HOTEL_DETAIL",r.METHOD_OPEN_URL="METHOD_OPEN_URL",r.METHOD_CHECK_UPDATE="METHOD_CHECK_UPDATE",r.METHOD_RECOMMEND_APP_TO_FRIEND="METHOD_RECOMMEND_APP_TO_FRIEND",r.METHOD_ADD_WEIXIN_FRIEND="METHOD_ADD_WEIXIN_FRIEND",r.METHOD_SHOW_NEWEST_INTRODUCTION="METHOD_SHOW_NEWEST_INTRODUCTION",r.METHOD_BECOME_ACTIVE="METHOD_BECOME_ACTIVE",r.METHOD_WEB_VIEW_FINISHED_LOAD="METHOD_WEB_VIEW_FINISHED_LOAD",r.METHOD_CROSS_DOMAIN_HREF="METHOD_CROSS_DOMAIN_HREF",r.METHOD_CHECK_APP_INSTALL="METHOD_CHECK_APP_INSTALL",r.METHOD_CROSS_JUMP="METHOD_CROSS_JUMP",r.METHOD_REFRESH_NATIVE="METHOD_REFRESH_NATIVE",r.METHOD_H5_NEED_REFRESH="METHOD_H5_NEED_REFRESH",r.METHOD_READ_FROM_CLIPBOARD="METHOD_READ_FROM_CLIPBOARD",r.METHOD_COPY_TO_CLIPBOARD="METHOD_COPY_TO_CLIPBOARD",r.METHOD_SHARE_TO_VENDOR="METHOD_SHARE_TO_VENDOR",r.METHOD_DOWNLOAD_DATA="METHOD_DOWNLOAD_DATA",r.METHOD_NATIVE_LOG="METHOD_NATIVE_LOG",r.METHOD_ENCRYPT_BASE64="METHOD_ENCRYPT_BASE64",r.METHOD_SEND_H5_PIPE_REQUEST="METHOD_SEND_H5_PIPE_REQUEST",r.METHOD_SEND_HTTP_PIPE_REQUEST="METHOD_SEND_HTTP_PIPE_REQUEST",r.METHOD_CHECK_PAY_APP_INSTALL_STATUS="METHOD_CHECK_PAY_APP_INSTALL_STATUS",r.METHOD_OPEN_PAY_APP_BY_URL="METHOD_OPEN_PAY_APP_BY_URL",r.METHOD_SET_NAVBAR_HIDDEN="METHOD_SET_NAVBAR_HIDDEN",r.METHOD_SET_TOOLBAR_HIDDEN="METHOD_SET_TOOLBAR_HIDDEN",r.METHOD_CHECK_FILE_EXIST="METHOD_CHECK_FILE_EXIST",r.METHOD_DELETE_FILE="METHOD_DELETE_FILE",r.METHOD_GET_CURRENT_SANDBOX_NAME="METHOD_GET_CURRENT_SANDBOX_NAME",r.METHOD_GET_FILE_SIZE="METHOD_GET_FILE_SIZE",r.METHOD_MAKE_DIR="METHOD_MAKE_DIR",r.METHOD_READ_TEXT_FROM_FILE="METHOD_READ_TEXT_FROM_FILE",r.METHOD_WRITE_TEXT_TO_FILE="METHOD_WRITE_TEXT_TO_FILE",r.METHOD_ABORT_HTTP_PIPE_REQUEST="METHOD_ABORT_HTTP_PIPE_REQUEST",r.METHOD_OPEN_ADV_PAGE="METHOD_OPEN_ADV_PAGE",r.METHOD_WEB_VEW_DID_APPEAR="METHOD_WEB_VEW_DID_APPEAR",r.METHOD_SHOW_MAP="METHOD_SHOW_MAP";var i="h5_init_finished",s="member_login",o="non_member_login",u="member_auto_login",a="locate",f="refresh_nav_bar",l="back",c="commit",h="cityChoose",p="member_register",d="init_member_H5_info",v="become_active",m="web_view_finished_load",g="check_app_install_status",y="app_h5_need_refresh",b="read_copied_string_from_clipboard",w="download_data",E="base64_encode",S="send_h5_pipe_request",x="send_http_pipe_request",T="check_pay_app_install_status",N="check_file_exist",C="delete_file",k="get_current_sandbox_name",L="get_file_size",A="make_dir",O="read_text_from_file",M="write_text_to_file",D="web_view_did_appear",P=!1,H={METHOD_NON_MEMBER_LOGIN:function(e){B[o]=function(r){n.applog("METHOD_NON_MEMBER_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback(r)}},METHOD_ENCRYPT_BASE64:function(e){B[E]=function(t){typeof t=="string"&&(t=JSON.parse(t)),typeof e.callback=="function"&&e.callback(t)}},METHOD_LOCATE:function(e){B[a]=function(t){n.applog("METHOD_LOCATE",t);try{var r=t;typeof t=="string"&&(r=JSON.parse(t)),e.success(r)}catch(i){e.error(!0,"定位失败")}}},METHOD_MEMBER_LOGIN:function(e){B[s]=function(r){n.applog("METHOD_MEMBER_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback()}},METHOD_AUTO_LOGIN:function(e){B[u]=function(r){n.applog("METHOD_AUTO_LOGIN",r),typeof r=="string"&&(r=JSON.parse(r));if(r){var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u)}typeof e.callback=="function"&&e.callback(r)}},METHOD_REGISTER:function(e){B[p]=function(r){n.applog("METHOD_REGISTER",r),typeof r=="string"&&(r=JSON.parse(r));var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.data.Auth,o.set(u),typeof e.callback=="function"&&e.callback()}},METHOD_ENTRY:function(e){B[i]=e.callback},METHOD_BACK:function(e){B[l]=e.callback},METHOD_COMMIT:function(e){B[c]=e.callback},METHOD_CITY_CHOOSE:function(e){B[h]=e.callback},METHOD_SEND_H5_PIPE_REQUEST:function(e){B[S]=function(t){typeof e.callback=="function"&&e.callback(t)}},METHOD_SEND_HTTP_PIPE_REQUEST:function(e){B[x]=function(t){typeof e.callback=="function"&&e.callback(t)}},METHOD_CHECK_PAY_APP_INSTALL_STATUS:function(){B[T]=function(e){typeof options.callback=="function"&&options.callback(e)}},METHOD_INIT:function(e){B[d]=function(r){n.applog("METHOD_INIT",r),typeof r=="string"&&(r=JSON.parse(r));if(window.localStorage&&r){if(r&&r.userInfo)try{var i=t.UserStore.getInstance(),s=i.getUser();i.setUser(r.userInfo.data);var o=t.HeadStore.getInstance(),u=o.get();u.auth=r.userInfo.data.Auth,o.set(u)}catch(a){alert("set data error")}if(r&&r.device){var f={device:r.device};window.localStorage.setItem("DEVICEINFO",JSON.stringify(f))}if(r&&r.appId){var l={version:r.version,appId:r.appId,serverVersion:r.serverVersion,platform:r.platform};window.localStorage.setItem("APPINFO",JSON.stringify(l))}r&&r.timestamp&&window.localStorage.setItem("SERVERDATE",r.timestamp),r&&r.sourceId&&window.localStorage.setItem("SOURCEID",r.sourceId),r&&r.isPreProduction&&window.localStorage.setItem("isPreProduction",r.isPreProduction)}e.callback()}},METHOD_WEB_VIEW_FINISHED_LOAD:function(e){B[m]=e.callback},METHOD_BECOME_ACTIVE:function(e){B[v]=e.callback},METHOD_CHECK_APP_INSTALL:function(e){B[g]=function(t){n.applog("METHOD_CHECK_APP_INSTALL",t),e.callback(t)}},METHOD_H5_NEED_REFRESH:function(e){B[y]=e.callback},METHOD_CHECK_FILE_EXIST:function(e){B[N]=function(t){e.callback(t)}},METHOD_DELETE_FILE:function(e){B[C]=function(t){e.callback(t)}},METHOD_GET_CURRENT_SANDBOX_NAME:function(e){B[k]=function(t){e.callback(t)}},METHOD_GET_FILE_SIZE:function(e){B[L]=function(t){e.callback(t)}},METHOD_MAKE_DIR:function(e){B[A]=function(t){e.callback(t)}},METHOD_READ_TEXT_FROM_FILE:function(e){B[O]=function(t){e.callback(t)}},METHOD_WRITE_TEXT_TO_FILE:function(e){B[M]=function(t){e.callback(t)}},METHOD_READ_FROM_CLIPBOARD:function(e){B[b]=function(t){n.applog("METHOD_READ_FROM_CLIPBOARD",t),e.callback(t)}},METHOD_DOWNLOAD_DATA:function(e){B[w]=function(t){n.applog("METHOD_DOWNLOAD_DATA",t),typeof e.callback=="function"&&e.callback(t)}},METHOD_WEB_VEW_DID_APPEAR:function(e){B[D]=function(t){e.callback(t)}}},B={},j={h5_init_finished:function(e){typeof B[i]=="function"&&B[i](e)},non_member_login:function(e){typeof B[o]=="function"&&B[o](e)},locate:function(e){typeof B[a]=="function"&&B[a](e)},member_login:function(e){typeof B[s]=="function"&&B[s](e)},back:function(){typeof B[l]=="function"&&B[l]()},commit:function(){typeof B[c]=="function"&&B[c]()},cityChoose:function(){typeof B[h]=="function"&&B[h]()},init_member_H5_info:function(e){typeof B[d]=="function"&&B[d](e)},member_register:function(){typeof B[p]=="function"&&B[p]()},web_view_finished_load:function(){typeof B[m]=="function"&&B[m]()},become_active:function(){typeof B[v]=="function"&&B[v]()},member_auto_login:function(e){typeof B[u]=="function"&&B[u](e)},check_app_install_status:function(e){typeof B[g]=="function"&&B[g](e)},app_h5_need_refresh:function(e){typeof B[y]=="function"&&B[y](e)},read_copied_string_from_clipboard:function(e){typeof B[b]=="function"&&B[b](e)},download_data:function(e){typeof B[w]=="function"&&B[w](e)},base64_encode:function(e){typeof B[E]=="function"&&B[E](e)},send_h5_pipe_request:function(e){typeof B[S]=="function"&&B[S](e)},send_http_pipe_request:function(e){typeof B[x]=="function"&&B[x](e)},check_pay_app_install_status:function(e){typeof B[T]=="function"&&B[T](e)},check_file_exist:function(e){typeof B[N]=="function"&&B[N](e)},delete_file:function(e){typeof B[C]=="function"&&B[C](e)},get_current_sandbox_name:function(e){typeof B[k]=="function"&&B[k](e)},get_file_size:function(e){typeof B[L]=="function"&&B[L](e)},make_dir:function(e){typeof B[A]=="function"&&B[A](e)},read_text_from_file:function(e){typeof B[O]=="function"&&B[O](e)},write_text_to_file:function(e){typeof B[M]=="function"&&B[M](e)},web_view_finished_load:function(e){typeof B[m]=="function"&&B[m](e)},web_view_did_appear:function(e){typeof B[D]=="function"&&B[D](e)}},F={callback:function(e){if(P)return;var t=e;if(typeof e=="string")try{t=JSON.parse(window.decodeURIComponent(e))}catch(n){setTimeout(function(){0},0)}if(typeof j[t.tagname]=="function")return j[t.tagname](t.param),!0}},I=function(e){for(var t in F)e[t]=e[t]||F[t]};return r.init=function(){var e=window.app={};I(e)},r.register=function(e){typeof H[e.tagname]=="function"&&H[e.tagname](e)},r.request=function(e){var t={METHOD_INIT:function(e){r.register({tagname:r.METHOD_INIT,callback:e.callback}),CtripUtil.app_init_member_H5_info()},METHOD_ENTRY:function(e){return},METHOD_MEMBER_LOGIN:function(e){r.register({tagname:r.METHOD_MEMBER_LOGIN,callback:e.callback}),CtripUser.app_member_login()},METHOD_NON_MEMBER_LOGIN:function(e){r.register({tagname:r.METHOD_NON_MEMBER_LOGIN,callback:e.callback}),CtripUser.app_non_member_login()},METHOD_AUTO_LOGIN:function(e){r.register({tagname:r.METHOD_AUTO_LOGIN,callback:e.callback}),CtripUser.app_member_auto_login()},METHOD_REGISTER:function(e){r.register({tagname:r.ETHOD_REGISTER,callback:e.callback}),CtripUser.app_member_register()},METHOD_LOCATE:function(e){r.register({tagname:r.METHOD_LOCATE,success:e.success,error:e.error});var t=!0;e.isAsync&&(t=e.isAsync),CtripMap.app_locate(t)},METHOD_REFRESH_NAV_BAR:function(e){CtripBar.app_refresh_nav_bar(e.config)},METHOD_CALL_PHONE:function(e){CtripUtil.app_call_phone(e.tel)},METHOD_BACK_TO_HOME:function(e){CtripUtil.app_back_to_home()},METHOD_BACK_TO_BOOK_CAR:function(e){app_back_to_book_car()},METHOD_LOG_EVENT:function(e){CtripUtil.app_log_event(e.event_name)},METHOD_CALL_SERVICE_CENTER:function(){CtripUtil.app_call_phone()},METHOD_BACK_TO_LAST_PAGE:function(e){var t=e.param||"";CtripUtil.app_back_to_last_page(t)},METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE:function(e){CtripUtil.app_go_to_book_car_finished_page(e.url)},METHOD_GO_TO_HOTEL_DETAIL:function(e){CtripUtil.app_go_to_hotel_detail(e.hotelId,e.hotelName,e.cityId,e.isOverSea)},METHOD_OPEN_URL:function(e){var t=e.title||"";CtripUtil.app_open_url(e.openUrl,e.targetMode,t)},METHOD_CHECK_UPDATE:function(e){CtripUtil.app_check_update()},METHOD_RECOMMEND_APP_TO_FRIEND:function(){CtripUtil.app_recommend_app_to_friends()},METHOD_ADD_WEIXIN_FRIEND:function(){CtripUtil.app_add_weixin_friend()},METHOD_CROSS_DOMAIN_HREF:function(e){CtripUtil.app_cross_domain_href(e.moduleType,e.anchor,e.param)},METHOD_SHOW_NEWEST_INTRODUCTION:function(e){CtripUtil.app_show_newest_introduction()},METHOD_CHECK_APP_INSTALL:function(e){r.register({tagname:r.METHOD_CHECK_APP_INSTALL,callback:e.callback}),CtripUtil.app_check_app_install_status(e.url,e.package)},METHOD_CROSS_JUMP:function(e){CtripUtil.app_cross_package_href(e.path,e.param)},METHOD_REFRESH_NATIVE:function(e){CtripUtil.app_refresh_native_page(e.package,e.json)},METHOD_READ_FROM_CLIPBOARD:function(e){r.register({tagname:r.METHOD_READ_FROM_CLIPBOARD,callback:e.callback}),CtripUtil.app_read_copied_string_from_clipboard()},METHOD_COPY_TO_CLIPBOARD:function(e){CtripUtil.app_copy_string_to_clipboard(e.content)},METHOD_SHARE_TO_VENDOR:function(e){CtripUtil.app_call_system_share(e.imgUrl,e.text)},METHOD_DOWNLOAD_DATA:function(e){r.register({tagname:r.METHOD_DOWNLOAD_DATA,callback:e.callback}),CtripUtil.app_download_data(e.url,e.suffix)},METHOD_NATIVE_LOG:function(e){var t=window.localStorage.getItem("isPreProduction");t&&t!==""&&CtripTool.app_log("@[Wireless H5] "+e.log,e.result)},METHOD_ENCRYPT_BASE64:function(e){r.register({tagname:r.METHOD_ENCRYPT_BASE64,callback:e.callback}),CtripEncrypt.app_base64_encode(e.info)},METHOD_SEND_H5_PIPE_REQUEST:function(e){r.register({tagname:r.METHOD_SEND_H5_PIPE_REQUEST,callback:e.callback}),CtripUtil.app_send_H5_pipe_request(e.serviceCode,e.header,e.data,e.sequenceId)},METHOD_SEND_HTTP_PIPE_REQUEST:function(e){r.register({tagname:r.METHOD_SEND_HTTP_PIPE_REQUEST,callback:e.callback}),CtripUtil.app_send_HTTP_pipe_request(e.target,e.methods,e.header,e.queryData,e.retryInfo,e.sequenceId)},METHOD_ABORT_HTTP_PIPE_REQUEST:function(e){CtripPipe.app_abort_HTTP_pipe_request(e.sequenceId)},METHOD_CHECK_PAY_APP_INSTALL_STATUS:function(e){r.register({tagname:r.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:e.callback}),CtripPay.app_check_pay_app_install_status()},METHOD_OPEN_PAY_APP_BY_URL:function(e){CtripPay.app_open_pay_app_by_url(e.payAppName,e.payURL,e.successRelativeURL,e.detailRelativeURL)},METHOD_SET_NAVBAR_HIDDEN:function(e){CtripBar.app_set_navbar_hidden(e.isNeedHidden)},METHOD_SET_TOOLBAR_HIDDEN:function(e){CtripBar.app_set_toolbar_hidden(e.isNeedHidden)},METHOD_CHECK_FILE_EXIST:function(e){r.register({tagname:r.METHOD_CHECK_FILE_EXIST,callback:e.callback}),CtripFile.app_check_file_exist(e.fileName,e.relativeFilePath)},METHOD_DELETE_FILE:function(e){r.register({tagname:r.METHOD_DELETE_FILE,callback:e.callback}),CtripFile.app_delete_file(e.fileName,e.relativeFilePath)},METHOD_GET_CURRENT_SANDBOX_NAME:function(e){r.register({tagname:r.METHOD_GET_CURRENT_SANDBOX_NAME,callback:e.callback}),CtripFile.app_get_current_sandbox_name()},METHOD_GET_FILE_SIZE:function(e){r.register({tagname:r.METHOD_GET_FILE_SIZE,callback:callback}),CtripFile.app_get_file_size(e.fileName,e.relativeFilePath)},METHOD_MAKE_DIR:function(e){r.register({tagname:r.METHOD_MAKE_DIR,callback:callback}),CtripFile.app_make_dir(e.dirname,e.relativeFilePath)},METHOD_READ_TEXT_FROM_FILE:function(e){r.register({tagname:r.METHOD_READ_TEXT_FROM_FILE,callback:callback}),CtripFile.app_read_text_from_file(e.fileName,e.relativeFilePath)},METHOD_WRITE_TEXT_TO_FILE:function(e){r.register({tagname:r.METHOD_WRITE_TEXT_TO_FILE,callback:callback}),CtripFile.app_write_text_to_file(e.text,e.fileName,e.relativeFilePath,e.isAppend)},METHOD_OPEN_ADV_PAGE:function(e){CtripUtil.app_open_adv_page(e.url)},METHOD_SHOW_MAP:function(e){CtripUtil.app_show_map(e.latitude,e.longitude,e.title,e.subtitle)}};t[e.name](e)},r.getOpenUrl=function(e){var t="ctrip://wireless/"+e.module+"?";return _.each(e.param,function(e,n,r){t+=n+"="+e+"&"}),t[t.length-1]==="&"&&(t=t.slice(0,t.length-1)),t},r}),define("cWidgetGuider",["cUtilityHybrid","cWidgetFactory","cHybridFacade"],function(e,t,n){var r="Guider",i={jump:function(e){var t={refresh:function(){n.request({name:n.METHOD_OPEN_URL,targetMode:0,title:e.title})},app:function(){if(e&&e.module){var t=n.getOpenUrl(e);n.request({name:n.METHOD_OPEN_URL,openUrl:t,targetMode:1,title:e.title})}else e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:1,title:e.title})},h5:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:2,title:e.title})},browser:function(){e&&e.url&&n.request({name:n.METHOD_OPEN_URL,openUrl:e.url,targetMode:3,title:e.title})}};typeof t[e.targetModel]=="function"&&t[e.targetModel]()},apply:function(e){e.hybridCallback()},call:function(e){return!1},init:function(e){e&&window.parseFloat(e.version)<5.2?n.request({name:n.METHOD_ENTRY,callback:e.callback}):n.request({name:n.METHOD_INIT,callback:e.callback})},log:function(e){n.request({name:n.METHOD_LOG_EVENT,event_name:e.name})},print:function(e){n.request({name:n.METHOD_NATIVE_LOG,log:e.log,result:e.result})},callService:function(){n.request({name:n.METHOD_CALL_SERVICE_CENTER})},backToLastPage:function(e){var t=e?e.param:"";n.request({name:n.METHOD_BACK_TO_LAST_PAGE,param:t})},checkUpdate:function(){n.request({name:n.METHOD_CHECK_UPDATE})},recommend:function(){n.request({name:n.METHOD_RECOMMEND_APP_TO_FRIEND})},addWeixinFriend:function(){n.request({name:n.METHOD_ADD_WEIXIN_FRIEND})},showNewestIntroduction:function(){n.request({name:n.METHOD_SHOW_NEWEST_INTRODUCTION})},register:function(e){e&&e.tagname&&e.callback&&n.register({tagname:e.tagname,callback:e.callback})},create:function(){n.init()},home:function(){n.request({name:n.METHOD_BACK_TO_HOME})},jumpHotel:function(e){n.request({name:n.METHOD_GO_TO_HOTEL_DETAIL,hotelId:e.hotelId,hotelName:e.name,cityId:e.cityId,isOverSea:e.isOverSea})},injectUbt:function(){var e='!function () { var a, b, c, d, e, f, g, i; if (true) { for (a = document.getElementsByTagName("script") || [], b = /_bfa.min.js/i, c = 0; c < a.length; c++) if (b.test(a[c].src)) return; if (!(window.$_bf || window.$LAB || window.CtripJsLoader)) { d = new Date, e = "?v=" + d.getFullYear() + d.getMonth() + "_" + d.getDate() + ".js", f = document.createElement("script"), f.type = "text/javascript", f.charset = "utf-8", f.async = !0; try { g = "https:" == document.location.protocol } catch (h) { g = "https:" == document.URL.match(/[^:]+/) + ":" } f.src = g ? "https://s.c-ctrip.com/_bfa.min.js" + e : "http://webresource.c-ctrip.com/code/ubt/_bfa.min.js" + e, i = document.getElementsByTagName("script")[0], i.parentNode.insertBefore(f, i) } } } ();',t=$("<script>"+e+"//<"+"/scrtip>");$("body").append(t)},checkAppInstall:function(e){n.request({name:n.METHOD_CHECK_APP_INSTALL,url:e.url,"package":e.package,callback:e.callback})},callPhone:function(e){n.request({name:n.METHOD_CALL_PHONE,tel:e.tel})},cross:function(e){n.request({name:n.METHOD_CROSS_JUMP,param:e.param,path:e.path})},refreshNative:function(e){n.request({name:n.METHOD_REFRESH_NATIVE,"package":e.package,json:e.json})},copyToClipboard:function(e){n.request({name:n.METHOD_COPY_TO_CLIPBOARD,content:e.content})},readFromClipboard:function(e){n.request({name:n.METHOD_READ_FROM_CLIPBOARD,callback:e.callback})},shareToVendor:function(e){n.request({name:n.METHOD_SHARE_TO_VENDOR,imgUrl:e.imgUrl,text:e.text})},downloadData:function(e){n.request({name:n.METHOD_DOWNLOAD_DATA,url:e.url,callback:e.callback,suffix:e.suffix})},encode:function(e){e&&e.mode==="base64"&&n.request({name:n.METHOD_ENCRYPT_BASE64,callback:e.callback,info:e.info})}};i.file={isFileExist:function(e){n.request({name:n.METHOD_CHECK_FILE_EXIST,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},deleteFile:function(e){n.request({name:n.METHOD_DELETE_FILE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},getCurrentSandboxName:function(e){n.request({name:n.METHOD_GET_CURRENT_SANDBOX_NAME,callback:e.callback})},getFileSize:function(e){n.request({name:n.METHOD_GET_FILE_SIZE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},makeDir:function(e){n.request({name:n.METHOD_MAKE_DIR,callback:e.callback,dirname:e.dirname,relativeFilePath:e.relativeFilePath})},readTextFromFile:function(e){n.request({name:n.METHOD_READ_TEXT_FROM_FILE,callback:e.callback,fileName:e.fileName,relativeFilePath:e.relativeFilePath})},writeTextToFile:function(e){n.request({name:n.METHOD_WRITE_TEXT_TO_FILE,callback:e.callback,text:e.text,isAppend:e.isAppend,fileName:e.fileName,relativeFilePath:e.relativeFilePath})}},i.pipe={socketRequest:function(e){n.request({name:n.METHOD_SEND_H5_PIPE_REQUEST,callback:e.callback,serviceCode:e.serviceCode,header:e.header,data:e.data,sequenceId:Date.now()})},httpRequest:function(e){var t=Date.now();return n.request({name:n.METHOD_SEND_HTTP_PIPE_REQUEST,callback:e.callback,target:e.url,method:e.method,header:e.header,queryData:e.param,retryInfo:e.retry,sequenceId:t}),t},abortRequest:function(e){n.request({name:n.METHOD_ABORT_HTTP_PIPE_REQUEST,sequenceId:e.id})}},i.pay={checkStatus:function(e){n.request({name:n.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:e.callback})},payOut:function(e){n.request({name:n.METHOD_OPEN_PAY_APP_BY_URL,payAppName:e.payAppName,payURL:e.payURL,successRelativeURL:e.successRelativeURL,detailRelativeURL:e.detailRelativeURL})}};var s={jump:function(e){e&&e.url&&typeof e.url=="string"&&(window.location.href=e.url)},apply:function(e){e&&e.callback&&typeof e.callback=="function"&&e.callback()},call:function(e){var t=document.getElementById("h5-hybrid-caller");if(!e||!e.url||!typeof e.url==="string")return!1;t&&t.src==e.url?t.contentDocument.location.reload():t&&t.src!=e.url?t.src=e.url:(t=document.createElement("iframe"),t.id="h5-hybrid-caller",t.src=e.url,t.style.display="none",document.body.appendChild(t))},init:function(){return!1},log:function(e){window.console&&window.console.log(e.name)},print:function(e){return 0},callService:function(){window.location.href="tel:4000086666"},backToLastPage:function(){window.location.href=document.referrer},checkUpdate:function(){return!1},recommend:function(){return!1},addWeixinFriend:function(){return!1},showNewestIntroduction:function(){return!1},register:function(){return!1},create:function(){return!1},home:function(){window.location.href="/"},jumpHotel:function(){return!1},injectUbt:function(){return!1},checkAppInstall:function(){return!1},callPhone:function(){return!1},cross:function(){return!1},refreshNative:function(){return!1},copyToClipboard:function(e){return!1},readFromClipboard:function(e){return!1},shareToVendor:function(e){return!1},downloadData:function(e){return!1},encode:function(e){return!1}};s.file={isFileExist:function(e){return!1},deleteFile:function(e){return!1},getCurrentSandboxName:function(e){return!1},getFileSize:function(e){return!1},makeDir:function(e){return!1},readTextFromFile:function(e){return!1},writeTextToFile:function(e){return!1}},s.pipe={socketRequest:function(){return!1},httpRequest:function(){return!1},abortRequest:function(){return!1}},s.pay={checkStatus:function(){return!1},payOut:function(){return!1}},t.register({name:r,fn:e.isInApp()?i:s})}),define("App",["libs","cBase","AbstractAPP","cWidgetFactory","cWidgetGuider"],function(e,t,n,r){(function(){function i(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"left":"right":n-r>0?"up":"down"}function s(s,o,u,a){if(!s)return;s.on(t,function(t){var n=t.changedTouches&&t.changedTouches[0]||t;e.x1=n.pageX,e.y1=n.pageY}).on(n,function(e){a||e.preventDefault()}).on(r,function(t){var n=t.changedTouches&&t.changedTouches[0]||t;e.x2=n.pageX,e.y2=n.pageY;if(e.x2&&Math.abs(e.x1-e.x2)>10||e.y2&&Math.abs(e.y1-e.y2)>10){var r=i(e.x1,e.x2,e.y1,e.y2);o===r&&typeof u=="function"&&u()}else o==="tap"&&typeof u=="function"&&u()})}function o(e){if(!e)return;e.off(t).off(n).off(r)}var e={},t="touchstart",n="touchmove",r="touchend";"ontouchstart"in window||(t="mousedown",n="mousemove",r="mouseup"),$.flip=s,$.flipDestroy=o})();var i=new t.Class(n,{__propertys__:function(){},cleanCache:function(){var e=["FLIGHT_SEARCH","FLIGHT_SEARCH_SUBJOIN","FLTINTL_SEARCH","FLIGHT_LIST","FLIGHT_INTER_CITY_LIST","FLIGHT_CITY_LIST","zqInCityInfo","zqInCityDateStore","LastInCitySelectDateTime","LastzqInAirportSelectDateTime","zqInAirportInfo","zqInAirportDateStore","zqInAirportDateAndAddressStore","zqInCityDateAndAddressStore","zqInCitySelectStore","zqInAirportSelectStore","FLIGHT_DETAILS","FLIGHT_DETAILS_PARAM","FLIGHT_ORDERINFO","USER_FLIGHT_ORDERLIST","USER_FLIGHT_ORDERDETAIL","USER_FLIGHT_ORDERPARAM","FLIGHT_RETURNPAGE","FLIGHT_SELECTED_INFO","FLIGHT_PICK_TICKET_SELECT","FLIGHT_AIRLINE","FLIGHT_AIRCTRAFT","FLIGHT_ENUM_TAKETIME","FLIGHT_ENUM_CABINS","FLIGHT_LIST_FILTER","FLIGHT_PICK_TICKET","FLIGHT_PICK_TICKET_PARAM","FLIGHT_AD_TIMEOUT","P_FLIGHT_TicketList","U_FLIGHT_ORDERLIST","U_FLIGHT_ORDERDETAIL"],t={flight:e},n=t[this.channel];if(Array.isArray(n))for(var r in n)window.localStorage.removeItem(r)},initialize:function($super,e){$super(e);var t=r.create("Guider");t.create(),$.bindFastClick&&$.bindFastClick(),this.cleanCache()}});return i}),define("rsa",[],function(){function p(e){f=e,l=new Array(f);for(var t=0;t<l.length;t++)l[t]=0;c=new m,h=new m,h.digits[0]=1}function m(e){typeof e=="boolean"&&e==1?this.digits=null:this.digits=l.slice(0),this.isNeg=!1}function g(e){var t=e.charAt(0)=="-",n=t?1:0,r;while(n<e.length&&e.charAt(n)=="0")++n;if(n==e.length)r=new m;else{var i=e.length-n,s=i%d;s==0&&(s=d),r=b(Number(e.substr(n,s))),n+=s;while(n<e.length)r=_(B(r,v),b(Number(e.substr(n,d)))),n+=d;r.isNeg=t}return r}function y(e){var t=new m(!0);return t.digits=e.digits.slice(0),t.isNeg=e.isNeg,t}function b(e){var t=new m;t.isNeg=e<0,e=Math.abs(e);var n=0;while(e>0)t.digits[n++]=e&u,e=Math.floor(e/r);return t}function w(e){var t="";for(var n=e.length-1;n>-1;--n)t+=e.charAt(n);return t}function S(e,t){var n=new m;n.digits[0]=t;var r=J(e,n),i=E[r[1].digits[0]];while($(r[0],c)==1)r=J(r[0],n),digit=r[1].digits[0],i+=E[r[1].digits[0]];return(e.isNeg?"-":"")+w(i)}function x(e){var t=new m;t.digits[0]=10;var n=J(e,t),r=String(n[1].digits[0]);while($(n[0],c)==1)n=J(n[0],t),r+=String(n[1].digits[0]);return(e.isNeg?"-":"")+w(r)}function N(e){var t=15,n="";for(i=0;i<4;++i)n+=T[e&t],e>>>=4;return w(n)}function C(e){var t="",n=P(e);for(var r=P(e);r>-1;--r)t+=N(e.digits[r]);return t}function k(e){var t=48,n=t+9,r=97,i=r+25,s=65,o=90,u;return e>=t&&e<=n?u=e-t:e>=s&&e<=o?u=10+e-s:e>=r&&e<=i?u=10+e-r:u=0,u}function L(e){var t=0,n=Math.min(e.length,4);for(var r=0;r<n;++r)t<<=4,t|=k(e.charCodeAt(r));return t}function A(e){var t=new m,n=e.length;for(var r=n,i=0;r>0;r-=4,++i)t.digits[i]=L(e.substr(Math.max(r-4,0),Math.min(r,4)));return t}function O(e,t){var n=e.charAt(0)=="-",r=n?1:0,i=new m,s=new m;s.digits[0]=1;for(var o=e.length-1;o>=r;o--){var u=e.charCodeAt(o),a=k(u),f=F(s,a);i=_(i,f),s=F(s,t)}return i.isNeg=n,i}function M(e){return(e.isNeg?"-":"")+e.digits.join(" ")}function _(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=D(e,t),t.isNeg=!t.isNeg;else{n=new m;var i=0,s;for(var o=0;o<e.digits.length;++o)s=e.digits[o]+t.digits[o]+i,n.digits[o]=s%r,i=Number(s>=r);n.isNeg=e.isNeg}return n}function D(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=_(e,t),t.isNeg=!t.isNeg;else{n=new m;var i,s;s=0;for(var o=0;o<e.digits.length;++o)i=e.digits[o]-t.digits[o]+s,n.digits[o]=i%r,n.digits[o]<0&&(n.digits[o]+=r),s=0-Number(i<0);if(s==-1){s=0;for(var o=0;o<e.digits.length;++o)i=0-n.digits[o]+s,n.digits[o]=i%r,n.digits[o]<0&&(n.digits[o]+=r),s=0-Number(i<0);n.isNeg=!e.isNeg}else n.isNeg=e.isNeg}return n}function P(e){var t=e.digits.length-1;while(t>0&&e.digits[t]==0)--t;return t}function H(e){var t=P(e),r=e.digits[t],i=(t+1)*n,s;for(s=i;s>i-n;--s){if((r&32768)!=0)break;r<<=1}return s}function B(e,n){var r=new m,i,s=P(e),o=P(n),a,f,l;for(var c=0;c<=o;++c){i=0,l=c;for(j=0;j<=s;++j,++l)f=r.digits[l]+e.digits[j]*n.digits[c]+i,r.digits[l]=f&u,i=f>>>t;r.digits[c+s+1]=i}return r.isNeg=e.isNeg!=n.isNeg,r}function F(e,n){var r,i,s;result=new m,r=P(e),i=0;for(var o=0;o<=r;++o)s=result.digits[o]+e.digits[o]*n+i,result.digits[o]=s&u,i=s>>>t;return result.digits[1+r]=i,result}function I(e,t,n,r,i){var s=Math.min(t+i,e.length);for(var o=t,u=r;o<s;++o,++u)n[u]=e[o]}function R(e,t){var r=Math.floor(t/n),i=new m;I(e.digits,0,i.digits,r,i.digits.length-r);var s=t%n,o=n-s;for(var a=i.digits.length-1,f=a-1;a>0;--a,--f)i.digits[a]=i.digits[a]<<s&u|(i.digits[f]&q[s])>>>o;return i.digits[0]=i.digits[a]<<s&u,i.isNeg=e.isNeg,i}function z(e,t){var r=Math.floor(t/n),i=new m;I(e.digits,r,i.digits,0,e.digits.length-r);var s=t%n,o=n-s;for(var u=0,a=u+1;u<i.digits.length-1;++u,++a)i.digits[u]=i.digits[u]>>>s|(i.digits[a]&U[s])<<o;return i.digits[i.digits.length-1]>>>=s,i.isNeg=e.isNeg,i}function W(e,t){var n=new m;return I(e.digits,0,n.digits,t,n.digits.length-t),n}function X(e,t){var n=new m;return I(e.digits,t,n.digits,0,n.digits.length-t),n}function V(e,t){var n=new m;return I(e.digits,0,n.digits,0,t),n}function $(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var n=e.digits.length-1;n>=0;--n)if(e.digits[n]!=t.digits[n])return e.isNeg?1-2*Number(e.digits[n]>t.digits[n]):1-2*Number(e.digits[n]<t.digits[n]);return 0}function J(e,t){var i=H(e),a=H(t),f=t.isNeg,l,c;if(i<a)return e.isNeg?(l=y(h),l.isNeg=!t.isNeg,e.isNeg=!1,t.isNeg=!1,c=D(t,e),e.isNeg=!0,t.isNeg=f):(l=new m,c=y(e)),new Array(l,c);l=new m,c=e;var p=Math.ceil(a/n)-1,d=0;while(t.digits[p]<s)t=R(t,1),++d,++a,p=Math.ceil(a/n)-1;c=R(c,d),i+=d;var v=Math.ceil(i/n)-1,g=W(t,v-p);while($(c,g)!=-1)++l.digits[v-p],c=D(c,g);for(var b=v;b>p;--b){var w=b>=c.digits.length?0:c.digits[b],E=b-1>=c.digits.length?0:c.digits[b-1],S=b-2>=c.digits.length?0:c.digits[b-2],x=p>=t.digits.length?0:t.digits[p],T=p-1>=t.digits.length?0:t.digits[p-1];w==x?l.digits[b-p-1]=u:l.digits[b-p-1]=Math.floor((w*r+E)/x);var N=l.digits[b-p-1]*(x*r+T),C=w*o+(E*r+S);while(N>C)--l.digits[b-p-1],N=l.digits[b-p-1]*(x*r|T),C=w*r*r+(E*r+S);g=W(t,b-p-1),c=D(c,F(g,l.digits[b-p-1])),c.isNeg&&(c=_(c,g),--l.digits[b-p-1])}return c=z(c,d),l.isNeg=e.isNeg!=f,e.isNeg&&(f?l=_(l,h):l=D(l,h),t=z(t,d),c=D(t,c)),c.digits[0]==0&&P(c)==0&&(c.isNeg=!1),new Array(l,c)}function K(e,t){return J(e,t)[0]}function Q(e,t){return J(e,t)[1]}function G(e,t,n){return Q(B(e,t),n)}function Y(e,t){var n=h,r=e;for(;;){(t&1)!=0&&(n=B(n,r)),t>>=1;if(t==0)break;r=B(r,r)}return n}function Z(e,t,n){var r=h,i=e,s=t;for(;;){(s.digits[0]&1)!=0&&(r=G(r,i,n)),s=z(s,1);if(s.digits[0]==0&&P(s)==0)break;i=G(i,i,n)}return r}function et(e){this.modulus=y(e),this.k=P(this.modulus)+1;var t=new m;t.digits[2*this.k]=1,this.mu=K(t,this.modulus),this.bkplus1=new m,this.bkplus1.digits[this.k+1]=1,this.modulo=tt,this.multiplyMod=nt,this.powMod=rt}function tt(e){var t=X(e,this.k-1),n=B(t,this.mu),r=X(n,this.k+1),i=V(e,this.k+1),s=B(r,this.modulus),o=V(s,this.k+1),u=D(i,o);u.isNeg&&(u=_(u,this.bkplus1));var a=$(u,this.modulus)>=0;while(a)u=D(u,this.modulus),a=$(u,this.modulus)>=0;return u}function nt(e,t){var n=B(e,t);return this.modulo(n)}function rt(e,t){var n=new m;n.digits[0]=1;var r=e,i=t;for(;;){(i.digits[0]&1)!=0&&(n=this.multiplyMod(n,r)),i=z(i,1);if(i.digits[0]==0&&P(i)==0)break;r=this.multiplyMod(r,r)}return n}function it(e,t,n){this.e=A(e),this.d=A(t),this.m=A(n),this.digitSize=2*P(this.m)+2,this.chunkSize=this.digitSize-11,this.radix=16,this.barrett=new et(this.m)}function st(e){return(e<10?"0":"")+String(e)}function ot(e,t){if(e.chunkSize>e.digitSize-11)return"Error";var n=new Array,r=t.length,i=0;while(i<r)n[i]=t.charCodeAt(i),i++;var s=n.length,o="",u,a,f;for(i=0;i<s;i+=e.chunkSize){f=new m,u=0;var l,c=i+e.chunkSize>s?s%e.chunkSize:e.chunkSize,h=new Array;for(l=0;l<c;l++)h[l]=n[i+c-1-l];h[c]=0;var p=Math.max(8,e.digitSize-3-c);for(l=0;l<p;l++)h[c+1+l]=Math.floor(Math.random()*254)+1;h[e.digitSize-2]=2,h[e.digitSize-1]=0;for(a=0;a<e.digitSize;++u)f.digits[u]=h[a++],f.digits[u]+=h[a++]<<8;var d=e.barrett.powMod(f,e.e),v=e.radix==16?C(d):S(d,e.radix);o+=v+" "}return o.substring(0,o.length-1)}function ut(e,t){var n=t.split(" "),r="",i,s,o;for(i=0;i<n.length;++i){var u;e.radix==16?u=A(n[i]):u=O(n[i],e.radix),o=e.barrett.powMod(u,e.d);for(s=0;s<=P(o);++s)r+=String.fromCharCode(o.digits[s]&255,o.digits[s]>>8)}return r.charCodeAt(r.length-1)==0&&(r=r.substring(0,r.length-1)),r}function at(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),r,i,s,o,u,a;s=e.length,i=0,r="";while(i<s){o=e.charCodeAt(i++)&255;if(i==s){r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4),r+="==";break}u=e.charCodeAt(i++);if(i==s){r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4|(u&240)>>4),r+=t.charAt((u&15)<<2),r+="=";break}a=e.charCodeAt(i++),r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4|(u&240)>>4),r+=t.charAt((u&15)<<2|(a&192)>>6),r+=t.charAt(a&63)}return r}function lt(e){var t=ot(ft,at(e));return t}var e=2,t=16,n=t,r=65536,s=r>>>1,o=r*r,u=r-1,a=9999999999999998,f,l,c,h;p(20);var d=15,v=b(1e15),E=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"),T=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),q=new Array(0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535),U=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535);p(131);var ft=new it("10001","","B7273B08845EB1D93C9A6EB9C45BE087AF9E692C8B7DD6D38DECFA732E9A6CDCB52106BDDB9E13100AEF3638358D5B5EB9011C33B7AC3F697078C0572585B94119196F627025C6E7FA9AA5C82B149E2BB30FEA7D777AA453324A301FD46413E11A7DB4A9D5B2D4BD6330AE2C477D48250F057ABEF2BD76DC7574897254736A71");return{rsaEncrypted:lt}}),define("cUIBase",[],function(){var e={};return e.config={prefix:"cui-"},e.setConfig=function(t,n){e.config[t]=n},e.getElementPos=function(e){var t=0,n=0;do t+=e.offsetTop,n+=e.offsetLeft;while(e=e.offsetParent);return{top:t,left:n}},e.getCreateId=function(){var t=(new Date).getTime();return function(){return e.config.prefix+ ++t}}(),e.getBiggerzIndex=function(){var e=3e3;return function(){return++e}}(),e.getCurStyleOfEl=function(e,t){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(e).getPropertyValue(t);if(e.currentStyle){var n=t.split("-"),r=[],i;for(var s=0;s<n.length;s++)s==0?r.push(n[s]):(i=n[s].split(""),i[0]=i[0].toUpperCase(),r.push(i.join("")));return r=r.join(""),e.currentStyle[r]}},e.bindthis=function(e,t){return function(){e.apply(t,arguments)}},e.strToNum=function(e){var t=parseInt(e.replace(/[a-z]/i,""));return isNaN(t)?0:t},e.getElementRealSize=function(e){var t=$(e);return{width:t.width(),height:t.height()}},e.getPageSize=function(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:e,height:t}},e.getPageScrollPos=function(){var e=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t=Math.max(document.documentElement.scrollTop,document.body.scrollTop),n=Math.min(document.documentElement.clientHeight,document.body.clientHeight),r=Math.min(document.documentElement.clientWidth,document.body.clientWidth),i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),s=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{top:t,left:e,height:n,width:r,pageWidth:i,pageHeight:s}},e.getMousePos=function(e){var t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft);return{top:t+e.clientY,left:n+e.clientX}},e.getMousePosOfElement=function(t,n){var r=e.getMousePos(t),i=e.getElementPos(n),s=n.clientWidth,o=n.clientHeight,u=r.left-i.left,a=r.top-i.top;return u=u<0?0:u>s?s:u,a=a<0?0:a>o?o:a,{x:u,y:a}},e.createElement=function(e,t){var n=document.createElement(e),r,i;if(t)for(r in t)switch(r){case"attr":if(typeof t[r]=="object")for(i in t[r])t[r][i]!=null&&n.setAttribute(i,t[r][i]);break;case"styles":if(typeof t[r]=="object")for(i in t[r])t[r][i]!=null&&(n.style[i]=t[r][i]);break;case"id":n.id=t[r];break;case"class":n.className=t[r];break;case"html":n.innerHTML=t[r]}return n},e}),define("cUIAbstractView",["libs","cBase","cUIBase"],function(e,t,n){var r=Array.prototype.slice,i=Array.prototype.push,s=Object.prototype.toString,o="notCreate",u="onCreate",a="onShow",f="onHide",l={};return l.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=o,this.setOptionHander=[],this.rootBox,this.id=n.getCreateId(),this.classNames=[n.config.prefix+"view"],this.root,this.isCreate=!1},l.initialize=function(e){this.setOption(function(e,t){switch(!0){case this.allowEvents[e]:this.addEvent(e,t);break;case this.allowsPush[e]:s.call(t)==="[object Array]"?i.apply(this[e],t):this[e].push(t);break;case this.allowsConfig[e]:this[e]=t}}),this.readOption(e)},l.readOption=function(e){e=e||{};var t=this;$.each(e,function(e,n){$.each(t.setOptionHander,function(r,i){typeof i=="function"&&i.call(t,e,n)})})},l.setOption=function(e){this.setOptionHander.push(e)},l.createRoot=function(){var e=document.createElement("div");return e.className=this.classNames.join(" "),e.id=this.id,$(e)},l.addClass=function(e){this.classNames.push(e);if(!this.root)return;if(typeof e=="array")for(var t in e)this.root.addClass(e[t]);else typeof e=="string"&&this.root.addClass(e)},l.removeClass=function(e){if(typeof e=="array")for(var t in e)this.root.removeClass(e[t]);else typeof e=="string"&&this.root.removeClass(e)},l.createHtml=function(){throw new Error("未定义createHtml方法")},l.setRootHtml=function(e){this.root&&(this.root.empty(),this.root.append(e))},l.getRoot=function(){return this.root},l.addEventType=function(e){this.allowEvents[e]=!0,this.events[e]=[]},l.addEvent=function(e,t){if(!this.allowEvents[e])return!1;this.events[e]&&this.events[e].push(t)},l.removeEvent=function(e,t){this.events[e]&&(t?deleleValue(t,this.events[e]):this.events[e]=[])},l.remove=function(){this.hide(),this.root.remove()},l.trigger=function(e,t){var n=[],r;if(this.events[e]){t=t||[];for(r=0;r<this.events[e].length;r++)n[n.length]=this.events[e][r].apply(this,t)}return n},l.create=function(){!this.isCreate&&this.status!==u&&(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=u,this.isCreate=!0)},l.template=function(e){return _.template(e)},l.showAction=function(e){this.root.show(),typeof e=="function"&&e()},l.hideAction=function(e){this.root.hide(),typeof e=="function"&&e()},l.setzIndexTop=function(e){e=typeof e!="number"?0:e,this.root.css("z-index",n.getBiggerzIndex()+e)},l.isNotCreate=function(){return this.status===o},l.isShow=function(){return this.status===a},l.isHide=function(){return this.status===f},l.show=function(e){if(this.status===a)return;this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=a,e&&e.call(this)},this))},l.hide=function(e){if(!this.root||this.status===f)return;this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=f,e&&e.call(this)},this))},l.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},new t.Class(l)}),define("cUIMask",["libs","cBase","cUIAbstractView"],function(e,t,n){var r={},i={prefix:"cui-"};return r.__propertys__=function(){},r.initialize=function($super,e){this.bindEvent(),this.addClass(i.prefix+"mask"),$super(e)},r.bindEvent=function(){this.addEvent("onCreate",function(){this.setRootStyle(),this.onResize=$.proxy(function(){this.resize()},this),this.onResize()}),this.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onResize()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.onResize),this.root.unbind("touchmove")})},r.setRootStyle=function(){this.root.css({position:"absolute",left:"0px",top:"0px"})},r.createHtml=function(){return"<div></div>"},r.resize=function(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);this.root.css({width:"100%",height:t+"px"})},new t.Class(n,r)}),define("cUILayer",["libs","cBase","cUIAbstractView","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"};return i.__propertys__=function(){this.tpl=this.template(['<div class="'+s.prefix+'layer-padding">','<div class="'+s.prefix+'layer-content"><%=content%></div>',"</div>"].join("")),this.content="",this.contentDom,this.mask=new r({classNames:[s.prefix+"opacitymask"]}),this.addClass(s.prefix+"layer"),this.viewdata={},this.windowResizeHander,this.setIntervalResource,this.setIntervalTotal=0},i.initialize=function($super,e){var t={content:!0};this.setOption(function(e,n){switch(!0){case t[e]:this[e]=n;break;case"class"===e:this.addClass(n)}}),this.bindEvent(),$super(e),this.loadViewData()},i.loadViewData=function(){this.viewdata.content=this.content},i.setViewData=function(e){this.viewdata=cUtility.mix(this.viewdata,e),this.setRootHtml(this.createHtml())},i.bindEvent=function(){this.addEvent("onCreate",function(){this.windowResizeHander=$.proxy(this.reposition,this),this.contentDom=this.root.find("."+s.prefix+"layer-content")}),this.addEvent("onShow",function(){this.mask.show(),$(window).bind("resize",this.windowResizeHander),this.root.css("visibility","hidden"),this.reposition(),this.setIntervalResource=setInterval($.proxy(function(){this.setIntervalTotal<10?this.windowResizeHander():(this.setIntervalTotal=0,this.root.css("visibility","visible"),clearInterval(this.setIntervalResource)),this.setIntervalTotal++},this),1),this.setzIndexTop()}),this.addEvent("onHide",function(){$(window).unbind("resize",this.windowResizeHander),clearInterval(this.setIntervalResource),this.root.css("visibility","visible"),this.mask.hide()})},i.createHtml=function(){return this.tpl(this.viewdata)},i.maskToHide=function(e){this.mask.root.on("click",$.proxy(function(){this.hide(),typeof e=="function"&&e(),this.mask.root.off("click")},this)),this.mask.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},new t.Class(n,i)}),define("cUIAlert",["libs","cBase","cUILayer"],function(e,t,n){var r=Object.prototype.toString,i="confirm",s="cancel",o={};o.onCreate=function(){this.loadButtons()};var u={},a={prefix:"cui-"};u.__propertys__=function(){this.tpl=this.template(['<div class="cui-pop-box">',"<%if(showTitle) {%>",'<div class="cui-hd">','<div class="cui-text-center"><%=title%></div>',"</div>","<% } %>",'<div class="cui-bd">','<div class="cui-error-tips"><%=message%></div>','<div class="cui-roller-btns">',"</div>","</div>","</div>"].join("")),this.title="",this.message="",this.buttons=[{text:"确定",type:"confirm",click:function(){this.hide()}}],this.viewdata={title:"",message:"",showTitle:!1}},u.initialize=function($super,e){var t={title:!0,message:!0,buttons:!0,showTitle:!0};this.setOption(function(e,n){switch(!0){case t[e]:this[e]=n}}),this.addClass(a.prefix+"alert"),$super($.extend(o,e)),this.buildViewData()},u.buildViewData=function(){this.viewdata.title=this.title,this.viewdata.message=this.message,this.viewdata.showTitle=this.showTitle},u.setViewData=function(e){e.title&&(this.title=e.title),e.message&&(this.message=e.message),e.showTitle&&(this.showTitle=this.showTitle),e.buttons&&(this.buttons=e.buttons),this.buildViewData(),this.root||(this.root=this.createRoot()),this.setRootHtml(this.createHtml()),this.loadButtons()},u.loadButtons=function(){this.root||this.create();var e=this.root.find(".cui-roller-btns"),t=this.createButtons();e.empty(),$.each(t,function(t,n){e.append(n)})},u.createButtons=function(){var e=[],t=r.call(this.buttons)==="[object Array]",n=0,o=this;return $.each(this.buttons,function(r,u){var a="",f=[],l=function(){};if(t){a=u.text,u.cls&&f.push(u.cls),u.type=u.type?u.type:a=="取消"?s:i;switch(u.type){case s:f.push("cui-btns-cancel");break;case i:f.push("cui-btns-sure")}u.click&&(l=u.click)}else a=r,typeof u=="function"&&(l=u);e[n]=$('<div class="cui-flexbd '+f.join(" ")+'">'+a+"</div>"),e[n].addClass(f.join(" ")),e[n].bind("click",$.proxy(l,o)),n++}),e},u.createHtml=function(){return this.tpl(this.viewdata)};var f=new t.Class(n,u);return f.STYLE_CONFIRM=i,f.STYLE_CANCEL=s,f}),define("cUIWarning",["libs","cBase","cUILayer","cUIMask"],function(e,t,n,r){var i={},s={prefix:"cui-"},o=new r({classNames:[s.prefix+"warning-mask"]}),u=function(){},a={};return a.class=s.prefix+"warning",a.onCreate=function(){this.contentDom.html('<div class="'+s.prefix+'warning"><div class="blank"></div><p class="blanktxt">'+this.warningtitle+"</p></div>"),this.warningDom=this.contentDom.find(".blanktxt"),this.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this)),o.create(),o.root.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},a.onShow=function(){o.show()},a.onHide=function(){o.hide()},a.setTitle=function(e,t){e&&(this.create(),this.warningDom.html(e),this.warningtitle=e),t?this.callback=t:this.callback=function(){}},a.getTitle=function(){return this.warningtitle},i.__propertys__=function(){this.warningDom,this.warningtitle="",this.callback=function(){}},i.initialize=function($super,e){this.setOption(function(e,t){switch(e){case"title":this.warningtitle=t}}),$super($.extend(a,e))},new t.Class(n,i)}),define("cUIHashObserve",["libs","cBase"],function(e,t){var n={},r={prefix:"cui-"};return n.__propertys__=function(){this.hash,this.callback,this._hashchange=$.proxy(function(){this.hashchange()},this),this.isend=!0,this.scope},n.initialize=function(e){this.setOption(e)},n.setOption=function(e){var t={hash:!0,callback:!0,scope:!0};for(var n in e)switch(!0){case t[n]:this[n]=e[n]}},n.start=function(){this.isend=!1,window.location.hash+="|"+this.hash,$(window).bind("hashchange",this._hashchange)},n.end=function(){$(window).unbind("hashchange",this._hashchange),this.isend||(this.isend=!0,window.history.go(-1))},n.hashchange=function(){var e=window.location.hash;e.match(new RegExp("\\b"+this.hash+"\\b","ig"))||(this.isend=!0,this.callback.call(this.scope||this),this.end())},new t.Class(n)}),define("cUIPageview",["libs","cBase","cUIAbstractView","cUIMask","cUIHashObserve"],function(e,t,n,r,i){var s={},o={prefix:"cui-"};return s.__propertys__=function(){this.mask=new r({classNames:[o.prefix+"warning-mask"]}),this.hashObserve=new i({hash:this.id,scope:this,callback:function(){this.hide()}})},s.initialize=function($super,e){this.addClass(o.prefix+"pageview"),this.addEvent("onCreate",function(){this.mask.create(),this.mask.root.css({background:"url(data:image/gif;base64,R0lGODlhAQABAIAAAPX19QAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==) repeat"}),this.root.css({position:"absolute",left:"0px",top:"0px"})}),this.addEvent("onShow",function(){this.mask.show(),this.hashObserve.start(),this.root.bind("touchmove",function(e){e.preventDefault()})}),this.addEvent("onHide",function(){this.mask.hide(),setTimeout($.proxy(function(){this.hashObserve.end()},this),10)}),$super(e)},s.createHtml=function(){return""},new t.Class(n,s)}),define("cUIHeadWarning",["libs","cBase","cUIPageview"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s.class=i.prefix+"warning",s.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-header">','<div class="head-warning-header-backbtu"><span class="returnico"></span></div>','<div class="head-warning-header-title"></div>',"</div>",'<div class="head-warning-content">','<div class="head-warning-content-icon"><div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div></div></div>','<div class="head-warning-content-title"></div>',"</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.warningtitleDom=this.root.find(".head-warning-header-title"),this.warningcontentDom=this.root.find(".head-warning-content-title"),this.warningleftbtuDom=this.root.find(".head-warning-header-backbtu"),this.warningleftbtuDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},s.onShow=function(){this.setzIndexTop(),window.scrollTo(0,0)},r.__propertys__=function(){this.warningtitleDom,this.warningcontentDom,this.warningtitle="",this.warningcontent="",this.callback=function(){}},r.initialize=function($super,e){$super($.extend(s,e))},r.setTitle=function(e,t,n){e&&(this.create(),this.warningtitleDom.html(e),this.warningcontentDom.html(t)),n&&(this.callback=n)},new t.Class(n,r)}),define("cUIWarning404",["libs","cBase","cUIPageview","cWidgetFactory","cWidgetGuider"],function(e,t,n,r){var i=r.create("Guider"),s={},o={prefix:"cui-"},u=function(){},a={};return a.class=o.prefix+"warning",a.onCreate=function(){this.root.html(['<div class="head-warning">','<div class="head-warning-padding">','<div class="head-warning-content">','<div class="cui-load-fail cui-text-center">','<div class="cui-load-error">','<div class="cui-i cui-wifi cui-fail-icon">',"</div>","</div>",'<p class="cui-grayc">加载失败，请稍后再试试吧</p>','<button type="button" class="cui-btns-retry">重试</button>','<div class="cui-glines"></div>','<p class="cui-grayc">或者拨打携程客服电话</p>','<span id="telBtn" class="cui-btns-tel"><span class="cui-i cui-warning-kf"></span>联系客服</span>',"</div>","</div>","</div>","</div>"].join("")),this.addClass("head-warning-top"),this.retryDom=this.root.find(".cui-btns-retry"),this.retryDom.bind("click",$.proxy(function(){this.callback&&this.callback()},this))},a.onShow=function(){this.mask.root.css({"z-index":"1000"}),this.root.css({"z-index":"1001"});var e=this;window.scrollTo(0,0),this.root.find("#telBtn").click(function(){i.apply({hybridCallback:function(){i.callService()},callback:function(){window.location.href="tel:"+e.tel}})})},s.__propertys__=function(){this.retryDom,this.tel="4000086666",this.callback=function(){}},s.initialize=function($super,e){$super(a,e)},s.retryClick=function(e){e&&(this.callback=e)},new t.Class(n,s)}),define("cUIToast",["libs","cBase","cUILayer"],function(e,t,n){var r={},i={prefix:"cui-",sleep:2},s=null,o=null,u=null,a=function(e){this.hide(),e&&typeof e=="function"&&e.call(this),$(".cui-opacitymask").unbind("click"),$(".cui-toast").unbind("click")},f=function(e,t){var n=this,r=function(){$(".cui-opacitymask").unbind("click").bind("click",function(){a.call(n,t)}),$(".cui-toast").unbind("click").bind("click",function(){a.call(n,t)})};e&&setTimeout(r,400)},l=function(e,t,n,r){var u=this;this.setContent(e),typeof o=="function"&&o.call(this);var l=function(){a.call(u,n)},c=(t||i.sleep)*1e3;s=setTimeout(l,c),f.call(this,r,n),this.focusPosition=setInterval($.proxy(function(){var e=document.activeElement;if($.needFocus(e)){this.focusPosition||(this.focusPosition=!0);var t=parseInt($(e).offset().top)+30;this.root.css({top:t+"px",position:"absolute"})}},this),20)},c=function(){clearTimeout(s),this.focusPosition&&(clearInterval(this.focusPosition),this.root.css({top:"50%",position:"fixed"})),typeof u=="function"&&u.call(this)};r.__propertys__=function(){o=this.show,u=this.hide,this.show=l,this.hide=c},r.initialize=function($super,e){this.addClass([i.prefix+"toast"]),$super(e)},r.setContent=function(e){this.create(),this.contentDom.html(e)};var h=new t.Class(n,r);return h}),define("cAjax",["libs"],function(e){var t=function(e){function t(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",o(i)}function n(e,t,n,r){t=JSON.stringify(t);var i=a(e,t,n,r);return i.type="POST",i.dataType="json",i.timeout=3e4,i.contentType="application/json",o(i)}function r(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",i.dataType="jsonp",i.crossDomain=!0,o(i)}function i(e,t,n,r,i){t.toLowerCase()!=="get"&&(n=JSON.stringify(n));var s=a(e,n,r,i);return s.type=t,s.dataType="json",s.crossDomain=!0,s.data=n,s.contentType="application/json; charset=utf-8",o(s)}function s(t,n,r,i){var s=null,u="";typeof n=="string"?s=e("#"+n):s=e(n),s&&s.length>0&&(u=s.serialize());var f=a(t,u,r,i);return o(f)}function o(t){var n={url:t.url,type:t.type,dataType:t.dataType,data:t.data,contentType:t.contentType,timeout:t.timeout||5e4,success:function(e){t.callback(e)},error:function(e){t.error&&t.error(e)}};return t.url.indexOf(window.location.host)===-1&&(n.crossDomain=!!t.crossDomain),e.ajax(n)}function u(t){if(window.XDomainRequest){var n=new XDomainRequest;if(n){t.error&&typeof t.error=="function"&&(n.onerror=function(){t.error()}),t.timeout&&typeof t.timeout=="function"&&(n.ontimeout=function(){t.timeout()}),t.success&&typeof t.success=="function"&&(n.onload=function(){t.dataType?t.dataType.toLowerCase()=="json"&&t.callback(JSON.parse(n.responseText)):t.callback(n.responseText)});var r="";t.type=="POST"?r=t.data:r=e.param(t.data),n.open(t.type,t.url),n.send(r)}}}function a(e,t,n,r){return{url:e,data:t,callback:n,error:r}}return{get:t,post:n,jsonp:r,cros:i,form:s}}($);return t}),define("cAbstractModel",["libs","cBase","cAjax","cLog"],function(e,t,n,r){var i=new t.Class({__propertys__:function(){this.url=null,this.param=null,this.dataformat=null,this.validates=[],this.debug=!1,this.protocol="http",this.contentType=i.CONTENT_TYPE_JSON,this.method="POST",this.ajax,this.isAbort=!1,this.onBeforeCompleteCallback=null},initialize:function(e){this.assert();for(var t in e)this[t]=e[t]},assert:function(){if(this.url===null)throw"not override url property";if(this.param===null)throw"not override param property"},pushValidates:function(e){typeof e=="function"&&this.validates.push($.proxy(e,this))},setParam:function(e,t){typeof e=="object"&&!t?this.param=e:this.param[e]=t},getParam:function(){return this.param},buildurl:function(){throw"[ERROR]abstract method:buildurl, must be override"},execute:function(e,t,s,o,u){this.isAbort=!1;var a=this.buildurl(),f=this,l=$.proxy(function(n){r.serverLog(f.buildurl(),f.getParam(),n);if(this.validates&&this.validates.length>0)for(var i=0,o=this.validates.length;i<o;i++)if(!this.validates[i](n))return typeof t=="function"?t.call(s||this,n):!1;var u=typeof this.dataformat=="function"?this.dataformat(n):n;typeof this.onBeforeCompleteCallback=="function"&&this.onBeforeCompleteCallback(u),typeof e=="function"&&e.call(s||this,u,n)},this),c=$.proxy(function(e){r.serverLog(f.buildurl(),f.getParam());if(f.isAbort)return f.isAbort=!1,typeof o=="function"?o.call(s||this,e):!1;typeof t=="function"&&t.call(s||this,e)},this),u=u||_.clone(this.getParam()||{});return this.contentType===i.CONTENT_TYPE_JSON?this.ajax=n.cros(a,this.method,u,l,c):this.contentType===i.CONTENT_TYPE_JSONP?this.ajax=n.jsonp(a,u,l,c):this.ajax=n.post(a,u,l,c)},abort:function(){this.isAbort=!0,this.ajax&&this.ajax.abort&&this.ajax.abort()}});return i.getInstance=function(){return this.instance instanceof this?this.instance:this.instance=new this},i.baseurl=function(){throw"[ERROR]abstract method:baseurl, must be override"},i.CONTENT_TYPE_JSON="json",i.CONTENT_TYPE_FORM="form",i.CONTENT_TYPE_JSONP="jsonp",i}),define("cModel",["libs","cBase","cStore","cUtility","CommonStore","cAbstractModel","cStorage"],function(e,t,n,r,i,s,o){var u=r.Object,a=new t.Class(s,{__propertys__:function(){this.usehead=!0,this.head=i.HeadStore.getInstance(),this.result=null,this.headinfo=null,this.ajaxOnly=!1,this.isUserData=!1},initialize:function($super,e){$super(e),this.baseurl||(this.baseurl=a.baseurl.call(this,this.protocol))},setHead:function(e){if(!e instanceof n)throw"Set head is not a store";this.head=e},getHead:function(){return this.head},getParamStore:function(){return this.param},setParamStore:function(e){if(typeof e!="object")throw"Set param is not a store";this.param=e},getResultStore:function(){return this.result},clearResult:function(){this.result&&typeof this.result.remove=="function"&&this.result.remove()},setParam:function(e,t){var r={};typeof e=="object"&&!t?r=e:r[e]=t;for(var i in r)this.param instanceof n?this.param.setAttr(i,r[i]):u.set(this.param,i,r[i])},getParam:function(){return this.param instanceof n?this.param.get():this.param},buildurl:function(){var e=o.localStorage.get("H5_CFG"),t;e&&e.path&&(t=e.path);var n=this.baseurl,r=[];t&&!location.host.match(/^m\.ctrip\.com/i)&&(this.protocol==="http"?r=t.http&&t.http.split("/"):r=t.https&&t.https.split("/"));var i=this.protocol+"://"+(r[0]||n.domain)+"/"+(r[1]||n.path)+(typeof this.url=="function"?this.url():this.url);return i},getTag:function(){var e=_.clone(this.getParam()||{});if(this.isUserData&&!e.cid){var t=this.head.userStore;e.cid=t.getUserId()}return JSON.stringify(e)},excute:function(e,t,r,i,s){var o=_.clone(this.getParam()||{});this.pushValidates(function(e){var t=this.head.get(),n=e.head;return this.contentType!==a.CONTENT_TYPE_JSONP&&this.usehead&&n.auth&&n.auth!==t.auth&&this.head.setAuth(n.auth),n&&n.errcode===0?!0:!1});var u=this.getTag(),f=this.result&&this.result.get(u);!f||this.ajaxOnly||r?(this.method.toLowerCase()!=="get"&&this.usehead&&this.contentType!==a.CONTENT_TYPE_JSONP?o.head=this.head.get():this.method.toLowerCase()!=="get"&&!this.usehead&&this.contentType!==a.CONTENT_TYPE_JSONP&&this.headinfo&&(o.head=this.headinfo),this.onBeforeCompleteCallback=function(e){this.result instanceof n&&this.result.set(e,u)},this.execute(e,t,i,s,o)):typeof e=="function"&&e.call(i||this,f)}});return a.baseurl=function(e){var t=location.host,n="m.ctrip.com",i="restapi";return r.isInApp()?r.isPreProduction()=="1"?e=="https"?n="restful.m.ctrip.com":n="m.ctrip.com":r.isPreProduction()=="0"?(e=="https"?n="restful.waptest.ctrip.com":n="waptest.ctrip.com",i="restapi2"):e=="https"?n="restful.m.ctrip.com":n="m.ctrip.com":t.match(/^m\.ctrip\.com/i)?n="m.ctrip.com":!t.match(/^(localhost|172\.16|127\.0)/i)||location.protocol!="https"&&e!="https"?t.match(/^(localhost|172\.16|127\.0)/i)?(e=="https"?n="restful.waptest.ctrip.com":n="waptest.ctrip.com",i="restapi2"):t.match(/^10\.8\.2\.111/i)?n="10.8.2.111":!t.match(/^waptest\.ctrip|^210\.13\.100\.191/i)||location.protocol!="https"&&e!="https"?t.match(/^waptest\.ctrip|^210\.13\.100\.191/i)?(n="waptest.ctrip.com",i="restapi2"):n="m.ctrip.com":(n="restful.waptest.ctrip.com",i="restapi2"):(n="restful.waptest.ctrip.com",i="restapi2"),{domain:n,path:i}},a}),define("cSales",["cBase","cStorage","libs","CommonStore","cModel"],function(e,t,n,r,i){function x(e){var t=".__hreftel__",n=".__conttel__",r=".__appaddress__";$(e[0]).find(t).each(function(){this.href=w(this.href)}),$(e[0]).find(n).each(function(){var e=$(this);e.html(w(e.html()))}),$(r).each(function(){var e=S();if(!e)switch(!0){case g:e=$(this).attr("data-ios-app");break;case y:e=$(this).attr("data-android-app");break;case b:e=$(this).attr("data-win-app")}e&&$(this).attr("href",e)})}var s=null,o=r.SalesObjectStore.getInstance(),u=function(e){return i.baseurl(e)},a=function(n,r,i){var a=o.get(n);if(a)s=a,!a.appurl||a.appurl.length<=0?$("#dl_app").hide():$("#dl_app").show(),r&&r(a);else{var f=u(),l="http://"+(f&&f.domain)+"/html5/ClientData/GetSalesInfo/"+n;$.ajax({url:l,type:"POST",dataType:"json",success:$.proxy(function(u){var a={};if(u.ServerCode==1){if(u.Data){for(var f in u.Data)a[f.toLowerCase()]=u.Data[f];u.Data=a,o.set(u.Data,n);var l=30;u.Data&&(u.Data.sales==="ydwxcs"||u.Data.sales==="1622")&&(l=5),!u.Data.appurl||u.Data.appurl.length<=0?$("#dl_app").hide():$("#dl_app").show(),t.localStorage.oldSet("SALESOBJ",JSON.stringify({data:u.Data,timeout:(new e.Date(e.getServerDate())).addDay(l).format("Y/m/d H:i:s")}))}s=u.Data,r&&r(u.Data)}else i&&i(u)},this),error:$.proxy(function(e){i&&i(e)},this)})}},f=function(){return s},l=function(e){r.SalesStore.getInstance().set({sales:e})},c=function(e){r.SalesStore.getInstance().set({sourceid:e})},h=function(e){r.UnionStore.getInstance().set(e)},p=/400\d{3}\d{4}/i,d=/400\s+\d{3}\s+\d{4}/i,v=/400-\d{3}-\d{4}/i,m=navigator.userAgent,g=!!m.match(/(ipad|iphone)/i),y=!!m.match(/android/i),b=!!m.match(/MSIE/i),w=window.replaceStrTel=function(e){var t=f();return typeof e=="string"&&t&&t.tel&&(e=e.replace(p,t.tel),e=e.replace(d,t.teltitle),t.teltitle&&(e=e.replace(v,t.teltitle.split(" ").join("-")))),e},E=function(){var e=null;return g?e="ios-app":y?e="andreod-app":b&&(e="win-app"),e},S=function(e){var t=f();if(t){t.isseo&&$(".module").show();if(t.appurl)return t.appurl;var e=t.sid?t.sid:t.sales;return"/market/download.aspx?from="+e}return null};return{replaceContent:x,replaceStrTel:w,setSales:l,getSales:f,getSalesObject:a,setUnion:h,setSourceId:c}}),function(){var e={t:600,hasApp:!1,key:"HAS_CTRIP_APP",appProtocol:"ctrip://wireless",openApp:function(t,n,r){var i=e.getAppData(),s=Date.now();if(i&&i!="")return i.hasApp?typeof t=="function"?t()&&r&&r.length>0&&(window.location=r):r&&r.length>0&&(window.location=r):typeof n=="function"&&n(),"";(!r||r.length<=0)&&typeof n=="function"&&n();var o=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",u=o.indexOf("android",0)!=-1||o.indexOf("adr",0)!=-1?1:0,a=u&&o.indexOf("chrome",0)!=-1&&o.indexOf("nexus",0)==-1,f=$('<iframe style="display: none;"></iframe>');f.attr("src",r),$("body").append(f),a&&(r&&r.length>0&&(window.location=r),setTimeout(function(){typeof n=="function"&&n()},1)),setTimeout(function(){e.testApp(s)},e.t),e.setTestResult(t,n)},testApp:function(t){var n=Date.now();n-t<e.t+200?e.hasApp=!1:e.hasApp=!0},setTestResult:function(t,n){setTimeout(function(){e.hasApp?typeof t=="function"&&t():typeof n=="function"&&n();var r=new Date;r.setHours(r.getHours()+1);var i={value:{hasApp:e.hasApp},timeout:r.toUTCString()};window.localStorage.setItem(e.key,JSON.stringify(i)),window.hasApp=e.hasApp},e.t+1e3)},getAppData:function(){return"";var t,n}};window.AppUtility=e}();var adOptions=adOptions||{};adOptions.__propertys__=function(){},adOptions.initialize=function($super,e){this.data=e||{},this.storeKey="APP_DOWNLOAD",$super(e)},adOptions.update=function(e){this.isInFooter&&(this.remove(),this.isCreate=!1),this.rootBox=e.rootBox,this.root||(this.root=this.rootBox),this.isInFooter=!!this.rootBox.hasClass("js_in_Footer"),this.addEvent&&(this.removeEvent("onShow"),this.addEvent("onShow",this.onShow))},adOptions.createHtml=function(){var e=adOptions.getUrlParam("sourceid"),t=adOptions.getUrlParam("sales"),n=adOptions.getUrlParam("allianceid"),r=adOptions.getUrlParam("sid"),i=this.isInFooter?"":"fix_bottom",s="/market/download.aspx?from=H5",o=adOptions._get("SALES_OBJECT"),u=adOptions._get("UNION"),a=adOptions._getCookie("UNION"),f="";n&&n.length>0&&r&&r.length>0&&(f="display:none;");if(u||a)f="display:none;";if(o&&o.sid&&+o.sid>0){if(!o.appurl||o.appurl.length<=0)f="display:none;";s=o.appurl?o.appurl:"/market/download.aspx?from="+o.sid}this.checkDeviceSupport()==0&&(f="display:none;");if(f.length>0)return $("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),adOptions.saveExpire(1),"";var l=this.setAppUrl();return['<div data-appurl="'+l+'" id="dl_app" style="'+f+'" class="',i,'"> <div id="icon_text" class="txt_middle"><img src="http://res.m.ctrip.com/html5/content/images/icon_text_s6.png"/></div>',' <a href="'+s+'" id="app_link" class="txt_middle __appaddress__"><img src="http://res.m.ctrip.com/html5/content/images/icon_open_s6.png"/></a>','<div id="close_icon"></div>',"</div>"].join("")},adOptions.getUrlParam=function(e){var t=document.location.href||"",n=new RegExp("(\\?|&)"+e+"=([^&]+)(&|$)","i"),r=t.match(n);return r?r[2]:""},adOptions.setAppUrl=function(){var e=adOptions._get("SALES_OBJECT"),t=AppUtility.appProtocol,n=null,r=null,i=null,s=null,o=null,u=null,a=null,f=null,l=null,c=null,h=null,p=null,d=null,v=$("#page_id").val(),m=new RegExp("-","g"),g=new RegExp("/","g");if(v&&+v>0){if(+v==212092||+v==212093||+v==212094||+v==210090){n=+v==212092?"hotel_inquire":+v==212093||+v==210090?"hotel_inland_list":+v==212094?"InlandHotel":"",r=window.localStorage?window.localStorage.getItem("HOTELSEARCHINFO"):null;if(r){r=JSON.parse(r),+v==212092&&(r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID,u=r.data.DistrictId?+r.data.DistrictId<=0?"":r.data.DistrictId:"",a=r.data.BrandId,f=r.data.BrandName,l=0),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||""));if(+v==212093||+v==210090)r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID,u=r.data.DistrictId?+r.data.DistrictId<=0?"":r.data.DistrictId:"",a=0,f=r.data.BrandId?+r.data.BrandId<=0?"":r.data.BrandId:"",l=r.data.BrandName||"",c=0,h=1,p="",d="",+v==210090&&(h=2,p=r.data.Latitude,d=r.data.Longitude)),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||"")+"&c8="+(c||"")+"&c9="+(h||"")+"&c10="+(p||"")+"&c11="+(d||"");if(+v==212094){r.data&&(i=r.data.CheckInDate.replace(m,""),s=r.data.CheckOutDate.replace(m,""),o=r.data.CheckInCityID);var y=window.localStorage?window.localStorage.getItem("HOTELDETAIL"):null;y&&(y=JSON.parse(y),y&&y.data&&(u=y.data.HotelID)),n+="?checkInDate="+(i||"")+"&checkOutDate="+(s||"")+"&cityId="+(o||"")+"&hotelId="+(u||"")}}}if(+v==212001||+v==214008)n=+v==212001?"hotel_groupon_list":+v==214008?"hotel_groupon_detail":"",+v==212001&&(r=window.localStorage?window.localStorage.getItem("TUAN_SEARCH"):null,r=r?JSON.parse(r):null,i=r&&r.value?r.value.ctyId:"2",n+="?c1="+(i||"2")),+v==214008&&(r=window.localStorage?window.localStorage.getItem("TUAN_DETAILS"):null,r=r?JSON.parse(r):null,i=r&&r.value?r.value.id:null,n+="?c1="+(i||""));if(+v==212003||+v==212004||+v==212009||+v==214019||+v==214209){r=window.localStorage?window.localStorage.getItem("S_FLIGHT_AirTicket"):null,r=r?JSON.parse(r):null;if(r&&r.value&&r.value._items&&r.value._items.length>0){i=r.value.tripType,s=r.value._items[0].dCtyId,o=r.value._items[0].aCtyId,u=r.value._items[0].date.replace(g,""),i&&+i>1&&r.value._items.length>1&&(a=r.value._items[1].date.replace(g,""));var b=window.localStorage?window.localStorage.getItem("S_FLIGHT_SUBJOIN"):null;if(+v==214019||+v==214209)b=window.localStorage?window.localStorage.getItem("S_FLIGHT_INTLAirTicket"):null;b=b?JSON.parse(b):null,f="",l="",c="",h="",p="",d="",b&&b.value&&(+v==214019||+v==214209?(f=1,+b.value.class==0&&(l="1"),+b.value.class==1&&(l="2"),+b.value.class==2&&(l="3"),+b.value.class==3&&(l="4"),+b.value.sortRule==2&&(+b.value.sortType==2&&(c="1"),+b.value.sortType==1&&(c="2")),+b.value.sortRule==1&&(+b.value.sortType==2&&(c="3"),+b.value.sortType==1&&(c="4")),+v==214209&&(l=c=h="")):(b.value["departfilter-type"]=="1"&&(b.value["departfilter-value"]=="3"&&(f="5"),b.value["departfilter-value"]=="0"&&(f="1")),b.value["depart-sorttype"]=="price"&&(b.value["depart-orderby"]=="asc"&&(l="3"),b.value["depart-orderby"]=="desc"&&(l="4")),b.value["depart-sorttype"]=="time"&&(b.value["depart-orderby"]=="asc"&&(l="1"),b.value["depart-orderby"]=="desc"&&(l="2")),b.value["departfilter-type"]=="0"&&(h=b.value["departfilter-value"]||"",h=h.replace("-","|"),h=h.replace(":",""),h=h.replace(":","")),b.value["departfilter-type"]=="2"&&(d=b.value["departfilter-value"]||""),+v==212009&&(f=l=c=h=d="")))}+v==212003&&(n="flight_inquire");if(+v==212009||+v==212004)n=i&&+i>1?"flight_inland_tolist":"flight_inland_singlelist";if(+v==214019||+v==214209)n=i&&+i>1?"flight_int_tolist":"flight_int_singlelist";n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"")+"&c4="+(u||"")+"&c5="+(a||"")+"&c6="+(f||"")+"&c7="+(l||"")+"&c8="+(c||"")+"&c9="+(h||"")+"&c10="+(p||"")+"&c11="+(d||"")}if(+v==212071||+v==212072)n=+v==212071?"train_inquire":"train_list",r=window.localStorage?window.localStorage.getItem("TRAINSSEARCHINFO"):null,r=r?JSON.parse(r):null,r&&r.data&&(i=r.data.DepartCityId||"",s=r.data.ArriveCityId||"",o=r.data.DepartDate||"",o=o.replace(m,"")),n+="?c1="+(i||"")+"&c2="+(s||"")+"&c3="+(o||"");if(+v==214040||+v==214045||+v==214046||+v==214041||+v==214345||+v==214346||+v==214042||+v==214353||+v==214354){i=s=o=u=a=f="",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,r=r?JSON.parse(r):null,+v==214040&&(n="vacation_home");if(+v==214045){n="vacation_weekend_list";if(r&&r.value){i=r.value.dCtyId;if(r.value.qparams||r.value.qparams.length>0)for(var w in r.value.qparams){var E=r.value.qparams[w];E&&E.type&&(+E.type==3&&(s=E.val),+E.type==2&&(o=E.val),+E.type==6&&(a=E.val),+E.type==7&&(f=E.val))}}n+="?cityId="+(i||"")+"&districtId="+(s||"")+"&travelDaysId="+(o||"")+"&levelId="+(u||"")+"&isSelfProudct="+(a||"")+"&isDiscount="+(f||"")}+v==214046&&(n="vacation_nearby_detail",i=s="",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,r=r?JSON.parse(r):null,r&&r.value&&(i=r.value.dCtyId||"",s=r.value.pid||""),n+="?departCityId="+(i||"")+"&productId="+(s||"")),+v==214041&&(n="vacation_group_inquire",i=s=o=u="",r=window.localStorage?window.localStorage.getItem("VACATIONS_GROUP_SEARCH_PARAM"):null,r=r?JSON.parse(r):null,r&&r.value&&(i=r.value.dCtyId,s=r.value.destKwd),n+="?departCityId="+(i||"")+"&arriveName="+(s||"")+"&travelDaysId="+(o||"")+"&levelId="+(u||""));if(+v==214345){n="vacation_group_list",i=s=o=u=a=f=l="",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,r=r?JSON.parse(r):null;if(r&&r.value){i=r.value.dCtyId,s=r.value.destKwd;if(r.value.qparams||r.value.qparams.length>0)for(var w in r.value.qparams){var E=r.value.qparams[w];E&&E.type&&(+E.type==3&&(o=E.val),+E.type==2&&(u=E.val),+E.type==6&&(f=E.val),+E.type==7&&(l=E.val))}}n+="?departCityId="+(i||"")+"&arriveName="+(s||"")+"&districtId="+(o||"")+"&travelDaysId="+(u||"")+"&levelId="+(a||"")+"&isSelfProduct="+(f||"")+"&isDiscount="+(l||"")}+v==214346&&(n="vacation_group_detail",i=s="",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,r=r?JSON.parse(r):null,r&&r.value&&(i=r.value.dCtyId||"",s=r.value.pid||""),n+="?departCityId="+(i||"")+"&productId="+(s||""));if(+v==214042){n="vacation_cruises_inquire",r=window.localStorage?window.localStorage.getItem("VACATIONS_CRUISE_SEARCH_PARAM"):null,r=r?JSON.parse(r):null,i=s="";if(r&&r.value){i=r.value.dCtyId||"";if(r.value.qparams||r.value.qparams.length>0)for(var w in r.value.qparams){var E=r.value.qparams[w];+E.type==14&&(s=E.val)}}n+="?departCityId="+(i||"")+"&routeId="+(s||"")}if(+v==214353){n="vacation_cruises_list",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_LIST_PARAM"):null,r=r?JSON.parse(r):null,i=s=o=u=a=f=l="";if(r&&r.value){i=r.value.dCtyId;if(r.value.qparams||r.value.qparams.length>0)for(var w in r.value.qparams){var E=r.value.qparams[w];E&&(+E.type==14&&(s=E.val),+E.type==10&&(o=E.val),+E.type==11&&(u=E.val),+E.type==12&&(a=E.val),+E.type==6&&(f=E.val),+E.type==7&&(l=E.val))}}n+="?departCityId="+(i||"")+"&routeId="+(s||"")+"&companyId="+(o||"")+"&productFormId="+(u||"")+"&portDepartId="+(a||"")+"&isSelfProduct="+(f||"")+"&isDiscount="+(l||"")}+v==214354&&(n="vacation_cruises_detail",r=window.localStorage?window.localStorage.getItem("VACATIONS_PRODUCT_DETAIL_PARAM"):null,r=r?JSON.parse(r):null,i=s="",r&&r.value&&(i=r.value.dCtyId||"",s=r.value.pid||""),n+="?departCityId="+(i||"")+"&productId="+(s||""))}}t+=n?"/"+n:"";var S=this.getCurrentView();return S&&S.getAppUrl&&(t=AppUtility.appProtocol+S.getAppUrl()),t.indexOf("?")<=-1&&(t+="?v=2"),e&&e.sid&&+e.sid>0?t+="&extendSourceID="+e.sid:t+="&extendSourceID=8888",t},adOptions.onShow=function(){this.root.off("click"),this.root.find("#close_icon").on("click",$.proxy(function(){this.saveExpire(1),this.hide(),$("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")},this));var e=this;this.root.find("#app_link").off("click").on("click",function(t){t.preventDefault();var n=$(this).attr("href"),r=e.setAppUrl(),i=$("#page_id").val(),s=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",o=s.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0;return o?(window.location=r,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return e.saveExpire(),!0},function(){window.location=n},r),!1}),this.checkDeviceSupport()==0&&(this.root.attr("id")=="dl_app"&&this.root.hide(),$("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"))},adOptions.checkDeviceSupport=function(){var e=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",t=e.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0,n=e.indexOf("android",0)!=-1||e.indexOf("adr",0)!=-1?1:0;return t==0&&n==0?!1:!0},adOptions.saveExpire=function(e){var t={isExpire:1},n=new Date;e&&(t.isClose=e),n.setDate(n.getDate()+1),this.storeKey||(this.storeKey="APP_DOWNLOAD"),this._set(this.storeKey,t,n.toUTCString())},adOptions.saveAutoDown=function(e){var t={isAutoDown:1,sid:e},n=new Date;n.setDate(n.getDate()+1),this._set("APP_AUTODOWNLOAD",t,n.toUTCString())},adOptions.appDownload=function(){var e=this,t=adOptions._get("SALES_OBJECT"),n=AppUtility.appProtocol;t&&t.sid&&+t.sid>0?n+="?extendSourceID="+t.sid:n+="?extendSourceID=8888";var r=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",i=r.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0;i?(window.location=n,setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30)):AppUtility.openApp(function(){return!0},function(){var e="http://m.ctrip.com/market/download.aspx?from=H5";t&&(t.appurl&&t.appurl.length>0?e=t.appurl:t.sid&&+t.sid>0&&(e="http://m.ctrip.com/market/download.aspx?from="+t.sid)),window.location.href=e},n)},adOptions.checkForceDownload=function(e){},adOptions.checkAutoDownload=function(){var e=this,t=this.getUrlParam("sourceid"),n=this.getUrlParam("openapp"),r=this.getUrlParam("downapp");if(!t||t.length<=0||+t<=0)return;var i=0,s=0,o=0,u=0,a=navigator.userAgent?navigator.userAgent.toLocaleLowerCase():"",f=a.indexOf("mac",0)!=-1||navigator.userAgent.indexOf("ios",0)!=-1?1:0,l=a.indexOf("android",0)!=-1||a.indexOf("adr",0)!=-1?1:0;r&&(f&&(+r==2||+r==3)&&(i=1),l&&(+r==1||+r==3)&&(s=1));var c=null;n&&(f&&(+n==2||+n==3?u=1:(u=0,c=null)),l&&(+n==1||+n==3?o=1:(o=0,c=null)));if(o||u)c=adOptions.setAppUrl();var h=adOptions._get("SALES_OBJECT");f?(c&&c.length>0&&(window.location=c),adOptions.isAutoDown(t)||!i||+i!=1?(adOptions.saveExpire(0),adOptions.saveAutoDown(t)):(adOptions.saveExpire(0),adOptions.saveAutoDown(t),setTimeout(function(){window.location="itms-apps://itunes.apple.com/cn/app/id379395415?mt=8"},30))):AppUtility.openApp(function(){return adOptions.saveExpire(0),adOptions.saveAutoDown(t),!0},function(){if(adOptions.isAutoDown(t))return adOptions.saveExpire(0),adOptions.saveAutoDown(t),!0;if(navigator.connection&&navigator.connection.type!=navigator.connection.WIFI)return adOptions.saveExpire(0),adOptions.saveAutoDown(t),!0;var e="http://m.ctrip.com/market/download.aspx?from="+t;if(l){if(!s||+s!=1)return!0;e+="&App=3"}f&&(e+="&App=1"),h&&h.sid&&+h.sid>0&&+h.sid==+t&&h.appurl&&h.appurl.length>0&&(e=h.appurl),adOptions.saveExpire(0),adOptions.saveAutoDown(t),window.location.href=e},c)},adOptions.create=function(){$("body").find("iframe").remove();if(!this.isCreate&&!this.isExpire()&&this.status!==this.STATE_ONCREATE){var e=this.createHtml();e&&e.length>0?(this.root=$(e),this.rootBox.append(this.root),this.trigger("onCreate")):($("footer")&&$("footer").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85")),this.isCreate=!0}else $("footer")&&$("footer").removeClass("pb85"),$("#panel-box")&&$("#panel-box").removeClass("pb85"),$(".f_list")&&$(".f_list").removeClass("pb85"),$('div[data-role="footer"]')&&$('div[data-role="footer"]').removeClass("pb85");this.checkAutoDownload()},adOptions.isExpire=function(){var e=this._get(this.storeKey);return e&&e.isClose?!0:!1},adOptions.isAutoDown=function(e){var t=this._get("APP_AUTODOWNLOAD");return t&&t.isAutoDown?!0:!1},adOptions._getCookie=function(e){var t=null;if(e){var n=new RegExp("\\b"+e+"=([^;]*)\\b"),r=n.exec(document.cookie);t=r&&unescape(r[1])}else{var i=document.cookie.split(";"),s,o;t={};for(s=0,len=i.length;s<len;s++)o=i[s].split("="),t[o[0]]=unescape(o[2])}return t},adOptions.setCurrentView=function(e){this.curView=e},adOptions.getCurrentView=function(){return this.curView},adOptions._get=function(e){var t=window.localStorage.getItem(e);if(t){t=JSON.parse(t);if(Date.parse(t.timeout)>=new Date)return t.value||t.data}return""},adOptions._set=function(e,t,n){var r={value:t,timeout:n};window.localStorage.setItem(e,JSON.stringify(r))};if(window.location.pathname.indexOf("webapp")>-1||window.localStorage.getItem("isInApp"))define("cAdView",["cBase","cUIAbstractView","libs","cStore"],function(e,t,n,r){var i=new e.Class(t,adOptions);return i.getInstance=function(){return this.instance?this.instance:this.instance=new this},i});else{adOptions.show=function(){this.status="",this.create(),this.onShow()},adOptions.hide=function(){this.root.hide()},adOptions.trigger=function(){},adOptions.remove=function(){$("#dl_app").remove()};var config={rootBox:$("#footer")};adOptions.initialize(function(){},config);var AdView=adOptions;AdView.update(config),AdView.show()}define("cUILoading",["libs","cBase","cUILayer"],function(e,t,n){var r={},i={prefix:"cui-"},s={};return s["class"]=i.prefix+"loading",s.onCreate=function(){},s.onShow=function(){this.contentDom.html('<div class="cui-breaking-load"><div class="cui-i cui-w-loading"></div><div class="cui-i cui-m-logo"></div></div>'),this.reposition()},r.__propertys__=function(){this.contentDom,this.loadHtml=""},r.initialize=function($super){$super(s)},r.setHtml=function(e){this.loadHtml=e},new t.Class(n,r)}),define("cUIBubbleLayer",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.itemTemplate=!1,this.triggerEl=null,this.click=function(){}},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show(),this.hide()},n.showMenu=function(e){for(var t in e)this[t]=e[t];e.data&&this.init(),e.dir&&(this.el.removeClass("f-layer-before"),this.el.removeClass("f-layer-after"),e.dir=="up"?this.el.addClass("f-layer-before"):this.el.addClass("f-layer-after")),this.adjustEl(),this.show()},n.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.clsLayer&&document.removeEventListener("click",this.clsLayer,!0)}),this.addEvent("onShow",function(){this.init(),this.adjustEl(),this.setzIndexTop(),this.root.on("click",$.proxy(function(e){var t=$(e.target),n=!1;for(;;){if(t.attr("id")==this.id)break;if(t.attr("data-flag")=="c"){n=!0;break}t=t.parent()}if(!n)return;typeof this.click=="function"&&this.click.call(this,this.data[t.attr("data-index")])},this)),this.clsLayer=$.proxy(function(e){var t=$(e.target),n=!1;for(;;){if(t.attr("id")==this.id){n=!0;break}if(!t[0])break;t=t.parent()}n==0&&this.hide()},this),document.addEventListener("click",this.clsLayer,!0)})},n.adjustEl=function(){if(!this.triggerEl)return;var e=this.triggerEl.offset();this.el.css({width:"",transform:""});var t=6;this.dir=="up"?this.el.css({width:e.width-t,"-webkit-transform":"translate("+(e.left+2)+"px, "+(e.top+e.height+8)+"px) translateZ(0px)"}):this.el.css({width:e.width-t,"-webkit-transform":"translate("+(e.left+2)+"px, "+(e.top-this.el.offset().height-8)+"px) translateZ(0px)"})},n.init=function(){if(!this.data)return;this.tmpt=_.template(['<ul class="cui-f-layer '+(this.dir?this.dir=="up"?"f-layer-before":"f-layer-after":"")+'" style="position: absolute; top: 0; left: 0; ">',"<% for(var i = 0, len = data.length; i < len; i++) { %>","<% var itemData = data[i]; %>",'<li data-index="<%=i%>" data-flag="c"  >'+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+"</li>","<% } %>","</ul>"].join(""));var e=this.tmpt({data:this.data});this.root.html(e),this.el=this.root.find(".cui-f-layer")},n.createHtml=function(){return""},new e.Class(t,n)}),define("cUIView",["libs","cUIAlert","cUIWarning","cUIHeadWarning","cUIWarning404","cUIToast","cSales","cStorage","cBase","CommonStore","cUtility","cAdView","cUILoading","cUIBubbleLayer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function d(e,t,n){e&&e.originalEvent&&alert(e.originalEvent.message+" "+t+" "+n)}function k(){var e=$(T.join(","));document.activeElement.nodeName!="INPUT"||document.activeElement.type!="tel"&&document.activeElement.type!="text"?(e.css("position","fixed"),$(N).css("margin-top","48px"),C&&(clearInterval(C),C=null)):(e.css("position","static"),$(N).css("margin-top","0px"))}var v=u.localStorage;document.body&&(document.body.tabIndex=1e4);var m=new t({title:"提示信息",message:"",buttons:[{text:"知道了",click:function(){this.hide()}}]}),g=new t({title:"提示信息",message:"您的订单还未完成，是否确定要离开当前页面？",buttons:[{text:"取消",click:function(){this.hide()},type:t.STYLE_CANCEL},{text:"确定",click:function(){this.hide()},type:t.STYLE_CONFIRM}]}),y=new n({title:""}),b=new r({title:""}),w=new i,E=new h,S=new s,x=new p,T=[".fix_bottom",".fix_b","header",".order_btnbox"],N=".cont_blue , .cont_blue1",C=null;return Backbone.View.extend({ENUM_STATE_NOCREATE:0,ENUM_STATE_CREATE:1,ENUM_STATE_LOAD:2,ENUM_STATE_SHOW:3,ENUM_STATE_HIDE:4,pageid:0,scrollPos:{x:0,y:0},header:null,footer:null,cSales:o,warning:null,alert:null,onCreate:function(){},viewInitialize:function(){},initialize:function(e,t,n){this.$el.addClass("sub-viewport"),this.id=_.uniqueId("viewport"),this.$el.attr("id","id_"+this.id),this.viewname=n,this.pageid&&this.$el.attr("page-id",this.pageid),this.viewdata={},this.appliction=t,this.request=e,this.$el.attr("page-url",this.request.viewpath),this.state=this.ENUM_STATE_CREATE,this.alert=m,this.warning=y,this.headwarning=b,this.warning404=w,this.loading=E,this.toast=S,this.bubbleLayer=x,this.confirm=g,_.isArray(this.css)&&this.appendCss(this.css),c&&(this.footer=c.getInstance()),this.debug();try{this.onCreate()}catch(r){}},_initializeHeader:function(){var e=this;this.header.backUrl&&this.$el.on("click","#js_return",function(){e.back(e.header.backUrl)}),this.header.home&&this.$el.delegate("#js_home","click",function(){e.home()}),this.header.phone&&this.$el.find("#js_phone").attr("href","tel:"+this.header.phone),this.header.title&&this.$el.find("header h1").text(this.header.title),this.header.subtitle&&this.$el.find("header p").text(this.header.subtitle),this.header.rightAction&&this.$el.delegate("header div","click",this.header.rightAction)},_initializeFooter:function(){this.footer&&this.footer.hide();if(l.isInApp())return;if(this.hasAd&&!this.footer.isExpire()){var e=this.adContainer?this.$el.find("#"+this.adContainer):$("#footer"),t=this.footer.rootBox;t&&t.attr("id")!=e.attr("id")&&(this.footer.remove(),this.footer.isCreate=!1),this.footer.update({rootBox:e}),this.footer.show()}},__onLoad:function(e){document.body&&document.body.focus(),this.getServerDate(),this.disposeChannel(),this.header=this._getDefaultHeader(),this.state=this.ENUM_STATE_LOAD,this.onLoad&&this.onLoad(e)},__onShow:function(){document.body&&document.body.focus(),document.activeElement.blur,this.state=this.ENUM_STATE_SHOW,window.scrollTo(0,0);try{this.onShow&&this.onShow()}catch(e){}this._sendUbt(),this._initializeHeader(),this._initializeFooter(),this.__updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this._sendGa(),this._sendKenshoo(),this.resetViewMinHeight(),this.FixedInput||(this.$("input").on("focus",function(e){if(e.target.type=="tel"||e.target.type=="text")C||(k(),C=setInterval(function(){k()},500))}),this.FixedInput=!0)},resetViewMinHeight:function(){},__onHide:function(e){this.state=this.ENUM_STATE_HIDE,this.onHide&&this.onHide(e),this.hideHeadWarning(),this.hideWarning(),this.hideLoading(),this.hideWarning404(),this.hideToast(),this.hideConfirm(),this.hideMessage(),this.onBottomPull&&this.removeScrollListener()},showLoading:function(){this.loading.show()},hideLoading:function(){this.loading.hide()},forward:function(e,t){this.appliction.forward.apply(null,arguments)},back:function(e){this.appliction.back.apply(null,arguments)},jump:function(e,t){l.isInApp()?(e=e.replace(window.BASEURL,""),this.forward(e)):t?window.location.replace(e):window.location.href=e},home:function(){this.appliction.forward("")},setTitle:function(e){this.appliction.setTitle("携程旅行网-"+e)},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},getQuery:function(e){return this.request.query[e]||null},getPath:function(e){return this.request.path[e]||null},getRoot:function(){return this.request.root||null},showMessage:function(e,t){this.alert.setViewData({message:e,title:t}),this.alert.show()},hideMessage:function(){this.alert.hide()},showConfirm:function(e,n,r,i,s,o){typeof e=="object"&&e.message?this.confirm.setViewData(e):this.confirm.setViewData({message:e,title:n,buttons:[{text:o||"取消",click:function(){typeof i=="function"&&i(),this.hide()},type:t.STYLE_CANCEL},{text:s||"确定",click:function(){typeof r=="function"&&r(),this.hide()},type:t.STYLE_CONFIRM}]}),this.confirm.show()},hideConfirm:function(){this.confirm.hide()},showWarning:function(e,t){e&&this.warning.setTitle(e,t),this.warning.show()},hideWarning:function(){this.warning.hide()},showHeadWarning:function(e,t,n){e&&this.headwarning.setTitle(e,t,n),this.headwarning.show()},hideHeadWarning:function(){this.headwarning.hide()},showBubbleLayer:function(e){this.bubbleLayer.showMenu(e)},hideBubbleLayer:function(){this.bubbleLayer.hide()},showWarning404:function(e){e&&this.warning404.retryClick(e),this.warning404.show()},hideWarning404:function(){this.warning404.hide()},showNoHeadWarning:function(e,t){e&&this.NoHeadWarning.setContent(e,t),this.NoHeadWarning.show()},showToast:function(e,t,n,r){if(this.toast.isShow())return;r=typeof r!="undefined"?r:!0,this.toast.show(e,t,n,r)},hideToast:function(){this.toast.hide()},updateHeader:function(e){for(var t in e)this.header[t]=e[t];this._initializeHeader()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}},__updateSales:function(e){var t=location.host,n=document.referrer,r="";if(t&&n.indexOf(t)===-1){n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(r="SEO_BAIDU"),n.indexOf("google")>-1&&(r="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(r="SEO_SOSO"),n.indexOf("sogou")>-1&&(r="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(r="SEO_SO"),n.indexOf("so.360")>-1&&(r="SEO_360SO"),n.indexOf("bing.com")>-1&&(r="SEO_BING"),n.indexOf("yahoo")>-1&&(r="SEO_YAHOO"),n.indexOf("youdao")>-1&&(r="SEO_YOUDAO");if(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)r="SEO_360SO"}var i=window.localStorage.getItem("SOURCEID"),s=this.getQuery("sourceid"),a=this.getQuery("sales"),l=f.SalesStore.getInstance().get(),c=this.getQuery("sales")||r||l&&l.sales,h=this.getQuery("sourceid")||i||l&&l.sourceid;(s&&+s>0||a&&a.length>0)&&u.localStorage.oldRemove("APP_DOWNLOAD");if(c||h)c&&o.setSales(c),h&&o.setSourceId(h),o.getSalesObject(c||h,$.proxy(function(t){if(!t.appurl||t.appurl.length<=0)if(this.footer&&this.footer.rootBox){var n=this.footer.rootBox.find("#dl_app");n.length>0&&n.hide()}this.warning404.tel=t.tel?t.tel:"4000086666",o.replaceContent(e)},this));else if(t&&n.indexOf(t)===-1){n=n.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),n.indexOf("baidu")>-1&&(c="SEO_BAIDU"),n.indexOf("google")>-1&&(c="SEO_GOOGLE"),n.indexOf("soso.com")>-1&&(c="SEO_SOSO"),n.indexOf("sogou")>-1&&(c="SEO_SOGOU"),n.indexOf("m.so.com")>-1&&(c="SEO_SO"),n.indexOf("so.360")>-1&&(c="SEO_360SO"),n.indexOf("bing.com")>-1&&(c="SEO_BING"),n.indexOf("yahoo")>-1&&(c="SEO_YAHOO"),n.indexOf("youdao")>-1&&(c="SEO_YOUDAO");if(n.indexOf("jike.com")>-1||n.indexOf("babylon.com")>-1||n.indexOf("ask.com")>-1||n.indexOf("avg.com")>-1||n.indexOf("easou.com")>-1||n.indexOf("panguso.com")>-1||n.indexOf("yandex.com")>-1)r="SEO_360SO";c&&o.setSales(c),setTimeout(function(){o.replaceContent(e)},1)}},getServerDate:function(e){return l.getServerDate(e)},now:function(){return l.getServerDate()},debug:function(){var e=this.request.query.debug||v.get("DEBUG");e=="yes"?($(window).unbind("error",d),$(window).bind("error",d),v.set("DEBUG",e,(new a.Date(a.getServerDate())).addDay(1).valueOf())):e=="no"&&($(window).unbind("error",d),v.remove("DEBUG"))},_sendUbt:function(){if(window.$_bf&&window.$_bf.loaded==1){if(this.pageid==0)return;var e=this._getAurl(),t=this.request.query,n=$("#page_id"),r=$("#bf_ubt_orderid"),i=location.protocol+"//"+location.host+e,s=+this.pageid;l.isInApp()&&(s+=1e3,i="http://hybridm.ctrip.com/"+e.substr(e.indexOf("webapp"))),n.length==1&&n.val(s),r.length==1&&(t&&t.orderid?r.val(t.orderid):r.val("")),window.$_bf.asynRefresh({page_id:s,url:location.protocol+"//"+location.host+e})}else l.isInApp()||setTimeout($.proxy(this._sendUbt,this),300)},_sendGa:function(){if(typeof _gaq!="undefined"){var e=this._getAurl();_gaq.push(["_trackPageview",e])}else setTimeout($.proxy(this._sendGa,this),300)},_sendKenshoo:function(){var e=this.request.query;if(e&&e.orderid){var t="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";t+="&val="+e.val+"&orderId="+e.orderid+"&type="+e.type;var n="<img width='1' height='1' src='"+t+"'/>";$("body").append(n)}},_getAurl:function(){var e=this.request.root,t;return this.request.viewpath&&(e+="#"+this.request.viewpath),this.request.path.length>0&&(t=$.param(this.request.query),e+="!"+this.request.path.join("/")+(t.length?"?"+t:"")),e},disposeChannel:function(){var e=this.getQuery("allianceid"),t=this.getQuery("sid"),n=this.getQuery("ouid"),r;if(e&&t){r={AllianceID:e,SID:t,OUID:n},f.UnionStore.getInstance().set(r);if(this.footer&&this.footer.rootBox){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}else{var s=location.host,o=document.referrer;if(s&&o.indexOf(s)===-1){o=o.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),o.indexOf("baidu")>-1&&(e=e||"4897",t=t||"353693",n=n||""),o.indexOf("google")>-1&&(e=e||"4899",t=t||"353694",n=n||""),o.indexOf("soso.com")>-1&&(e=e||"4900",t=t||"353696",n=n||""),o.indexOf("sogou")>-1&&(e=e||"4901",t=t||"353698",n=n||""),o.indexOf("m.so.com")>-1&&(e=e||"5376",t=t||"353699",n=n||""),o.indexOf("so.360")>-1&&(e=e||"5376",t=t||"353700",n=n||""),o.indexOf("bing.com")>-1&&(e=e||"4902",t=t||"353701",n=n||""),o.indexOf("yahoo")>-1&&(e=e||"4903",t=t||"353703",n=n||""),o.indexOf("youdao")>-1&&(e=e||"4904",t=t||"353704",n=n||"");if(o.indexOf("jike.com")>-1||o.indexOf("babylon.com")>-1||o.indexOf("ask.com")>-1||o.indexOf("avg.com")>-1||o.indexOf("easou.com")>-1||o.indexOf("panguso.com")>-1||o.indexOf("yandex.com")>-1)e=e||"5376",t=t||"353700",n=n||"";if(e&&t){r={AllianceID:e,SID:t,OUID:n},f.UnionStore.getInstance().set(r);if(this.footer&&this.footer.rootBox){var i=this.footer.rootBox.find("#dl_app");i.length>0&&i.hide()}}}}},getGuid:function(){return l.getGuid()},setTitle:function(e){document.title=e},appendCss:function(e){if(!e)return;for(var t=0,n=e.length;t<n;t++)this.css[e[t]]||(this.head.append($('<link rel="stylesheet" type="text/css" href="'+e[t]+'" />')),this.css[e[t]]=!0)},addClass:function(e){this.$el.addClass(e)},removeClass:function(e){this.$el.removeClass(e)},__load:function(e){this.__onLoad(e)},__show:function(){this.viewport.find("#id_"+this.id).length||this.viewport.append(this.$el),this.$el.show(),this.__onShow()},__hide:function(e){this.$el.hide(),this.__onHide(e)}})}),define("cView",["cBase","cUIView","CommonStore","cSales","cUtility"],function(e,t,n,r,i){var s={getGuid:function(){return i.getGuid()},sendGa:function(){if(typeof _gaq!="undefined"){var e=this._getAurl();_gaq.push(["_trackPageview",e])}else setTimeout($.proxy(this.sendGa,this),300)},sendKenshoo:function(){var e=this.request.query;if(e&&e.orderid){var t="https://2113.xg4ken.com/media/redir.php?track=1&token=8515ce29-9946-4d41-9edc-2907d0a92490&promoCode=&valueCurrency=CNY&GCID=&kw=&product=";t+="&val="+e.val+"&orderId="+e.orderid+"&type="+e.type;var n="<img width='1' height='1' src='"+t+"'/>";$("body").append(n)}},disposeChannel:function(){var e=this.getQuery("allianceid"),t=this.getQuery("sid"),r=this.getQuery("ouid"),i;if(e&&t)i={AllianceID:e,SID:t,OUID:r},n.UnionStore.getInstance().set(i);else{var s=location.host,o=document.referrer;if(s&&o.indexOf(s)===-1){o=o.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),o.indexOf("baidu")>-1&&(e=e||"4897",t=t||"353693",r=r||""),o.indexOf("google")>-1&&(e=e||"4899",t=t||"353694",r=r||""),o.indexOf("soso.com")>-1&&(e=e||"4900",t=t||"353696",r=r||""),o.indexOf("sogou")>-1&&(e=e||"4901",t=t||"353698",r=r||""),o.indexOf("m.so.com")>-1&&(e=e||"5376",t=t||"353699",r=r||""),o.indexOf("so.360")>-1&&(e=e||"5376",t=t||"353700",r=r||""),o.indexOf("bing.com")>-1&&(e=e||"4902",t=t||"353701",r=r||""),o.indexOf("yahoo")>-1&&(e=e||"4903",t=t||"353703",r=r||""),o.indexOf("youdao")>-1&&(e=e||"4904",t=t||"353704",r=r||"");if(o.indexOf("jike.com")>-1||o.indexOf("babylon.com")>-1||o.indexOf("ask.com")>-1||o.indexOf("avg.com")>-1||o.indexOf("easou.com")>-1||o.indexOf("panguso.com")>-1||o.indexOf("yandex.com")>-1)e=e||"5376",t=t||"353700",r=r||"";e&&t&&(i={AllianceID:e,SID:t,OUID:r},n.UnionStore.getInstance().set(i))}}},updateSales:function(e){var t=location.host,i=document.referrer,s="";if(t&&i.indexOf(t)===-1){i=i.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),i.indexOf("baidu")>-1&&(s="SEO_BAIDU"),i.indexOf("google")>-1&&(s="SEO_GOOGLE"),i.indexOf("soso.com")>-1&&(s="SEO_SOSO"),i.indexOf("sogou")>-1&&(s="SEO_SOGOU"),i.indexOf("m.so.com")>-1&&(s="SEO_SO"),i.indexOf("so.360")>-1&&(s="SEO_360SO"),i.indexOf("bing.com")>-1&&(s="SEO_BING"),i.indexOf("yahoo")>-1&&(s="SEO_YAHOO"),i.indexOf("youdao")>-1&&(s="SEO_YOUDAO");if(i.indexOf("jike.com")>-1||i.indexOf("babylon.com")>-1||i.indexOf("ask.com")>-1||i.indexOf("avg.com")>-1||i.indexOf("easou.com")>-1||i.indexOf("panguso.com")>-1||i.indexOf("yandex.com")>-1)s="SEO_360SO"}var o=window.localStorage.getItem("SOURCEID"),u=this.getQuery("sourceid"),a=this.getQuery("sales"),f=n.SalesStore.getInstance().get(),l=this.getQuery("sales")||s||f&&f.sales,c=this.getQuery("sourceid")||o||f&&f.sourceid;(u&&+u>0||a&&a.length>0)&&cStorage.localStorage.oldRemove("APP_DOWNLOAD");if(l||c)l&&r.setSales(l),c&&r.setSourceId(c),r.getSalesObject(l||c,$.proxy(function(t){this.warning404.tel=t.tel?t.tel:"4000086666",r.replaceContent(e)},this));else if(t&&i.indexOf(t)===-1){i=i.replace("http://","").replace("https://","").split("/")[0].toLowerCase(),i.indexOf("baidu")>-1&&(l="SEO_BAIDU"),i.indexOf("google")>-1&&(l="SEO_GOOGLE"),i.indexOf("soso.com")>-1&&(l="SEO_SOSO"),i.indexOf("sogou")>-1&&(l="SEO_SOGOU"),i.indexOf("m.so.com")>-1&&(l="SEO_SO"),i.indexOf("so.360")>-1&&(l="SEO_360SO"),i.indexOf("bing.com")>-1&&(l="SEO_BING"),i.indexOf("yahoo")>-1&&(l="SEO_YAHOO"),i.indexOf("youdao")>-1&&(l="SEO_YOUDAO");if(i.indexOf("jike.com")>-1||i.indexOf("babylon.com")>-1||i.indexOf("ask.com")>-1||i.indexOf("avg.com")>-1||i.indexOf("easou.com")>-1||i.indexOf("panguso.com")>-1||i.indexOf("yandex.com")>-1)s="SEO_360SO";l&&r.setSales(l),setTimeout(function(){r.replaceContent(e)},1)}},_sendUbt:function(){if(window.$_bf&&window.$_bf.loaded==1){var e=this._getAurl(),t=this.request.query,n=$("#page_id"),r=$("#bf_ubt_orderid"),s=+this.pageid;i.isInApp()&&(s+=1e3),n.length==1&&n.val(s),r.length==1&&(t&&t.orderid?r.val(t.orderid):r.val("")),window.$_bf.asynRefresh({page_id:s,url:location.protocol+"//"+location.host+e})}else setTimeout($.proxy(this._sendUbt,this),300)},onShowFinish:function(){this._sendUbt(),this.updateSales(this.$el),this.onBottomPull&&(this._onWidnowScroll=$.proxy(this.onWidnowScroll,this),this.addScrollListener()),this.sendGa(),this.sendKenshoo()},_getDefaultHeader:function(){return{backUrl:null,home:!1,phone:null,title:null,subtitle:null,rightAction:null}}};return t.extend(s)}),define("cHistory",["cUIBase","libs"],function(e,t){var n=function(t){this.element,this.clazz=[e.config.prefix+"history"],this.maskName="maskName",this.style={},this.size=!1,this.listSize=6,this.itemClickFun=null,this.focusFun=null,this.blursFun=null,this.inputFun=null,this._id=e.getCreateId(),this._boxDom,this._borderDom,this._contDom,this._clearButton,this.clearButtonTitle="清除搜索历史",this.notHistoryButtonTitle="无搜索历史",this.historyStore=null,this.dataSource=[],this._autoLocResoure,this._bodyDom,this.rootBox,this._oneShow=!1;var n=this;this.event_focus=function(){n.Open(),typeof n.focusFun=="function"&&n.focusFun()},this.event_blur=function(){typeof n.blurFun=="function"&&n.blurFun()},this.event_input=function(){n.element.val()==""&&(n._init(),n.Open()),n.inputFun(n.element.val())},this._setOption(t),this._init()};return n.prototype={_setOption:function(e){for(var t in e)switch(t){case"element":case"maskName":case"clearButtonTitle":case"style":case"dataSource":case"historyStore":case"itmeClickFun":case"focusFun":case"blurFun":case"inputFun":case"size":case"listSize":case"rootBox":this[t]=e[t];break;case"clazz":isArray(e[t])&&(this.clazz=this.clazz.concat(e[t])),isString(e[t])&&this.clazz.push(e[t])}},_init:function(){this._contDom&&(this._contDom.find("li.item").unbind("click"),this._contDom.remove()),this._boxDom&&this._boxDom.remove(),this._CreateDom(),this._BuildEvent()},_CreateDom:function(){var t=e.createElement;this._bodyDom=this.rootBox||$("body"),this.element=$(this.element),this._boxDom=$(t("div",{id:this._id,"class":this.clazz.join(" ")})),this._boxDom.css({position:"absolute",display:"none"}),this._borderDom=$(t("div",{"class":e.config.prefix+"history-border"}));var n=[];this.element.val()==""?n=this._getHistory():n=this._getSubList(this.dataSource,this.listSize),this._contDom=$(t("ul",{"class":e.config.prefix+"history-list"}));for(var r in n)this._contDom.append('<li class="item" data_id="'+n[r].id+'">'+n[r].name+"</li>");this.element.val()==""&&(this._clearButton=$(t("li",{"class":[e.config.prefix+"clear-history clearbutton"]})),n.length>0?this._clearButton.html(this.clearButtonTitle):this._clearButton.html(this.notHistoryButtonTitle),this._contDom.append(this._clearButton)),this._borderDom.append(this._contDom),this._boxDom.append(this._borderDom),this._bodyDom.append(this._boxDom)},_Location:function(){this._boxDom.css({height:"auto",width:"auto"});var t=e.getPageSize(),n=e.getElementPos(this.element[0]),r=this.style.left?this.style.left:(this.size&&this.size.left?this.size.left+n.left:n.left)+"px",i=this.style.top?this.style.top:(this.size&&this.size.top?this.size.top+(n.top+this.element.height()):n.top+this.element.height())+"px",s=this.style.width?this.style.width:this.element.width()+"px",o=this.size&&this.size.height?t.height+this.size.height+"px":"auto";this._boxDom.css({left:r,top:i,width:s,height:o})},_AutoLocation:function(){this._Location();var e=this;this._autoLocResoure=function(){e._Location()},$(window).unbind("resize",this._autoLocResoure),$(window).bind("resize",this._autoLocResoure)},_UnAutoLocation:function(){$(window).unbind("resize",this._autoLocResoure)},_BuildEvent:function(){var e=this;this._contDom.find("li.item").unbind("click").bind("click",function(){var t=$(this);e.element.val(t.text()),e.Close();if(typeof e.itmeClickFun=="function"){var n={id:t.attr("data_id"),name:t.text()};e.itmeClickFun(n)}}),this.element.unbind("focus",this.event_focus),this.element.unbind("blur",this.event_blur),this.element.unbind("input",this.event_input),this.element.bind({focus:this.event_focus,blur:this.event_blur,input:this.event_input}),this.element.val()==""&&this._getHistory().length>0&&this._clearButton.bind("click",function(){e.historyStore.remove(),e.Close(),e._init()})},setOpen:function(){this._oneShow=!0},Open:function(){this._boxDom.css("z-index",e.getBiggerzIndex()),this._boxDom.show(),this._AutoLocation()},Close:function(){this._boxDom.hide(),this._UnAutoLocation()},setDataSource:function(e){this.dataSource=e,this.Close(),this._init(),this.Open()},addHistory:function(e){var t=this.historyStore.get()||[];e.id||(e.id=0);var n=-1;for(var r=0,i=t.length;r<i;r++)if(t[r].name==e.name){n=r;break}n>-1&&t.splice(n,1),t.unshift(e),this.historyStore.set(t),this._init()},reset:function(){this._init()},_getHistory:function(){var e=this.historyStore.get()||[];return this._getSubList(e,this.listSize)},_getSubList:function(e,t){var n=e.length;return n<=t?e:e.slice(0,t)}},n}),define("cDataSource",["libs","cBase"],function(e,t){var n=new t.Class({__propertys__:function(){this.data,this.filters=[],this.group={},this.isUpdate=!0},initialize:function(e){this.setOption(e)},setOption:function(e){e=e||{};for(var t in e)switch(t){case"data":this.setData(data)}},setData:function(e){this.data=e,this.isUpdate=!0},filter:function(e,t){if(typeof e!="function")throw"Screening function did not fill in";var n=function(t,n){return e(n,t)};return this.filters=_.filter(this.data,n),this.filters=this.filters||[],typeof t=="function"?this.filters.sort(t):this.filters},groupBy:function(e,t){return this.group=_.filter(this.data,t),this.group=_.groupBy(this.group,e),this.group}});return n}),define("cUICitylist",["libs","cBase","cUIBase"],function(e,t,n){var r=new t.Class({__propertys__:function(){this.element=null,this.groupOpenClass="cityListClick",this.selectedCityClass="citylistcrt",this.autoLocCity=null,this.selectedCity=null,this.defaultData="inland",this.itemClickFun=null,this.data=null,this.autoLoc=!!navigator.geolocation,this.listType=this.defaultData},initialize:function(e){this.setOption(e),this.assert(),this._init()},_init:function(){this.renderCityGroup(),this.data&&(this.renderData=this.data[this.defaultData]||[],this.bindClickEvent())},setOption:function(e){for(var t in e)switch(t){case"groupOpenClass":case"selectedCityClass":case"selectedCity":case"itemClickFun":case"defaultData":case"autoLoc":case"autoLocCity":case"data":this[t]=e[t];break;case"element":this[t]=$(e[t])}},assert:function(){if(!this.element&&this.element.length==0)throw"not override element property"},renderCityGroup:function(){var e=[];this.autoLocCity&&this.autoLocCity.listType==this.listType&&this.autoLocCity.name&&(e.push('<li id="'+n.config.prefix+'curCity" data-ruler="item"'),!this.selectedCity||this.autoLocCity.name==this.selectedCity.name?e.push(' class="'+this.selectedCityClass+'" '):e.push(' class="noCrt"'),e.push(' data-value="'+this.autoLocCity.name+'"'),e.push(">当前城市</li>")),e.push('<li id="hotCity" data-ruler="group" data-group="hotCity" class="'+this.groupOpenClass+'" >热门城市</li>');var t="ABCDEFGHJKLMNOPQRSTWXYZ".split("");for(var r in t)e.push('<li data-ruler="group" data-group="'+t[r]+'" id="'+t[r]+'">'+t[r]+"</li>");this.element.html(e.join(""))},groupClickHandler:function(e,t){var e=$(e),r=e.attr("data-group")||e.attr("id");if(e.children().length==0){var i=[];try{i=this.renderData[r]}catch(s){0;return}var o=[];o.push("<ul>");for(var u=0,a=i.length;u<a;u++){var f=i[u];o.push('<li class data-ruler="item" data-id="'+f.id+'"'),o.push(">"+f.name+"</li>")}o.push("</ul>"),e.append(o.join(""))}var l=e.attr("class");t?e.addClass(this.groupOpenClass):l&&$.inArray(this.groupOpenClass,l)?e.removeClass(this.groupOpenClass):(this.element.find("."+this.groupOpenClass).removeClass(this.groupOpenClass),e.addClass(this.groupOpenClass));var c=n.getElementPos(e[0]);c&&e.attr("id")!="hotCity"&&$(window).scrollTop(c.top-60),this.setSelectedCity(this.selectedCity)},bindClickEvent:function(){var e=this;this.element.delegate("li","click",function(t){var n=$(this).attr("data-ruler");if(n=="group")e.groupClickHandler(this);else if(n=="item"&&e.itemClickFun&&typeof e.itemClickFun=="function"){var r={id:$(this).attr("data-id"),name:$(this).attr("data-value")||$(this).html(),listType:e.listType};e.itemClickFun(r)}})},switchData:function(e){var t=this.data[e];t&&(this.listType=e,this.element.undelegate("li","click"),this.element.html(""),this.renderCityGroup(),this.renderData=t,this.groupClickHandler(this.element.find("#hotCity"),!0),this.setSelectedCity(this.selectedCity),this.bindClickEvent())},setSelectedCity:function(e){var t=this;if(e&&this.listType==e.listType&&e.name){var r=this.element.find("#"+n.config.prefix+"curCity");if(r.length>0)r.removeClass(this.selectedCityClass),r.addClass("noCrt");else if(t.autoLocCity&&t.autoLocCity.listType==this.listType&&t.autoLocCity.name){var i=[];i.push('<li id="'+n.config.prefix+'curCity"'),i.push('data-value="'+e.name+'" data-ruler="item">当前城市</li>'),this.element.prepend(i.join())}this.element.find("li").each(function(n){var r=$(this);r.html()==e.name||r.attr("data-value")==e.name?(r.removeClass("noCrt"),r.addClass(t.selectedCityClass)):r.removeClass(t.selectedCityClass)}),this.selectedCity=e}},setData:function(e){this.element.html(""),this.data=e,this._init()},openHotCity:function(e){var t=this.element.find("#hotCity");t.length>0&&this.groupClickHandler(t,!!e)}});return r}),define("cUIInputClear",["libs"],function(e){var t=function(){var e="placeholder"in document.createElement("input"),t=function(t,n,r,i,s){n||(n=""),i=i||{};var o=typeof t=="string"?$(t):t;o.each(function(){var t=$('<a class="clear-input '+n+'" href="javascript:;"><span></span></a>'),o=$(this);s&&(t=$('<span class="cui-focus-close '+n+'">×</span>')),i.left&&t.css({left:i.left+"px",right:"auto"}),i.top&&t.css({top:i.top+"px",bottom:"auto"}),i.right&&t.css({right:i.right+"px",left:"auto"}),i.bottom&&t.css({bottom:i.bottom+"px",top:"auto"}),o.parent().addClass("clear-input-box");if(!e)var u=o.attr("placeholder"),a=$('<span class="placeholder-title'+(n?" placeholder-"+n:"")+'">'+u+"</span>");t.hide(),o.bind({focus:function(){var e=$.trim(o.val());e!=""&&t.show()},input:function(){window.setTimeout(function(){var n=o.val();n==""?t.hide():t.show(),e||(n==""?a.show():a.hide())},10)},blur:function(){var n=$.trim(o.val());e||(n==""?a.show():a.hide()),setTimeout(function(){t.hide()},200)}}),t.bind("click",function(){o.val(""),o.keyup(),t.hide(),o.focus(),o.trigger("input"),typeof r=="function"&&r.call(this)}),o.after(t),e||(o.after(a),a.bind("click",function(){o.focus()})),o.blur()})};return t}();return t}),define("cUILoadingLayer",["libs","cBase","cUILayer"],function(e,t,n){var r={prefix:"cui-"},i={};i["class"]=r.prefix+"loading",i.onShow=function(){this.contentDom.html(['<div class="cui-grayload-text">','<div class="cui-i cui-w-loading"></div>','<div class="cui-i cui-m-logo"></div>','<div class="cui-grayload-close"></div>','<div class="cui-grayload-bfont">'+this.text+"</div>","</div>"].join("")),this.root.find(".cui-grayload-close").off("click").on("click",$.proxy(function(){this.callback&&this.callback(),this.hide()},this)),this.reposition()};var s={};return s.__propertys__=function(){this.contentDom,this.callback=function(){},this.text="发送中..."},s.initialize=function($super,e,t){this.callback=e||function(){},this.text=t||"发送中...",$super(i)},new t.Class(n,s)}),define("cUIScrollList",["cBase"],function(e){window.initTap=function(){var e=$("#forTap");return e[0]||(e=$('<div id="forTap" style="color: White; display: none; border-radius: 60px; position: absolute; z-index: 99999; width: 60px; height: 60px"></div>'),$("body").append(e)),e},window.showMaskTap=function(e,t){var n=initTap();n[0]&&n.css({top:t+"px",left:e+"px"}),n.show(),setTimeout(function(){n.hide()},350)};var t=function(e){e=e||{},this._checkEventCompatibility(),this._setBaseParam(e),this._initBaseDom(e),this._setDisItemNum(e),this._setSelectedIndex(e),this.init()};return t.prototype={constructor:t,_checkEventCompatibility:function(){var e="ontouchstart"in document.documentElement;this.start=e?"touchstart":"mousedown",this.move=e?"touchmove":"mousemove",this.end=e?"touchend":"mouseup",this.startFn,this.moveFn,this.endFn},_setBaseParam:function(e){this.setHeight=0,this.itemHeight=0,this.dragHeight=0,this.dragTop=0,this.timeGap=0,this.touchTime=0,this.moveAble=!1,this.moveState="up",this.oTop=0,this.curTop=0,this.mouseY=0,this.cooling=!1,this.animateParam=e.animateParam||[50,40,30,25,20,15,10,8,6,4,2],this.animateParam=e.animateParam||[10,8,6,5,4,3,2,1,0,0,0],this.data=e.data||[],this.dataK={},this.size=this.data.length,this._changed=e.changed||null},_initBaseDom:function(e){this.wrapper=e.wrapper||$(document),this.type=e.type||"list",this.id=e.id||"id_"+(new Date).getTime(),this.className=e.className||"cui-roller-bd",this._setScrollClass(e),this._initDom(),this.wrapper.append(this.body)},_setScrollClass:function(e){var t;this.type=="list"?t="cui-select-view":this.type=="radio"&&(t="ul-list"),t=e.scrollClass||t,this.scrollClass=t},_initDom:function(){this.body=$(['<div class="'+this.className+'" style="overflow: hidden; position: relative; " id="'+this.id+'" >',"</div>"].join("")),this.dragEl=$(['<ul class="'+this.scrollClass+'" style="position: absolute; width: 100%;">',"</ul>"].join(""))},_setDisItemNum:function(e){this.disItemNum=this.data.length,this.disItemNum=this.disItemNum>5?5:this.disItemNum,this.type=="radio"&&(this.disItemNum=5),this.disItemNum=e.disItemNum||this.disItemNum,this.type=="radio"&&(this.disItemNum=this.disItemNum%2==0?this.disItemNum+1:this.disItemNum);if(this.data.length<this.disItemNum)if(this.type=="radio"){for(var t=0,n=this.disItemNum-this.data.length;t<n;t++)this.data.push({key:"",val:"",disabled:!1});this.size=this.disItemNum}else this.disItemNum=this.data.length},_setSelectedIndex:function(e){this.selectedIndex=parseInt(this.disItemNum/2),this.type=="list"&&(this.selectedIndex=-1),this.selectedIndex=e.index!=undefined?e.index:this.selectedIndex,this.selectedIndex=this.selectedIndex>this.data.length?0:this.selectedIndex,this._checkSelected()},_checkSelected:function(e){e=e||"down";var t=!1,n=this.selectedIndex;this.data[n]&&(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==0)&&(e=="down"?(this.selectedIndex=this._checkSelectedDown(n),typeof this.selectedIndex!="number"&&(this.selectedIndex=this._checkSelectedUp(n))):(this.selectedIndex=this._checkSelectedUp(n),typeof this.selectedIndex!="number"&&(this.selectedIndex=this._checkSelectedDown(n)))),typeof this.selectedIndex!="number"&&(this.selectedIndex=n);var r=""},_checkSelectedUp:function(e){var t=!1;for(var n=e;n!=-1;n--)if(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==1){e=n,t=!0;break}return t?e:null},_checkSelectedDown:function(e){var t=!1;for(var n=e,r=this.data.length;n<r;n++)if(typeof this.data[n].disabled=="undefined"||this.data[n].disabled==1){e=n,t=!0;break}return t?e:null},init:function(){this._addItem(),this._initEventParam(),this._addEvent(),this._initScrollBar(),this.setIndex(this.selectedIndex,!0)},_addItem:function(){var e,t,n,r,i;for(var n in this.data)t=this.data[n],t.index=n,typeof t.key=="undefined"&&(t.key=t.id),typeof t.val=="undefined"&&(t.val=t.name),i=t.val||t.key,this.dataK[t.key]=t,e=$("<li>"+i+"</li>"),e.attr("data-index",n),typeof t.disabled!="undefined"&&t.disabled==0&&e.css("color","gray"),this.dragEl.append(e);this.body.append(this.dragEl)},_initEventParam:function(){if(this.data.constructor!=Array||this.data.length==0)return!1;var e=this.dragEl.offset(),t=this.dragEl.find("li").eq(0),n=t.offset();this.itemHeight=n.height,this.setHeight=this.itemHeight*this.disItemNum,this.body.css("height",this.setHeight),this.dragTop=e.top,this.dragHeight=this.itemHeight*this.size;var r=""},_addEvent:function(){var e=this;this.startFn=function(t){e._touchStart.call(e,t)},this.moveFn=function(t){e._touchMove.call(e,t)},this.endFn=function(t){e._touchEnd.call(e,t)},this.dragEl[0].addEventListener(this.start,this.startFn,!1),this.dragEl[0].addEventListener(this.move,this.moveFn,!1),this.dragEl[0].addEventListener(this.end,this.endFn,!1)},removeEvent:function(){this.dragEl[0].removeEventListener(this.start,this.startFn),this.dragEl[0].removeEventListener(this.move,this.moveFn),this.dragEl[0].removeEventListener(this.end,this.endFn)},_initScrollBar:function(){if(this.type!="list")return;this.scrollProportion=this.setHeight/this.dragHeight,this.isNeedScrollBar=!0;if(this.scrollProportion>=1)return this.isNeedScrollBar=!1,!1;this.scrollBar=$('<div style="background-color: rgba(0, 0, 0, 0.498039);border: 1px solid rgba(255, 255, 255, 0.901961); width: 5px; border-radius: 3px;  position: absolute; right: 1px;  opacity: 0.2;  "></div>'),this.body.append(this.scrollBar),this.scrollHeight=parseInt(this.scrollProportion*this.setHeight),this.scrollBar.css("height",this.scrollHeight)},_setScrollTop:function(e,t){if(this.isNeedScrollBar){e=this._getResetData(e).top,e=e<0?e+10:e;var n=e*-1;if(typeof t=="number"){var r=parseInt(n*this.scrollProportion)+"px";this.scrollBar.animate({top:r,right:"1px"},t,"linear")}else this.scrollBar.css("top",parseInt(n*this.scrollProportion)+"px");this.scrollBar.css("opacity","0.8")}},_hideScroll:function(){this.isNeedScrollBar&&this.scrollBar.animate({opacity:"0.2"})},_touchStart:function(e){e.preventDefault();var t=this;if(this.cooling)return setTimeout(function(){t.cooling=!1},50),e.preventDefault(),!1;var n=$(e.target).parent(),r;this.isMoved=!1;if(n.hasClass(this.scrollClass)){this.touchTime=e.timeStamp,r=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);var i=parseFloat(this.dragEl.css("top"))||0;this.mouseY=r.top-i,this.moveAble=!0}},_touchMove:function(e){e.preventDefault();if(!this.moveAble)return!1;var t=this.getMousePos(e.changedTouches&&e.changedTouches[0]||e);this.curTop=t.top-this.mouseY;var n=this._cheakListBound(this.curTop);n!=0&&(this.curTop=n.top),this.isMoved=!0,this.dragEl.css("top",this.curTop+"px"),this._setScrollTop(this.curTop),e.preventDefault()},_cheakListBound:function(e){var t=parseInt(this.dragHeight)-parseInt(this.setHeight),n=!1;if(this.type=="radio"){var r=parseInt(this.disItemNum/2);e>this.itemHeight*r?(e=this.itemHeight*r,n=!0):e<t*-1-this.itemHeight*r&&(e=t*-1-this.itemHeight*r,n=!0)}else e>this.itemHeight?(e=this.itemHeight,n=!0):e<t*-1-this.itemHeight&&(e=t*-1-this.itemHeight,n=!0);return n?(this.isBound=!0,{speed:1,top:e}):(this.isBound=!1,!1)},_getAnimateData:function(e){this.timeGap=e.timeStamp-this.touchTime;var t=this.oTop<=this.curTop?1:-1,n=this.curTop>0?1:-1;this.moveState=t>0?"up":"down";var r=parseFloat(this.itemHeight),i=r/2,s=Math.abs(this.curTop),o=s%r;s=(parseInt(s/r)*r+(o>i?r:0))*n;var u=parseInt(this.timeGap/10-10);u=u>0?u:0;var a=this.animateParam[u]||0,f=a*r*t;return s+=f,{top:s,speed:a}},_touchEnd:function(e){var t=this;if(this.isBound===!0&&this.isMoved===!0)return t.reset.call(t,this.curTop),!1;if(!this.moveAble)return!1;this.cooling=!0;var n=this._getAnimateData(e),r=n.top,i=n.speed,s=this._cheakListBound(r);s!=0&&(r=s.top,i=s.speed);if(this.oTop!=this.curTop&&this.curTop!=r)this.dragEl.animate({top:r+"px"},100+i*20,"linear",function(){t.reset.call(t,r)}),t._setScrollTop(r,100+i*20);else{var o=$(e.target);if(this.type=="list"){var u=this.dragEl.find("li");u.removeClass("current"),o.addClass("current")}this.selectedIndex=o.attr("data-index");if(this.type=="list"){this.onTouchEnd();if(t.start=="touchstart"){var a=e.changedTouches&&e.changedTouches[0];showMaskTap(a.pageX-30,a.pageY-30)}}this.cooling=!1}this._hideScroll(),this.moveAble=!1},_getResetData:function(e){var t=parseInt(this.type=="list"?0:this.disItemNum/2),n=e,r=!1,i=this.type=="list"?0:parseFloat(this.itemHeight)*t,s=this.type=="list"?this.setHeight:parseFloat(this.itemHeight)*(t+1),o=this.dragHeight;return e>=0&&(e>i?(n=i,r=!0):o<=i&&(n=i-this.itemHeight*(this.size-1),r=!0)),e<0&&e+this.dragHeight<=s&&(r=!0,n=(this.dragHeight-s)*-1),e==n&&(r=!1),{top:n,needReset:r}},reset:function(e){var t=this,n=this._getResetData(e).needReset,r=this._getResetData(e).top;n?t.dragEl.animate({top:r+"px"},50,"linear",function(){t._reset(r)}):t._reset(e),this._hideScroll()},_reset:function(e){this.oTop=e,this.curTop=e,this.type=="radio"&&this.onTouchEnd(),this.cooling=!1},onTouchEnd:function(e){e=e||this;var t,n,r,i,s,o=this._changed,u=parseInt(this.type=="list"?0:this.disItemNum/2);r=this.data.length,this.type=="radio"?(n=parseInt((this.curTop-this.itemHeight*u)/parseFloat(this.itemHeight)),this.selectedIndex=Math.abs(n),t=this.data[this.selectedIndex]):t=this.data[this.selectedIndex],s=!1,typeof t.disabled!="undefined"&&t.disabled==0&&(i=this.selectedIndex,this.type=="radio"&&this._checkSelected(this.moveState),i!=this.selectedIndex&&(s=!0));if(s)this.setIndex(this.selectedIndex);else{var o=this._changed;o&&typeof o=="function"&&t.disabled!=0&&o.call(e,t),this.dragEl.find("li").removeClass("current"),this.type=="radio"&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current")}},reload:function(e){this.data=e,this.dragEl.html(""),e.constructor==Array&&e.length>0&&(this.selectedIndex=parseInt(this.disItemNum/2),this.selectedIndex=this.selectedIndex>this.data.length?this.data.length-1:this.selectedIndex,this._checkSelected("down"),this._addItem(),this._initEventParam(),this.cooling=!1,this.setIndex(this.selectedIndex,!0),this.dragEl.find("li").removeClass("current"),this.type=="radio"&&this.dragEl.find("li").eq(this.selectedIndex).addClass("current"))},setKey:function(e){if(e==undefined||e==null)return!1;var t=this.dataK[e]&&this.dataK[e].index;this.setIndex(t)},setIndex:function(e,t){if(e==undefined||e<0)return!1;var n=this,r=parseInt(n.disItemNum/2);n.type=="list"&&(this.data.length==n.disItemNum?r=e:(r=e==0?0:1,this.size-e<this.disItemNum&&(r=-1*parseInt(this.size)+parseInt(this.disItemNum)+parseInt(e))));var e=parseInt(e),i;if(e<0)return!1;e>=this.data.length&&(e=this.data.length-1),this.selectedIndex=e,i=this.itemHeight*(r-e),n.oTop=i,n.curTop=i,n.cooling=!1,n.dragEl.animate({top:i+"px"},50,"linear"),this._setScrollTop(i,50);if(n.type=="list"){var s=n.dragEl.find("li");s.removeClass("current"),s.eq(e).addClass("current")}t||n.onTouchEnd()},getSelected:function(){return this.data[this.selectedIndex]},getByKey:function(e){var t=this.dataK[e]&&this.dataK[e].index;return t!=null&&t!=undefined?this.data[t]:null},getMousePos:function(e){var t,n;return t=Math.max(document.body.scrollTop,document.documentElement.scrollTop),n=Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),{top:t+e.clientY,left:n+e.clientX}}},t}),define("cUIScrollRadio",["libs","cBase","cUILayer","cUIScrollList"],function(e,t,n,r){var i={},s={prefix:"cui-"},o={};o.class=s.prefix+"warning",o.onCreate=function(){this.root.html(['<div class="cui-pop-box" >','<div class="cui-hd">','<div class="cui-text-center">',""+this.title+"</div>","</div>",'<div class="cui-bd ">','<div class="cui-roller scrollWrapper">',"</div>",'<p class="cui-roller-tips">',""+this.tips+"</p>",'<div class="cui-roller-btns">','<div class="cui-btns-cancel cui-flexbd">'+this.cancel+'</div> <div class="cui-btns-sure cui-flexbd" >',""+this.ok+"</div>","</div>","</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.tips=this.root.find(".cui-roller-tips"),this.btCancel=this.root.find(".cui-btns-cancel"),this.btOk=this.root.find(".cui-btns-sure"),this.line=$('<div class="cui-mask-gray"></div><div class="cui-lines">&nbsp;</div>'),this.wrapper=this.root.find(".scrollWrapper")},o.onShow=function(){var e=this;this.maskToHide(function(){e.hide()});if(!this.data||this.data.length==0)return!1;for(var t=0,n=this.data.length;t<n;t++){var i={wrapper:this.wrapper,data:this.data[t],type:"radio",disItemNum:this.disItemNum,changed:function(t){return function(n){var r=e.changed[t];typeof r=="function"&&r.call(e,n)}}(t)};t==0&&n==3&&(i.className="cui-roller-bd  cui-flex2");var s=new r(i);this.scroll.push(s)}for(var t=0,n=this.data.length;t<n;t++)this.scroll[t].setIndex(this.index[t]),this.scroll[t].setKey(this.key[t]);this.wrapper.append(this.line),this.btOk.on("click",function(){var t=[];for(var n=0,r=e.scroll.length;n<r;n++)t.push(e.scroll[n].getSelected());e.okClick.call(e,t),e.hide()}),this.btCancel.on("click",function(){var t=[];for(var n=0,r=e.scroll.length;n<r;n++)t.push(e.scroll[n].getSelected());e.cancelClick.call(e,t),e.hide()}),this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},o.onHide=function(){for(var e=0,t=this.scroll.length;e<t;e++)this.scroll[e].removeEvent();this.btOk.off("click"),this.btCancel.off("click"),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this))},i.__propertys__=function(){var e=this;this.changed=[],this.scroll=[],this.data=[],this.index=[],this.key=[],this.disItemNum=5,this.tips="",this.btCancel,this.btOk,this.cancel="取消",this.ok="确定",this.cancelClick=function(){e.hide()},this.okClick=function(){e.hide()}},i.initialize=function($super,e){this.setOption(function(e,t){this[e]=t}),$super($.extend(o,e))},i.setTips=function(e){this.tips.html(e)};var u=new t.Class(n,i);return u}),define("cUIScroll",["cBase"],function(e){function n(e){this.wrapper=typeof e.wrapper=="string"?$(e.wrapper):e.wrapper,this.scroller=typeof e.scroller=="string"?$(e.scroller):e.scroller;if(!e.wrapper[0]||!e.scroller[0])throw"param error";this.wrapper=this.wrapper[0],this.scroller=this.scroller[0],this.scrollerStyle=this.scroller.style,this.options={scrollbars:!0,startY:0,bounceTime:600,bounceEasing:t.ease.circular,bounce:!0,bindToWrapper:!0,resizePolling:60,startX:0,startY:0};for(var n in e)this.options[n]=e[n];this.translateZ=" translateZ(0)",this.x=0,this.y=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function r(){var e=document.createElement("div"),t=document.createElement("div");return e.style.cssText="position:absolute;z-index:9999",e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",e.style.cssText+=";overflow:hidden",t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px",t.style.width="100%",e.appendChild(t),e}function i(e,n){this.wrapper=typeof n.el=="string"?document.querySelector(n.el):n.el,this.indicator=this.wrapper.children[0],this.wrapperStyle=this.wrapper.style,this.indicatorStyle=this.indicator.style,this.scroller=e,this.sizeRatioY=1,this.maxPosY=0,this.wrapperStyle[t.style.transform]=this.scroller.translateZ,this.wrapperStyle[t.style.transitionDuration]="0ms",this.wrapperStyle.opacity="0"}var t=function(){function r(e){return n===!1?!1:n===""?e:n+e.charAt(0).toUpperCase()+e.substr(1)}var e={},t=document.createElement("div").style,n=function(){var e=["t","webkitT","MozT","msT","OT"],n,r=0,i=e.length;for(;r<i;r++){n=e[r]+"ransform";if(n in t)return e[r].substr(0,e[r].length-1)}return!1}();return e.getTime=Date.now||function(){return(new Date).getTime()},e.addEvent=function(e,t,n,r){e[0]&&(e=e[0]),e.addEventListener(t,n,!!r)},e.removeEvent=function(e,t,n,r){e[0]&&(e=e[0]),e.removeEventListener(t,n,!!r)},e.momentum=function(e,t,n,r,i){var s=e-t,o=Math.abs(s)/n,u,a,f=6e-4;return u=e+o*o/(2*f)*(s<0?-1:1),a=o/f,u<r?(u=i?r-i/2.5*(o/8):r,s=Math.abs(u-e),a=s/o):u>0&&(u=i?i/2.5*(o/8):0,s=Math.abs(e)+u,a=s/o),{destination:Math.round(u),duration:a}},$.extend(e,{hasTouch:"ontouchstart"in window}),$.extend(e.style={},{transform:r("transform"),transitionTimingFunction:r("transitionTimingFunction"),transitionDuration:r("transitionDuration"),transitionDelay:r("transitionDelay"),transformOrigin:r("transformOrigin")}),$.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2}),$.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return Math.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,n=.4;return e===0?0:e==1?1:n*Math.pow(2,-10*e)*Math.sin((e-t/4)*2*Math.PI/t)+1}}}),e}();return n.prototype={_init:function(){this._initEvents(),this.options.scrollbars&&this._initIndicator()},refresh:function(){var e=this.wrapper.offsetHeight;this.wrapperHeight=this.wrapper.clientHeight,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.endTime=0,this._execEvent("refresh"),this.resetPosition()},_initEvents:function(e){var n=e?t.removeEvent:t.addEvent,r=this.options.bindToWrapper?this.wrapper:window;n(window,"orientationchange",this),n(window,"resize",this),t.hasTouch?(n(this.wrapper,"touchstart",this),n(r,"touchmove",this),n(r,"touchcancel",this),n(r,"touchend",this)):(n(this.wrapper,"mousedown",this),n(r,"mousemove",this),n(r,"mousecancel",this),n(r,"mouseup",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},_start:function(e){if(!this.enabled||this.initiated&&t.eventType[e.type]!==this.initiated)return;var n=e.touches?e.touches[0]:e,r;this.initiated=t.eventType[e.type],this.moved=!1,this.distY=0,this._transitionTime(),this.startTime=t.getTime();if(this.isInTransition){this.isInTransition=!1,r=this.getComputedPosition();var i=Math.round(r.x),s=Math.round(r.y);s<0&&s>this.maxScrollY&&this.options.adjustXY&&(s=this.options.adjustXY.call(this,i,s).y),this._translate(i,s),this._execEvent("scrollEnd")}this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart"),e.preventDefault()},_move:function(e){if(!this.enabled||t.eventType[e.type]!==this.initiated)return;e.preventDefault();var n=e.touches?e.touches[0]:e,r=n.pageX-this.pointX,i=n.pageY-this.pointY,s=t.getTime(),o,u,a,f;this.pointX=n.pageX,this.pointY=n.pageY,this.distX+=r,this.distY+=i,a=Math.abs(this.distX),f=Math.abs(this.distY);if(s-this.endTime>300&&a<10&&f<10)return;u=this.y+i;if(u>0||u<this.maxScrollY)u=this.options.bounce?this.y+i/3:u>0?0:this.maxScrollY;this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(0,u),s-this.startTime>300&&(this.startTime=s,this.startX=this.x,this.startY=this.y)},_end:function(e){if(!this.enabled||t.eventType[e.type]!==this.initiated)return;var n=e.changedTouches?e.changedTouches[0]:e,r,i=t.getTime()-this.startTime,s=Math.round(this.x),o=Math.round(this.y),u=Math.abs(s-this.startX),a=Math.abs(o-this.startY),f=0,l="";this.isInTransition=0,this.initiated=0,this.endTime=t.getTime();if(this.resetPosition(this.options.bounceTime))return;this.scrollTo(s,o);if(!this.moved){this._execEvent("scrollCancel");return}i<300&&(r=t.momentum(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0),o=r.destination,f=Math.max(r.duration),this.isInTransition=1);if(o!=this.y){if(o>0||o<this.maxScrollY)l=t.ease.quadratic;this.scrollTo(s,o,f,l);return}this._execEvent("scrollEnd")},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},_transitionTimingFunction:function(e){this.scrollerStyle[t.style.transitionTimingFunction]=e,this.indicator&&this.indicator.transitionTimingFunction(e)},_transitionTime:function(e){e=e||0,this.scrollerStyle[t.style.transitionDuration]=e+"ms",this.indicator&&this.indicator.transitionTime(e)},getComputedPosition:function(){var e=window.getComputedStyle(this.scroller,null),n,r;return e=e[t.style.transform].split(")")[0].split(", "),n=+(e[12]||e[4]),r=+(e[13]||e[5]),{x:n,y:r}},_initIndicator:function(){var e=r();this.wrapper.appendChild(e),this.indicator=new i(this,{el:e}),this.on("scrollEnd",function(){this.indicator.fade()});var t=this;this.on("scrollCancel",function(){t.indicator.fade()}),this.on("scrollStart",function(){t.indicator.fade(1)}),this.on("beforeScrollStart",function(){t.indicator.fade(1,!0)}),this.on("refresh",function(){t.indicator.refresh()})},_translate:function(e,n){this.scrollerStyle[t.style.transform]="translate("+e+"px,"+n+"px)"+this.translateZ,this.x=e,this.y=n,this.options.scrollbars&&this.indicator.updatePosition()},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),n==this.y?!1:(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},scrollTo:function(e,n,r,i){this.options.adjustXY&&(n=this.options.adjustXY.call(this,e,n).y),this.options.checkSelected&&(n=this.options.checkSelected.call(this,e,n).y),i=i||t.ease.circular,this.isInTransition=r>0;if(!r||i.style)this._transitionTimingFunction(i.style),this._transitionTime(r),this._translate(e,n)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},_execEvent:function(e){if(!this._events[e])return;var t=0,n=this._events[e].length;if(!n)return;for(;t<n;t++)this._events[e][t].call(this)},destroy:function(){this._initEvents(!0),this._execEvent("destroy"),this.indicator&&this.indicator.destroy(),0},_transitionEnd:function(e){if(e.target!=this.scroller||!this.isInTransition)return;this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd"))},handleEvent:function(e){switch(e.type){case"touchstart":case"mousedown":this._start(e);break;case"touchmove":case"mousemove":this._move(e);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e)}}},i.prototype={transitionTime:function(e){e=e||0,this.indicatorStyle[t.style.transitionDuration]=e+"ms"},transitionTimingFunction:function(e){this.indicatorStyle[t.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime();var e=this.wrapper.offsetHeight;this.wrapperHeight=this.wrapper.clientHeight,this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px",this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY,this.updatePosition()},destroy:function(){this.wrapper.remove()},updatePosition:function(){var e=Math.round(this.sizeRatioY*this.scroller.y)||0;this.y=e,this.indicatorStyle[t.style.transform]="translate(0px,"+e+"px)"+this.scroller.translateZ},fade:function(e,n){if(n&&!this.visible)return;clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var r=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[t.style.transitionDuration]=r+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),i)}},n.utils=t,n}),define("cUIScrollRadioList",["cBase","cUILayer","cUIScroll"],function(e,t,n){var r={},i={prefix:"cui-"},s={};s.class=i.prefix+"warning",s.onCreate=function(){this.root.html(['<div class="cui-pop-box" lazyTap="true">','<div class="cui-hd"><div class="cui-text-center">'+this.title+"</div></div>",'<div class="cui-bd cui-roller-bd" style="overflow: hidden; position: relative; ">',"</div>","</div>"].join("")),this.title=this.root.find(".cui-text-center"),this.content=this.root.find(".cui-bd")},s.onShow=function(){var e=this;this.maskToHide(function(){e.hide()});var t=$('<ul class="cui-select-view " style="position: absolute; width: 100%; "></ul>');this.dataK={};for(var r in this.data){_data=this.data[r],_data.index=r,typeof _data.key=="undefined"&&(_data.key=_data.id),typeof _data.val=="undefined"&&(_data.val=_data.name);var i=_data.val||_data.key,s=$("<li>"+i+"</li>");s.attr("data-index",r),typeof _data.disabled!="undefined"&&_data.disabled==0&&s.css("color","gray"),r==this.index&&s.addClass("current"),this.dataK[_data.key]=_data,t.append(s)}this.content.append(t);var o=this.data.length;this.disItemNum>o&&(this.disItemNum=o);var u=t.height()/o,a=u*this.disItemNum;this.content.css("height",a),this.scroll=new n({wrapper:this.content,scroller:t});var f=0,l=this.index;this.key&&(l=this.dataK[this.key].index),o-l<this.disItemNum&&(l=o-this.disItemNum);var c=u*l*-1;this.scroll.scrollTo(0,c);var e=this;t.on("click",$.proxy(function(t){var n=$(t.target);if(n&&n.attr("data-index")!="undefined"){var r=this.data[n.attr("data-index")];this.itemClick.call(e,r),this.hide()}},this)),this.scroller=t,this.setzIndexTop(),this.root.bind("touchmove",function(e){e.preventDefault()}),this.onHashChange=function(){this.hide()},$(window).on("hashchange",$.proxy(this.onHashChange,this))},s.onHide=function(){this.scroll.destroy(),this.root.unbind("touchmove"),this.root.remove(),$(window).off("hashchange",$.proxy(this.onHashChange,this)),this.scroller&&this.scroller.off("click")},r.__propertys__=function(){this.title,this.content,this.itemClick=function(){},this.scroll=null,this.data=[],this.index=-1,this.key=null,this.disItemNum=5},r.initialize=function($super,e){this.setOption(function(e,t){this[e]=t}),$super($.extend(s,e))};var o=new e.Class(t,r);return o}),define("cUIEventListener",["libs","cBase"],function(e,t){var n={};return n.__propertys__=function(){this.__events__={}},n.initialize=function(e){},n.addEvent=function(e,t){if(!e||!t)throw"addEvent Parameter is not complete!";var n=this.__events__[e]||[];n.push(t),this.__events__[e]=n},n.removeEvent=function(e,t){if(!e)throw"removeEvent parameters must be at least specify the type!";var n=this.__events__[e],r;if(!n)return;if(t)for(var i=Math.max(n.length-1,0);i>=0;i--)n[i]===t&&n.splice(i,1);else delete n[e]},n.trigger=function(e,t,n){var r=this.__events__[e];if(r)for(var i=0,s=r.length;i<s;i++)typeof r[i]=="function"&&r[i].apply(n||this,t)},new t.Class(n)}),define("cUISwitch",["cBase","cUIAbstractView"],function(e,t){var n={},r={prefix:"cui-"};return n.__propertys__=function(){this.mouseData={sX:0,eX:0,sY:0,eY:0}},n.initialize=function($super,e){this.bindEvent(),this.allowsConfig.changed=!0,$super(e),this.show(),e.checked?this.checked():this.unChecked()},n.bindEvent=function(){this.addEvent("onShow",function(){var e=this;this.el=this.root.find(".cui-switch"),this.switchBar=this.el.find(".cui-switch-bg"),$.flip(this.root,"left",$.proxy(function(){this.unChecked()},this)),$.flip(this.root,"right",$.proxy(function(){this.checked()},this)),$.flip(this.root,"tap",$.proxy(function(){this.el.hasClass("current")?this.unChecked():this.checked();return},this))}),this.addEvent("onHide",function(){var e=this;$.flipDestroy(this.el),this.root.remove()})},n.createHtml=function(){return['<div class="cui-switch">','<div class="cui-switch-bg"></div>','<div class="cui-switch-scroll"></div>',"</div>"].join("")},n._getLRDir=function(){if(this.mouseData.eX-this.mouseData.sX>0)return"right";if(this.mouseData.eX-this.mouseData.sX<0)return"left"},n.unChecked=function(){this.el.removeClass("current"),this.switchBar.removeClass("current"),this._triggerChanged()},n.checked=function(){this.el.addClass("current"),this.switchBar.addClass("current"),this._triggerChanged()},n._triggerChanged=function(){typeof this.changed=="function"&&this.changed.call(this)},n.getStatus=function(){return this.el.hasClass("current")},new e.Class(t,n)}),define("cUINum",["cBase","cUIAbstractView"],function(e,t){var n={},r={prefix:"cui-"};return n.__propertys__=function(){this.min=1,this.max=9,this.curNum=1,this.needText=!0,this.addClass="num-add",this.minusClass="num-minus",this.curClass="num-value-txt",this.invalid="num-invalid",this.minAble=!0,this.maxAble=!0,this.unit="",this.minDom=null,this.maxDom=null,this.curDom=null,this.hasBindEvent=!1,this.changed=function(){},this.changeAble=function(){}},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show()},n.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.curDom.off("focus"),this.curDom.off("blur"),this.root.remove()}),this.addEvent("onShow",function(){var e=this;this.maxDom=this.root.find("."+this.addClass),this.minDom=this.root.find("."+this.minusClass),this.curDom=this.root.find("."+this.curClass),this.resetNum(),this.needText==0&&this.curDom.attr("disabled","disabled"),this.hasBindEvent==0&&(this.root.on("click",$.proxy(function(e){var t=$(e.target);if(t.hasClass(this.curClass))return;t.hasClass(this.addClass)&&this.maxAble&&this.setVal(this.curNum+1),t.hasClass(this.minusClass)&&this.minAble&&this.setVal(this.curNum-1),e.preventDefault()},this)),this.needText&&(this.curDom.on("focus",$.proxy(function(e){this.curDom.val("")},this)),this.curDom.on("blur",$.proxy(function(){this.setVal(this.curDom.val())},this))),this.hasBindEvent=!0)})},n.resetNum=function(e){this.curDom.attr("data-key",this.curNum),this.curDom.val(this.getText()),typeof this.changed=="function"&&!e&&this.changed.call(this,this.curNum),this.testValid()},n.getVal=function(){return this.curNum},n.setVal=function(e){if(typeof this.changeAble=="function"&&this.changeAble.call(this,e)==0)return this.resetNum(!0),!1;var t=!0;e==parseInt(e)&&(t=this.curNum==e,e=parseInt(e),this.curNum=e,e<this.min&&(this.curNum=this.min),e>this.max&&(this.curNum=this.max)),this.resetNum(t)},n.testValid=function(){this.curNum==this.min?(this.deactiveItem(this.minDom),this.minAble=!1):this.minAble==0&&(this.acticeItem(this.minDom),this.minAble=!0),this.curNum==this.max?(this.deactiveItem(this.maxDom),this.maxAble=!1):this.maxAble==0&&(this.acticeItem(this.maxDom),this.maxAble=!0)},n.deactiveItem=function(e){e&&e.addClass(this.invalid)},n.acticeItem=function(e){e&&e.removeClass(this.invalid)},n.getText=function(){return this.curNum+this.unit},n.createHtml=function(){return['<span class="cui-number-ma">','<i class="'+this.minusClass+'"></i>','<input type="tel"  class="'+this.curClass+'" >','<i class="'+this.addClass+'"></i>',"</span>"].join("")},new e.Class(t,n)}),define("cUIGroupList",["cBase","cUIAbstractView"],function(e,t){var n={};return n.__propertys__=function(){this.data=[],this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.selectedKey=null,this.el=null,this.filter="",this.click=function(){},this.OnClick=function(){},this.isCreated=!1,this.itemTemplate=!1},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.paramFormat(),this.bindEvent(),this.show()},n.paramFormat=function(){var e=this.filter&&this.filter.split(",");typeof e!="object"&&(e={}),this.filter=e},n.bindEvent=function(){this.addEvent("onShow",function(){if(this.isCreated)return;this.isCreated=!0;var e=this;this.init(),this.root.on("click",$.proxy(function(e){var t=$(e.target),n=!1;for(;;){if(t.attr("id")==this.id)break;if(t.attr("data-flag")=="c"){n=!0;break}t=t.parent()}if(n){this.setSelected(t.attr("data-key"));return}if(this.needFold==0)return;if(!t.hasClass("cui-city-t"))return;var r=t.parent();r.hasClass("cui-arrow-close")?(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),r.attr("class","cui-arrow-open")):(this.unFoldOne&&this.root.find(".cui-city-itmes > li").attr("class","cui-arrow-close"),r.attr("class","cui-arrow-close"))},this))})},n.destroy=function(){this.root.off("click"),this.root.remove()},n.init=function(){this.foldAll==1&&(this.needFold=!0),this.tmpt=_.template(['<ul class="cui-city-itmes">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-groupindex="<%=i%>" data-key="<%=data[i].id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data[i].unFold == "undefined") || data[i].unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data[i].name %></span>',"<%var item = data[i].data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>","<% var itemData = item[j]; %>",'<% var _f = ""; for(var k in filter) { _f += (itemData[filter[k]] ? itemData[filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=itemData.id%>" '+(typeof this.groupFlag!="undefined"?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=itemData.id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(itemData.id == selectedKey){%> class="current" <%}%> > '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<%} %>","</ul>","</li>","<%} %>","</ul>"].join(""));var e=this.tmpt({data:this.data,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter});this.root.html(e)},n.updateItem=function(e,t,n){},n.updateGroup=function(e,t){var n=this.data[e];if(!n)return;this.data[e]=t;var r=this.root.find('li[data-groupindex="'+e+'"]');this.tmpt=_.template(['<li data-groupindex="<%=i%>" data-key="<%=data.id %>"  '+(this.needFold?'<%if(foldAll && ((typeof data.unFold == "undefined") || data.unFold != true)) {%> class="cui-arrow-close" <%} else {%> class="cui-arrow-open" <%}%>':"")+">",'<span class="cui-city-t" ><%=data.name %></span>',"<%var item = data.data; %>",'<ul class="cui-city-n">',"<%for(var j = 0, len1 = item.length; j < len1; j++) { %>",'<% var _f = ""; for(var k in filter) { _f += (item[j][filter[k]] ? item[j][filter[k]] : "").toLowerCase() + " ";  } %>','<li data-skey="item_<%=item[j].id%>" '+(typeof this.groupFlag!="undefined"?'data-groupflag="'+this.groupFlag+'"':"")+' data-filter="<%=_f%>" data-key="<%=item[j].id%>" data-index="<%=i%>,<%=j%>" data-flag="c" <%if(item[j].id == selectedKey){%> class="current" <%}%> ><%=item[j].name %></li>',"<%} %>","</ul>","</li>"].join(""));var i=this.tmpt({data:t,foldAll:this.foldAll,selectedKey:this.selectedKey,filter:this.filter,i:e}),s=$(i);r.before(s),r.remove()},n.reload=function(e){e&&(this.data=e),this.root.html(""),this.init()},n.setSelected=function(e,t){this.selectedKey=e;var n=this.getSelected();this.root.find(".cui-city-n li").removeClass("current"),this.el.addClass("current"),typeof this.onClick=="function"&&this.onClick.call(this,n),typeof this.click=="function"&&!t&&this.click.call(this,n)},n.getSelected=function(){this.el=this.root.find('li[data-skey="item_'+(this.selectedKey||"")+'"]');if(typeof this.el.attr("data-index")!="string")return null;var e=this.el.attr("data-index").split(",");return e.length!=2?null:this.data[parseInt(e[0])].data[parseInt(e[1])]},n.createHtml=function(){return""},new e.Class(t,n)}),define("cUIBusinessGroupList",["cBase","cUIAbstractView","cUIGroupList"],function(e,t,n){var r={};return r.__propertys__=function(){this.needTab=!0,this.groupIndex=0,this.groupObj=[],this.isCreated=!1,this.selectedKey=null,this.CLICK_RES=null,this.filter="",this.needFold=!1,this.foldAll=!1,this.unFoldOne=!1,this.showFnBtn=!1,this.fnBtnTxt="清除历史记录",this.fnBtnCallback=function(){},this.itemTemplate=!1,this.isAjax=!1,this.ajaxCallBack=function(){},this.lastKeyword="",this.ajaxData=[]},r.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.isAjax&&(this.needFold=!1,this.foldAll=!1,this.filter="",this.needTab=!1),this.bindEvent(),this.show()},r.bindEvent=function(){this.addEvent("onHide",function(){this.destroyItemInstance(),this.unBindTabEvent(),this.unBindSeachEvent(),this.unBindSeachItemEvent(),this.unBindCancelEvent(),this.unBindFnBtn(),this.root.remove()}),this.addEvent("onShow",function(){if(this.isCreated)return;this.isCreated=!0;var e=this;this.init(),this.bindTabEvent(),this.bindSeachEvent(),this.bindSeachItemEvent(),this.bindCancelEvent(),this.bindFnBtn()})},r.bindFnBtn=function(){if(!this.showFnBtn)return;this.root.find(".cui-btn-history").on("click",$.proxy(function(){this.fnBtnCallback.call(this)},this))},r.unBindFnBtn=function(){if(!this.showFnBtn)return;this.root.find(".cui-btn-history").off("click")},r.destroyItemInstance=function(){for(var e=0,t=this.groupObj.length;e<t;e++)this.groupObj[e].instance.destroy()},r.unBindTabEvent=function(){var e=this.tabWrapper.find("li");e.off("click")},r.bindTabEvent=function(){var e=this.tabWrapper.find("li");e.on("click",$.proxy(function(t){var n=$(t.target);e.removeClass("cui-tab-current"),n.addClass("cui-tab-current");var r=n.attr("data-index");this.groupObj[this.groupIndex].instance.hide(),this.groupObj[this.groupIndex].instance.selectedKey&&(this.selectedKey=this.groupObj[this.groupIndex].instance.selectedKey),this.selectedKey&&this.groupObj[r].instance.setSelected(this.selectedKey,!0),this.groupObj[r].instance.show(),this.groupIndex=r},this))},r.getSelected=function(){return this.selectedKey},r.unBindSeachEvent=function(){this.searchBox.off("focus")},r.bindSeachEvent=function(){this.searchBox.on("focus",$.proxy(function(){this.openSeach()},this))},r.unBindSeachItemEvent=function(){this.seachList.off("click")},r.bindSeachItemEvent=function(){this.seachList.on("click",$.proxy(function(e){var t=$(e.target),n=!1;for(;;){if(t.hasClass("seach-list"))break;if(t.attr("data-flag")=="c"){n=!0;break}t=t.parent()}if(this.isAjax){typeof this.click=="function"&&(this.click.call(this,this.ajaxData[t.attr("data-index")]),this.closeSeach());return}this.groupIndex=t.attr("data-groupflag"),this.selectedKey=t.attr("data-key"),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey),this.closeSeach()},this))},r.unBindCancelEvent=function(){this.cancel.off("click")},r.bindCancelEvent=function(){this.cancel.on("click",$.proxy(function(){this.closeSeach()},this))},r.openSeach=function(){this.CLICK_RES||(this.CLICK_RES=setInterval($.proxy(function(){(document.activeElement.nodeName!="INPUT"||document.activeElement.type!="text")&&this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null);var e=this.searchBox.val().toLowerCase();if(e==""){setTimeout($.proxy(function(){(document.activeElement.nodeName!="INPUT"||document.activeElement.type!="text")&&this.closeSeach()},this),500);return}if(this.lastKeyword==e)return!0;this.lastKeyword=e,this.wrapper.addClass("cui-input-focus"),this.root.find(".cui-btn-history").hide(),this.listWrapper.hide(),this.tabWrapper.hide(),this.seachList.show(),this.seachList.html(""),this.noData.hide();if(this.isAjax){this.ajaxCallBack.call(this,e),this.LOADINGSRC=setTimeout($.proxy(function(){this.loading.show()},this),200);return}var t=this.listWrapper.find('li[data-filter*="'+e+'"]'),n=[];for(var r=0,i=t.length;r<i;r++){var s=!1;for(var o in n)if($(n[o]).attr("data-key")==$(t[r]).attr("data-key")){s=!0;break}s==0&&n.push(t[r])}if(n.length==0){this.noData.show();return}this.seachList.append($(n).clone(!0))},this),500))},r.ajaxDataHandle=function(e){this.ajaxData=e;var t=["<% for(var i = 0, len = data.length; i < len; i++ ){ %>","<% itemData = data[i]; %>",'<li data-key="<%=itemData.id%>" data-index="<%=i%>" data-flag="c" '+(this.itemTemplate?this.itemTemplate:"<%=itemData.name %>")+" </li>","<% } %>"].join(""),n=_.template(t)({data:e});this.LOADINGSRC&&clearTimeout(this.LOADINGSRC),this.loading.hide(),this.seachList.html(n)},r.closeSeach=function(){this.CLICK_RES&&(clearInterval(this.CLICK_RES),this.CLICK_RES=null),this.wrapper.removeClass("cui-input-focus"),this.noData.hide(),this.searchBox.val(""),this.needTab&&this.tabWrapper.show(),this.seachList.hide(),this.listWrapper.show(),this.lastKeyword="",this.root.find(".cui-btn-history").show()},r.init=function(){this.tabWrapper=this.root.find(".cui-tab-mod"),this.tabBar=this.tabWrapper.find(".cui-tab-scrollbar"),this.noData=this.root.find(".cui-city-novalue"),this.wrapper=this.root.find(".cui-citys-hd"),this.listWrapper=this.root.find(".cui-citys-bd"),this.searchBox=this.root.find(".cui-input-box"),this.seachList=this.root.find(".seach-list"),this.cancel=this.root.find(".cui-btn-cancle"),this.loading=this.root.find(".cui-pro-load"),this.initTab(),this.initGroupList(),this.bindEvent()},r.initTab=function(){for(var e=0,t=this.groupObj.length;e<t;e++){var n='<li data-index="'+e+'" '+(e==this.groupIndex?'class="cui-tab-current"':"")+" >"+this.groupObj[e].name+"</li>";this.tabBar.before(n)}},r.initGroupList=function(){var e=this;for(var t=0,r=this.groupObj.length;t<r;t++){var i=this.groupObj[t].data;this.groupObj[t].instance=new n({rootBox:this.listWrapper,data:i,filter:this.filter,click:this.click,foldAll:this.foldAll,needFold:this.needFold,itemTemplate:this.itemTemplate,unFoldOne:this.unFoldOne,groupFlag:t,onClick:function(){e.selectedKey=this.selectedKey}}),this.groupObj[t].instance.hide()}this.groupObj[this.groupIndex].instance.show(),this.groupObj[this.groupIndex].instance.setSelected(this.selectedKey,!0)},r.reload=function(e){e&&(this.groupObj=e),this.destroyItemInstance(),this.listWrapper.empty(),this.initGroupList()},r.updateTab=function(e,t){},r.updateTabGroup=function(e,t,n){},r.updateAllTabGroup=function(e,t){for(var n=0,r=this.groupObj.length;n<r;n++)this.groupObj[n].instance.updateGroup(e,t)},r.updateTabGroupItem=function(e,t,n,r){},r.createHtml=function(){return['<section class="cui-citys-hd ">','<div class="cui-input-bd">','<input type="text" class="cui-input-box" placeholder="中文/拼音/首字母">','<span class="cui-pro-load" style="display: none;">','<span class="cui-pro-radius"></span>','<span class="cui-i cui-pro-logo"></span>',"</span>","</div>",'<button type="button" class="cui-btn-cancle">',"取消</button>","</section>",'<p class="cui-city-novalue" style="display: none;">没有结果</p>','<ul class="cui-tab-mod" '+(this.needTab?"":'style="display: none"')+" >",'<i class="cui-tab-scrollbar cui-tabnum'+this.groupObj.length+'"></i>',"</ul>",'<ul class="cui-city-associate seach-list"></ul>','<section  class="cui-citys-bd">',"</section>",this.showFnBtn?'<button type="button" class="cui-btn-history" >'+this.fnBtnTxt+"</button>":""].join("")},new e.Class(t,r)}),define("cUITab",["cBase","cUIAbstractView"],function(e,t){var n={},r={prefix:"cui-"};return n.__propertys__=function(){this.selectedKey=null,this.data=[],this.changed=function(){},this.changeAble=function(){},this.curEl=null},n.initialize=function($super,e){for(var t in e)this[t]=e[t];$super(e),this.bindEvent(),this.show()},n.bindEvent=function(){this.addEvent("onShow",function(){this.init(),this.root.on("click",$.proxy(function(e){var t=$(e.target);if(t[0].tagName.toLowerCase()!="li")return;this.setVal(t.attr("data-key"))},this))}),this.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},n.getVal=function(){return this.selectedKey},n.setVal=function(e){this.curEl=this.root.find('li[data-key="'+e+'"]');var t=this.curEl.attr("data-index"),n=this.data[t];if(typeof this.changeAble=="function"&&this.changeAble.call(this,n)==0)return!1;if(!n){0;return}var r=this.selectedKey==e;this.selectedKey=e,this.tabs.removeClass("cui-tab-current"),this.curEl&&this.curEl.addClass("cui-tab-current"),r==0&&typeof this.changed=="function"&&this.changed.call(this,n)},n.setIndex=function(e){if(e<0||e>this.data.length-1)return;this.setVal(this.data[e].id)},n.getIndex=function(){for(var e=0,t=this.data.length;e<t;e++)if(this.getVal()==this.data[e].id)return e;return-1},n.init=function(){this.tmpt=_.template(['<ul class="cui-tab-mod">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-key="<%=data[i].id %>" data-index="<%=i%>" <% if(data[i].id == selectedKey) { %>class="cui-tab-current"<%} %> ><%=data[i].name %></li>',"<%} %>",'<i class="cui-tab-scrollbar cui-tabnum<%=len %>"></i>',"</ul>"].join(""));var e=this.tmpt({data:this.data,selectedKey:this.selectedKey});this.root.html(e),this.tabs=this.root.find("li"),this.curEl=this.root.find(".cui-tab-current")},n.createHtml=function(){return""},new e.Class(t,n)}),define("cUIImageSlider",["cBase","cUIBase","libs"],function(e,t){return new e.Class({__propertys__:function(){this.ENUM={DIR:{LEFT:"LEFT",RIGHT:"RIGHT"}},this.images=[],this.autoPlay=!0,this.index=0,this.delay=3e3,this.dir=this.ENUM.DIR.LEFT,this.errorImage="",this.lodingImage="",this.onChange,this.onImageClick,this.container,this.onChanged,this.scope,this.showNav=!0,this.autoHeight=!1,this.defaultImageUrl,this.defaultHeight,this.imageSize,this.loop=!1,this.errorImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",this.loadImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",this._loadingNode,this._errorNode,this._isloadingImage=!1,this._pfix="slider",this._changing=!1,this._containerNode,this._rootNode,this._imageNode,this._navNode,this._imageLoaderNode,this._handerStartPos={x:0,y:0},this._moveValue=50,this._imageCount=0,this._played=!1,this._size={height:0,width:0},this._lastSize={height:0,width:0},this._displayImage,this._nextImage,this._loadingImage=new Image,this._changeCompletedEvents=[],this._autoPlayTimeout,this._loadMsg="加载中...",this.firstLoad=!0,this._defaultSize={width:0,height:0},this._loadingImage=new Image,this._errorImage=new Image},initialize:function(e){for(var t in e)switch(t){case"images":case"autoPlay":case"delay":case"dir":case"index":case"onChange":case"autoPlay":case"onImageClick":case"scope":case"onChanged":case"errorImageUrl":case"loadImageUrl":case"loop":case"showNav":case"defaultImageUrl":case"defaultHeight":case"imageSize":this[t]=e[t];break;case"container":this._containerNode=typeof e[t]=="string"?$(e[t]):e[t],this[t]=e[t]}this._validArgs(),this._correctArgs(),this._imageCount=this.images.length,this._loadingImage.src=this.loadImageUrl,this._errorImage.src=this.errorImageUrl,this.imageSize&&this.imageSize.width&&this.imageSize.height?this.autoHeight=!1:this.autoHeight=!0},play:function(){this._played||(this._played=!0,this._injectHTML(),this._bindEvents()),this.rePlay()},stop:function(){this._clearAutoPlay()},rePlay:function(){this.autoPlay&&this._autoPlay()},_autoPlay:function(){this._autoPlayTimeout=setTimeout($.proxy(function(){this._isloadingImage||this._play()},this),this.delay)},next:function(){this._changing||this._play()},pre:function(){if(this._changing)return;if(this.dir===this.ENUM.DIR.RIGHT)if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;else if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this.goto(this.index)},"goto":function(e){this.index=e,this._changeImage()},_play:function(){this.dir===this.ENUM.DIR.RIGHT?this._imageToRight():this._imageToLeft()},_clearAutoPlay:function(){clearTimeout(this._autoPlayTimeout)},_validArgs:function(){if(!this.container||!this._containerNode)throw"[c.widget.imageSlider]:no container!"},_correctArgs:function(){this.delay<=500&&(this.delay=2e3)},_createHTML:function(){return['<div class="cui-sliderContainer" style="width:100%;position:relative;">','<div class="cui-imageContainer" style="width:100%;">',"</div>",'<div class="cui-navContainer" style="color:#1491c5;position:absolute;"></div>','<div class="cui-imageLoader">',"</div>"].join("")},_createNav:function(){var e=[];for(var t=0;t<this._imageCount;t++){var n=t==this.index?"cui-slide-nav-item-current":"";e.push('<span class="cui-slide-nav-item '+n+'"></span>')}this._navNode.empty().html(e.join(" "))},_injectHTML:function(){this._rootNode=$(this._createHTML()),this._containerNode.html(this._rootNode),this._imageNode=this._rootNode.find(".cui-imageContainer"),this._navNode=this._rootNode.find(".cui-navContainer"),this.showNav||this._navNode.css("display","none"),this._imageNode.empty(),this._createLoading(),this._imageCount>0?this._createImageItem(this.index,$.proxy(function(e,t){this._createNav(),this._setSize(t.height,t.width),this._displayImage=e,this._createImageContainer()},this)):(this._createDefault(),this._loadingNode.css("display","none"))},_onImageClick:function(){var e=this.images[this.index];if(e&&e.onClick){e.onClick.call(this.scope||this,e);return}this.onImageClick&&this.onImageClick.call(this.scope||this)},_createImageItem:function(e,t){this._isloadingImage=!0,!e&&(e=0);var n=this._getImageInfo(e),r=new Image;n.src&&(r.src=n.src),n.alt&&(r.alt=n.alt);var i=this;r.onload=function(){n.orgImage=r,i.autoHeight||(i._defaultSize.width=r.width,i._defaultSize.height=r.height),i._isloadingImage=!1,t.call(i,n,r)},r.onerror=function(){n.loadError=!0,i._errorImage=new Image,i._errorImage.src=i.errorImageUrl,i._isloadingImage=!1,i._errorImage.onload=function(){n.orgImage=i._errorImage,t.call(i,n,i._errorImage)}}},_getImageInfo:function(e){!e&&(e=0);for(var t=0,n=this.images.length;t<n;t++)if(e===t)return this.images[t];throw new Error("[c.ui.imageSlider]:image index is "+e+",but images.length is "+n)},_bindEvents:function(){this._containerNode.bind("touchmove",$.proxy(this._touchmove,this)),this._containerNode.bind("touchstart",$.proxy(this._touchstart,this)),this._containerNode.bind("touchend",$.proxy(this._touchend,this)),$(window).on("resize",$.proxy(this._resize,this)),this._navNode.bind("click",$.proxy(this._switchImage,this)),this._imageNode.bind("click",$.proxy(this._onImageClick,this))},_switchImage:function(e){var t=e.targetElement||e.srcElement,n=$(t).data("index");if(n!==0&&!n)return;if(this.index===+n)return;this.index=n,this._changeImage()},_imageToRight:function(){if(this.index<=0){if(!this.loop)return;this.index=this._imageCount-1}else this.index--;this._changeImage(this.ENUM.DIR.LEFT)},_imageToLeft:function(){if(this.index>=this._imageCount-1){if(!this.loop)return;this.index=0}else this.index++;this._changeImage(this.ENUM.DIR.RIGHT)},_changeImage:function(e){if(this._imageCount<=1)return;this._clearAutoPlay(),this._changing=!0,!e&&(e=this.dir);var t=this.images[this.index];t.node?(this._nextImage=t,this._showSliderImage(e)):(this._nextImage={node:this._loadingNode,orgImage:this._loadingImage},this._showLoading(),this._createImageItem(this.index,$.proxy(function(t,n){this._createImageContainer(),this._nextImage=t,this._showSliderImage(e)},this)))},_showSliderImage:function(e,t){var n=0,r=0,i=0,s=0;e===this.ENUM.DIR.LEFT?(n=-1*this._size.width,r=0,i=0,s=this._size.width):(n=this._size.width,r=0,i=0,s=-1*this._size.width),this._displayImage.node.css("left",r),this._nextImage.node.css("left",n).css("display",""),this._nextImage.node.animate({left:i},500,"ease-out",$.proxy(function(){this._changing=!1,this._changeCompeted(),this.rePlay()},this)),this._displayImage.node.animate({left:s},500,"ease-out",$.proxy(function(){this._displayImage.node.css("display","none").css("left",0),this._displayImage=this._nextImage},this))},_touchmove:function(e){e.preventDefault();if(this._changing)return;var n=t.getMousePosOfElement(e.targetTouches[0],e.currentTarget),r=n.x-this._handerStartPos.x;r>0&&r>this._moveValue?this._imageToRight():r<0&&Math.abs(r)>this._moveValue&&this._imageToLeft()},_touchstart:function(e){e.preventDefault();var n=t.getMousePosOfElement(e.targetTouches[0],e.currentTarget);this._handerStartPos={x:n.x,y:n.y}},_touchend:function(e){e.preventDefault()},_setSize:function(e,t){this._size.width=Math.ceil($(window).width()),this._size.height=Math.ceil(e*(this._size.width/t)),this._size.height<100&&(this._size.height=100,this._size.width=t*(this._size.height/e)),this._rootNode.css("width",this._size.width).css("height",this._size.height),this._imageNode.find("div").find("img").css("width",this._size.width).css("height",this._size.height),this.showNav&&this._setNavPos()},_setNavPos:function(){var e=(this._size.width-2*this._imageCount*10)/2,t=this._size.height-30;this._navNode.css("left",e).css("top",t)},_resize:function(){this._lastSize.width=this._size.width,this._lastSize.height=this._size.height,this.imageSize&&this.imageSize.height&&this.imageSize.width?this._setSize(this.imageSize.height,this.imageSize.width):this._displayImage&&!this._displayImage.loadError&&this._setSize(this._displayImage.orgImage.height,this._displayImage.orgImage.width)},_changeCompeted:function(){for(var e in this._changeCompletedEvents)this._changeCompletedEvents[e]();this._changeCompletedEvents.length=0,this._changeNav(),this.autoHeight&&this._resize(),this.onChanged&&this.onChanged.call(this.scope||this,this.images[this.index],this.index)},_changeNav:function(){this.showNav&&(this._navNode.find("span").removeClass("cui-slide-nav-item-current"),$(this._navNode.find("span")[this.index]).addClass("cui-slide-nav-item-current"))},_createImageContainer:function(){var e=this.images[this.index];this._loadingNode.css("display","none");if(!e.node){var n=t.getElementPos(this._rootNode[0]).top-48;e.loadError?e.node=$(this._createImageHtml(this.errorImageUrl,e.alt)):e.node=$(this._createImageHtml(e.src,e.alt)),this._imageNode.append(e.node),e.node.css("position","absolute").css("left",0),e.node.bind("click",function(e){e.preventDefault()})}this.autoHeight&&this._resize()},_createLoading:function(){if(this.firstLoad){this._loadingNode=$(this._createImageHtml(this.loadImageUrl));var e=['<div class="cui-breaking-load">','<div class="cui-i cui-m-logo">','</div> <div class="cui-i cui-w-loading">',"</div></div>"];this._loadingNode.html(e.join(" ")),this.autoHeight||(this._resize(),this._setLoadingPos()),this._imageNode.append(this._loadingNode),this.firstLoad=!1}},_setLoadingPos:function(){this._loadingNode.css("position","absolute").css("height",this._size.height).css("width",this._size.width);if(this._size.height){var e=(this._size.height-70)/2;this._loadingNode.find(".cui-breaking-load").css("top",e)}},_showLoading:function(){this._loadingNode.css("display",""),this._setLoadingPos()},_createDefault:function(){if(this.defaultImageUrl){var e=new Image;e.src=this.defaultImageUrl;var t=this;e.onload=function(){var n=$(t._createImageHtml(t.defaultImageUrl));t._imageNode.append(n),t._displayImage=e,t.autoHeight?t._setSize(e.height,e.width):t._setSize(t.imageSize.height,t.imageSize.width)}}},_createImageHtml:function(e,t){return'<div class="image-node slider-imageContainerNode"><img style="width:'+this._size.width+"px;height:"+this._size.height+'px" src="'+e+'" alt="'+(t?t:"")+'"></div>'}})}),define("cUICore",["cHistory","cView","cDataSource","cUIBase","cUIAbstractView","cAdView","cUIAlert","cUIAnimation","cUICitylist","cUIHeadWarning","cUIInputClear","cUILayer","cUILoading","cUILoadingLayer","cUIMask","cUIPageview","cUIScrollRadio","cUIScrollRadioList","cUIScrollList","cUIToast","cUIWarning","cUIWarning404","cUIHashObserve","cUIEventListener","cUISwitch","cUINum","cUIGroupList","cUIBusinessGroupList","cUITab","cUIImageSlider","cUIBubbleLayer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O){var M={prefix:"cui-"},_={History:e,View:t,DataSource:n,Tools:r,config:M,AbstractView:i,AdView:s,Alert:o,Animation:u,CityList:a,HeadWarning:f,InputClear:l,Layer:c,Loading:h,LoadingLayer:p,Mask:d,PageView:v,ScrollRadio:m,ScrollRadioList:g,ScrollList:y,Toast:b,Warning:w,HashObserve:S,EventListener:x,cuiSwitch:T,cuiNum:N,cUIGroupList:C,cUIBusinessGroupList:k,cUITab:L,cUIImageSlider:A,cUIBubbleLayer:O};return _}),define("cUI",["cUICore"],function(e){return e}),define("cLazyload",["libs"],function(e){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEXy8vL6+vr+/v7+/v7+/v7v7+/+/v7+/v7+/v7+/v7+/v729vb+/v4AAADt7e3+/v673auIAAAADnRSTlPXrYhVZuwimTMRRMJ3AKjyf0QAAAH3SURBVHjaxdbZkqowGEXhzMM/ZL//2x6IEYh0Cd1addaFUhbJZyKKRv9TZ1iSHirpU6Gme3BB888h3kXwj8PLePZCc0F0lNn1Z0Irl3AQYVhZYnVYY/Zj+Nxze/Aa64ghYyRfrHieZ4Gz398qRV6KiNyL24AsS06e/RGuKqBKpJrWI31NIDo1Tsrt+foR9tfwLresBLcerYvplUu4oMlamGH6BWwXjREZIMGIruBq9jP/Co8pmLmsc9IC1ao6TXaCM0xfttUZnqO3MAkVgjwGaofXklDPQGgUaMA1Q0zW0kx9gQ0fK29hTUQCzuwqzA4TzslzxeJWtbszTPd/uTweNQ4C2eFiZc0hCoP7cQ6HqzpZwPoZbkj34RpZHmRlpAHveeT5+upwChlNpKFZKTsM6CU8Rxz6KvrGT59MRjjDDDRXlnNdQ6xHWLbSDZg4yxa7+UuOeoZTDrU22OUx+H2rCw7RHRiRt8A6KVbP8INxETJ9xgRDI3MPPk48wamBfoZJimqYr2rBtlv82YqrAesGU647nIHoyvxWI/yH8O62tMOCdvw6iQHsESag7vAHW+3buJ9LB0qE3eAe5XAcEZH1Cyv2jO52auSf9+OpMSID6RtwALiOLbdY4/DuH0jq1/gnWx3HgXTnnH2dE20M0F/DQvrlClU99Q/TJ4uko/HGBAAAAABJRU5ErkJggg==",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v729vb+/v4AAADt7e3+/v6c4gmbAAAADnRSTlOtM4hmVZkiEdfsRMJ3AHDRYrYAAAGwSURBVHjaxdbZktsgEAVQLSxNL9z//9vQgvFYUjKpkqnkPhgJbI4bJMuL/af8DGeS8IcRZm+Shnwb21U/hQ1Ivx9gLL0pDbqMKbYJsN2TDlGPuiF3RzGhYrJ7FF9Rh42wT4VTbrD40WqBxEM89lAjpL2GA15j7h/gdIIzp0fwd2FijB62ER6TO/zdd40+g0kEVYQgw5EDbn3eWcRznEhFh6t4yhgrz+BXQYztDBfpucNyWmr9GNYTfCTSflrqyXDyO0Wv8OoDlH3cCpmRptmwe3cYr0jrsgzwv4EXXRAX2VTVInJAnL7UCvaXcNnjXGI7zuMdG/gLLuoRSG+fw7HDfIYTFWZCUGVboaXMvY89BNevML1PXIH9BRN7ImJvH8MJ5NwVDqqBCTwWpdjIftnjXfaHsGK7wyMCS9wmVtdmP50K+CCS8fFzVY/zxKwaa19qBlqn5qmwooxn8gkO6NmU01org3KpM2GG30cqqHa5uLad27F/h4q1OcAyEc7Fp8teWhMGHN73OG/9io7evGX78K9PjtkBcZLVa105ve2/2V5CLzHaewTyAJ6QlVf7a34BIRiNTVIrVfEAAAAASUVORK5CYII=",r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAYCAMAAAAGTsm6AAAAMFBMVEX6+vr+/v7+/v7+/v7+/v7+/v7+/v7y8vLv7+/+/v7+/v7+/v729vYAAADt7e3+/v6PQhf9AAAADnRSTlOtVTOIZpki1+wRd0TCAMJ8iPYAAAKfSURBVHjaxZWLjqMwDEXJO7FN7v//7WITOgQ6pVpptbdSecTxiW3iLOt/0g3cirj3po1ZL5lcuw8Sud8QgegJbALy+laMZb/UdY2n9Xj9F/wKFnwLXu/KRiSLG7ISwk+s6Fm9n9PgZUjNKvJ34LLeRThECl4L4ssDyMKak7NLTRvKc41z28Bia15dEVWxwkYiShAicgb26QiwAY6ZC1gV4wCTXdXUjey09gFMOCSvVSv46u2kiEnyMm3DNGGIP4GLCLpIgQyOmD266MsqKnuQPnJbkWhTBalSeIEFycAdZi3in2osOjHM4CqmO5i0gvcaG9ipr4gyDT+BaQKbUom3VLc6xqXewaymBfQdOOu3QFew14HSbGPVLYRCediPBHZ5D2b0bOt6BBvvBsZLoqtvGIEGCWRCJVOQOIEFVpMqfwleaEFajLImNId0dKWb6AXWqrQg8NvN8ggmJRHcBNZiJu1OwyIclY8UWZUAxyoinsBqHtcMegSnHcwzOJfKXODUrwfVa8lq7z+uZ7Dboo3gR3CB0q/gcs5kB+I8KSKlnmdwrTu4AXnpj706j213ATvtlQU8knIJ2HdkRjmfoLkplL0ikJAewYTwDnw0icxRbeRyhCPoaGpTEiiGdpwY+RFcDSSbJVu76vacmYlS31PN1nfpRfHVdnjuqPHcWfS919ttoD2BCXWcyRPYYVcgzr533ki1DwLBuJZw9ERsD0mPCUH3+nr7xc9ghu4jEvT18nGFyHvfcx3eTjGbyaEDMuLJgvG+JRTz3pmA1ApQQ/4d3KpOaxraRhhgd65xC0C0gOyiHs/7iBcrZ65HElKFuQkAPp1OLTUFiNoysU7lfKr/usa6L4TS0Vfm8uVoo8q17Y/KdseyXFP9T9VOn9s88gcLTIlzurC4gAAAAABJRU5ErkJggg==",i={};return i.lazyload=function(e,i,s,o){var u=function(){var e=$(this),u=$(new Image),a=e.attr("src");e.addClass("cui-item-imgbg");if(typeof a=="string"&&a.length>0){e.attr("src",n),typeof i=="function"&&i.call(this,this);var f=function(){e.attr("src",r)};f=s||f;var l=function(){e.attr("src",a),e.removeClass("cui-item-imgbg")};l=o||l,u.bind("error",f).bind("load",l).attr("src",a)}else e.attr("src",t)};$(e).each(u)},i}),define("c",["cBase","cUI","cUtility","cView","cModel","cStore","cStorage","cAjax","CommonStore","cLazyload","cLog"],function(e,t,n,r,i,s,o,u,a,f,l){var c={base:e,ui:t,view:r,utility:n,store:s,storage:o,model:i,ajax:u,log:l,commonStore:a,lazyload:f};return c}),define("cListAdapter",["libs","cBase"],function(e,t){var n=n||{},r=function(e){var t="",n=function(){var e=Math.floor(Math.random()*62);return e<10?e:e<36?String.fromCharCode(e+55):String.fromCharCode(e+61)};while(t.length<e)t+=n();return t},i=function(e,t){var n=r(8);if(!e.getItem(n))return e.add(n,t);i(e,t)},s=function(e,t){for(var n=0;n<t.length;n++)i(e,t[n])};n.__propertys__=function(){this.observers=[]},n.initialize=function(e){this.setAdapter(e.data)},n.add=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)i(this.map,e[t]),this.list.push(e[t]);else i(this.map,e),this.list.push(e);this.notifyDataChanged()},n.shift=function(){return this.map.shift(),this.notifyDataChanged(),this.list.shift()},n.pop=function(){return this.map.pop(),this.notifyDataChanged(),this.list.pop()},n.remove=function(e){for(var t=0;t<e;t++)this.map.pop(),this.list.pop();this.notifyDataChanged()},n.sortBy=function(e){this.map.sortBy(e),this.list=_.sortBy(this.list,e),this.notifyDataChanged()},n.setAdapter=function(e){e=e&&e instanceof Array?e:[],this.list=$.extend(!0,[],e),this.map=new t.Hash,s(this.map,e),this.notifyDataChanged()},n.regiseterObserver=function(e){this.observers.indexOf(e)===-1&&this.observers.push(e)},n.unregiseterObserver=function(e){var t=this.observers.indexOf(e);t&&this.observers.splice(t,1)},n.notifyDataChanged=function(){for(var e=0;e<this.observers.length;e++)this.observers[e].update()};var o=new t.Class(n);return o}),define("cWidgetGeolocation",["cBase","cUtility","cWidgetFactory","cStore","cHybridFacade"],function(e,t,n,r,i){var s="Geolocation",o="0b895f63ca21c9e82eb158f46fe7f502";if(n.hasWidget(s))return;var u=u||{};u.requestGeographic=function(e,t){var n=function(t){e&&e(t)},r=function(e){var n="未能获取到您当前位置，请重试或选择城市";switch(e.code){case e.TIMEOUT:n="获取您当前位置超时，请重试或选择城市！";break;case e.PERMISSION_DENIED:n="您拒绝了使用位置共享服务，查询已取消，请开启位置共享或选择城市！";break;case e.POSITION_UNAVAILABLE:n="获取您当前位置信息失败，请重试或选择城市！"}t&&t(e,n)};window.navigator.geolocation.getCurrentPosition(n,r,{enableHighAccuracy:!0,maximumAge:5e3,timeout:2e4})},u.requestAMapAddress=function(e,t,n,r,i){var s="121.473704,31.230393";e&&t&&(s=e+","+t);var u=$.param({location:s,key:o,radius:0,extensions:"all"});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/geocode/regeo?"+u,dataType:"jsonp",success:function(r){var i=r&&r.regeocode||"",o=i.addressComponent.city,u=i.addressComponent.province,a="";_.isString(o)?a=o:_.isString(u)&&(a=u);var f={address:_.isString(i.formatted_address)?i.formatted_address:"",location:s,info:i&&i.addressComponent,city:a,lng:e,lat:t};n&&n(f)},error:function(e){r&&r(e)},timeout:i})},u.requestAMapAround=function(e,t,n,r,i){var s="121.473704,31.230393";e&&t&&(s=e+","+t);var u=$.param({location:s,key:o,radius:500,offset:4,page:1});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/around?"+u,dataType:"jsonp",success:function(e){var t=e&&e.pois||[];n&&n(t)},error:function(e){r&&r(e)},timeout:i})},u.requestAMapKeyword=function(e,t,n,r,i){var s=$.param({keywords:e,city:t,key:o,offset:10,page:1});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/place/text?"+s,dataType:"jsonp",success:function(e){var t=e&&e.pois||[];n&&n(t)},error:function(e){r&&r(e)},timeout:i})},u.tansformLongitude=function(e,t,n,r,i){var s=$.param({locations:e+","+t,key:o,coordsys:"gps"});i=i||8e3,$.ajax({url:"http://restapi.amap.com/v3/assistant/coordinate/convert?"+s,dataType:"jsonp",success:function(e){if(e&&e.status==="1"){var t=e.locations.split(",");n&&n(t[0],t[1])}else r&&r()},error:function(e){r&&r(e)},timeout:i})},u.requestCityInfo=function(e,n,r,s,o){var a=function(){var t=function(t){if(t&&t.locateStatus){if(t.locateStatus==-1){r("网络不通，当前无法定位",1);return}if(t.locateStatus==-2){r("定位没有开启",2);return}}t&&t.value&&t.value.poi&&(t.value.poi.address&&t.value.poi.address!=""?t.value.addrs=t.value.poi.address:t.value.poi.name&&t.value.poi.name!=""&&(t.value.addrs=t.value.poi.name),t.value.poi.y&&t.value.poi.y!=""&&(t.value.lat=t.value.poi.y),t.value.poi.x&&t.value.poi.x!=""&&(t.value.lng=t.value.poi.x));var i=null;t&&t.value&&t.value.ctyName?i=t.value.ctyName:t&&t.value&&t.value.cityName?i=t.value.cityName:t&&t.value&&t.value.province=="香港特別行政區"?i="香港特別行政區":t&&t.value&&t.value.province&&(i=t.value.province.indexOf("市")>-1?t.value.province:t.value.subLocality);var s=null;t&&t.value&&t.value.addrs&&(s=t.value.addrs);var o=t.value.lat,a=t.value.lng;if(i&&s)s.indexOf(i)>-1?e({city:i,address:s,lng:a,lat:o}):e({city:i,address:i+s,lng:a,lat:o});else if(o&&a){var f=function(t){e&&(t.lng=a,t.lat=o,e(t))},l=function(e,t){n&&n()};u.requestAMapAddress(a,o,f,l)}else r("Error",0)},r=function(e,t){if(typeof s=="function"){s(e,t);return}n&&n(t)};i.request({name:i.METHOD_LOCATE,success:t,error:r})},f=function(){var t=function(t){var i=t.coords.longitude,s=t.coords.latitude;r&&r(i,s);var a=function(t){e&&e(t)},f=function(e,t){n&&n()};o?u.tansformLongitude(i,s,function(e,t){u.requestAMapAddress(e,t,a,f)},function(e){f(e)}):u.requestAMapAddress(i,s,a,f)},i=function(e,t){if(typeof s=="function"){s(t,e);return}n&&n(t)};u.requestGeographic(t,i)},l=t.isInApp()?a:f;l()},u.requestAroundInfo=function(e,t,n){var r=e.split(",")[0],i=e.split(",")[1],s=function(e){t&&t(e)},o=function(){n&&n()};u.requestAMapAround(r,i,s,o)},u.requestKeywordInfo=function(e,t,n,r){var i=function(e){n&&n(e)},s=function(){r&&r()};u.requestAMapKeyword(e,t,i,s)};var a=u.PositionStore=e.Class(r,{__propertys__:function(){this.key="POSITION_CITY",this.lifeTime="10M"},initialize:function($super,e){$super(e)}});u.requestCacheCityInfo=function(e,t,n){var r=a.getInstance(),i=r.get();i?e&&e.call(n,i):u.requestCityInfo(function(t){r.set(t),e&&e.call(n,t)},function(e,r){t&&t.call(n,e,r)})},u.requestMap=function(e){var n=function(e){if(!AMap||!e||!e.lat||!e.lng||!e.id)return!1;var t=13,n=new AMap.Map(e.id,{center:new AMap.LngLat(e.lng,e.lat),level:e.level||t}),r=document.createElement("div");r.className="map-content";var i=document.createElement("img");i.src="http://res.m.ctrip.com/html5/Content/images/map_address.png",r.appendChild(i);if(e.content){var s=document.createElement("span");s.innerHTML=e.content,r.appendChild(s)}var o=new AMap.Marker({position:new AMap.LngLat(e.lng,e.lat)});o.setContent(r),o.setMap(n)},r=function(e){},i=t.isInApp()?r:n;i(e)},u.show_map=function(e){if(!e)throw new Error('function show_map error is "param is null"');e.name=i.METHOD_SHOW_MAP,i.request(e)},n.register({name:s,fn:u})}),define("cGeoService",["cWidgetFactory","cWidgetGeolocation","cWidgetGuider"],function(e){var t={},n=e.create("Geolocation"),r=e.create("Guider"),i=n.PositionStore.getInstance();return t.GeoLocation=function(){function l(e,t,n){for(var r in u)u[r]&&typeof u[r][e]=="function"&&u[r][e].apply(u[r].scope,t);n&&(u={})}var e=0,t=1,s=2,o=3,u={},a=e,f=null;return{Subscribe:function(e,c,h,p){var d;c=c||{},u[e]||(u[e]={name:e,onStart:c.onStart,onComplete:c.onComplete,onError:c.onError,onPosComplete:c.onPosComplete,onPosError:c.onPosError,scope:h});var v=i.get();p&&(v=null);if(v)a=t,l("onStart",null),a=s,l("onPosComplete",[v.lng,v.lat]),l("onComplete",[v],!0);else{clearTimeout(f),f=setTimeout(function(){a===t&&(a=o,r.print({log:"#cGeoService -- 22 second timeout call onError"}),l("onError",[null],!0))},35e3);if(a===t){u[e]&&typeof u[e].onStart=="function"&&u[e].onStart.call(h);return}a=t,l("onStart",null),r.print({log:"#cGeoService -- start request city info"}),n.requestCityInfo(function(e){a=s,i.set(e),l("onComplete",[e],!0)},function(e,t){a=o,typeof t=="number"&&t===2&&(t={code:1}),r.print({log:"#cGeoService -- locate onError"}),l("onError",[e,t],!0)},function(e,t){l("onPosComplete",[e,t])},function(e,t){a=o,typeof t=="number"&&t===2&&(t={code:1}),l("onPosError",[e,t],!0)},!0)}},UnSubscribe:function(e){e=_.isArray(e)?e:[e];for(var t=0;t<e.length;t++)delete u[e[t]]},ClearPosition:function(){i.remove()}}}(),t.GeoAround=function(){return{Subscribe:function(e,t,r,i){n.requestAroundInfo(e,function(e){t.call(i,e)},function(e){r.call(i)})}}}(),t.GeoKeyword=function(){return{Subscribe:function(e,t,r,i,s){n.requestKeywordInfo(e,t,function(e){r.call(s,e)},function(e){i.call(s)})}}}(),t}),define("cUtilityCrypt",[],function(){var e={},t=e.Base64,n="2.1.4",r;typeof module!="undefined"&&module.exports&&(r=require("buffer").Buffer);var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){var t={};for(var n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,u=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?o(192|t>>>6)+o(128|t&63):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|t&63)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|t&63)},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(a,u)},l=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(n&63)];return r.join("")},c=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,l)},h=r?function(e){return(new r(e)).toString("base64")}:function(e){return c(f(e))},p=function(e,t){return t?h(e).replace(/[+\/]/g,function(e){return e=="+"?"-":"_"}).replace(/=/g,""):h(e)},d=function(e){return p(e,!0)},v=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),m=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((n&1023)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},g=function(e){return e.replace(v,m)},y=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(r&255)];return i.length-=[0,0,2,1][n],i.join("")},b=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,y)},w=r?function(e){return(new r(e,"base64")).toString()}:function(e){return g(b(e))},E=function(e){return w(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(){var n=e.Base64;return e.Base64=t,n};e.Base64={VERSION:n,atob:b,btoa:c,fromBase64:E,toBase64:p,utob:f,encode:p,encodeURI:d,btou:g,decode:E,noConflict:S};if(typeof Object.defineProperty=="function"){var x=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return E(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(e){return p(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return p(this,!0)}))}}return e}),define("cUserModel",["cBase","cModel","CommonStore"],function(e,t,n){var r=n.UserStore.getInstance(),i=n.HeadStore.getInstance(),s={};return s.NotUserLoginModel=new e.Class(t,{__propertys__:function(){this.url="/html5/Account/NonUserLogin",this.param={},this.baseurl=t.baseurl.call(this),this._abortres={},this.isAbort=!1},initialize:function($super,e){$super(e)},excute:function(e,t,n,i,s){this.isAbort=!1;var o="http://"+this.baseurl.domain+this.url,u=function(n){n.ServerCode==1&&n.Data?(r.setUser(n.Data),typeof e=="function"&&e.call(i,n)):typeof t=="function"&&t.call(i)},a=function(){if(this.isAbort){typeof s=="function"&&s.call(i),this.isAbort=!1;return}typeof t=="function"&&t.apply(i,arguments)};this._abortres=$.ajax({type:"get",url:o,dataType:"json",crossDomain:!0,success:$.proxy(u,this),error:$.proxy(a,this),timeout:25e3})},abort:function(){this.isAbort=!0,this._abortres&&typeof this._abortres.abort=="function"&&this._abortres.abort()}}),s}),define("cMultipleDate",["libs","c"],function(e,t){var n=t.base,r=new n.Class({__propertys__:function(){this.models=new n.Hash,this.index=0,this.results={}},initialize:function(e){this.setOption(e)},setOption:function(e){for(var t in e)switch(t){case"models":this.addModels(e[t])}},addModel:function(e,t){this.models.add(e,t)},addModels:function(e){for(var t in e)e.hasOwnProperty(t)&&this.models.add(t,e[t])},removeModelByName:function(e){this.models.del(e)},removeModelByIndex:function(e){this.models.delByIndex(e)},excute:function(e,t,n,r,i){if(!this.models.length())throw"No model";this.index=0,this._request(e,t,n,r,i)},_request:function(e,t,n,r,i){var s=this.models.index(this.index),o=this;s.excute(function(s){o.results[o.models.getKey(o.index)]=s,o.index++;if(o.index>=o.models.length()){e&&e.call(this,o.results),o.results={};return}o._request(e,t,n,r,i)},function(e){t&&t.call(this,e)},n,r,i)}});return r}),define("cSessionStorage",["cBase","cAbstractStorage"],function(e,t){var n=new e.Class(t,{__propertys__:function(){},initialize:function($super,e){this.proxy=window.sessionStorage,$super(e)}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n.sessionStorage=n.getInstance(),n}),define("cSessionStore",["cBase","cAbstractStore","cSessionStorage"],function(e,t,n){var r=new e.Class(t,{__propertys__:function(){this.sProxy=n.getInstance()},initialize:function($super,e){$super(e)}});return r}),define("memStore",["cBase","cStore"],function(e,t){var n=new e.Class({__propertys__:function(){this.idField="",this.data=null,this.store=null},initialize:function(e){var n=["key","lifeTime","useServerTime","isLocal","defaultData","rollbackEnabled"],r={};for(var i=0,s=n.length;i<s;i++){var o=this[n[i]];typeof o!="undefined"&&(r[n[i]]=o)}this.store=new t(r)},refresh:function(){var e=this.store.get();!this.data&&e&&this.data&&this.data[this.idField]!==e[this.idField]&&(this.data=e)},commit:function(){this.store.set(this.data)},rollback:function(){this.data=null},set:function(e){this.data=e},setAttr:function(e,t){this.data[e]=t},set2Store:function(e){this.set(e),this.commit()},get:function(){return this.data},getAttr:function(e){return this.data[e]}});return n.getInstance=function(){return this.instance?this.instance:this.instance=new this},n}),define("PageStore",["cBase","cStore","cUtility"],function(e,t,n){var r=new e.Class(t,{__propertys__:function(){this.CONST_TAG="tag",this.CONST_BACKURL="backurl",this.CONST_CALLBACK="callback",this.CONST_CURVALUE="curvalue"},initialize:function($super,e){$super(e)},save:function(e){var t=this.get(),n=this;$.isArray(t.callback)?$.each(t.callback,function(t,r){n._callFunByStr(r,e)}):this._callFunByStr(t.callback,e)},setCurrent:function(e,t,n,r){var i={};i[this.CONST_TAG]=e,i[this.CONST_BACKURL]=t,i[this.CONST_CALLBACK]=n,i[this.CONST_CURVALUE]=r,this.set(i)},getCurrent:function(){return this.get()},getValue:function(){var e=this.get();return this._callFunByStr(e.curvalue)},_callFunByStr:function(e,t,n,r){n=n||TaxiStore;var i=/^(?:(.*)::)?(.*):(.*)$/i.exec(e),s,o,u;if(i&&i.length===4&&!i[1]){s=n[i[2]],o=i[3];if(s&&s.getInstance){var a=s.getInstance()[o](t);return r&&r(a),a}}else i&&i.length===4&&i[1]&&(u=i[1],s=i[2],o=i[3],requirejs([u],function(e){if(e&&e[s]&&e[s].getInstance){var n=e[s].getInstance(),i=n[o]&&n[o](t);r&&r(i)}}));return!1}});return r}),define("cWidgetHeaderView",["cBase","cUICore","cWidgetFactory","cUtility","cSales","cHybridFacade"],function(e,t,n,r,i,s){function c(n){if(c.instance)return c.instance.reset(n),c.instance;var r=new e.Class(t.AbstractView,f);return c.instance=new r(n)}var o="HeaderView";if(n.hasWidget(o))return;var u=function(){var e=this.templateFactory(this.data);return $(e)},a=function(e){this.html="";if(e&&e.data){e.data.customtitle&&this.htmlMap.title?delete this.htmlMap.title:this.htmlMap.title="<h1><%=title %></h1>";for(var t in this.htmlMap)e.data[t]&&(this.html+=this.htmlMap[t]);var n="",r=e.data.style;r&&(n=' style="'+r+'"'),this.html="<header"+n+">"+this.html+"</header>"}},f=f||{};f.__propertys__=function(){},f.initialize=function($super,e){e?(this.rootBox=e.container||$('<div id="headerview"></div>'),this.data=e.data,this.html=e.html||this.html,this.data&&(this.bindEvents=e.data.bindEvents||function(){}),a.call(this,e),e.onShow=this.onShow):(this.rootBox=$('<div id="headerview"></div>'),e={onShow:this.onShow}),$super(e)},f.createHtml=function(){if(this.html)return this.templateFactory=this.template(this.html),u.call(this);return},f.onShow=function(){this.rootBox.off("click"),this.data&&this.data.btn&&typeof this.bindEvents=="function"&&(0,this.bindEvents(this.getView())),this.data&&this.data.events&&this.delegateEvents(this.data.events,this.data.view);if(this.data&&this.data.commit){var e=this.data.commit,t=this.getView(),n=this,r=function(){e.callback.call(n.view)};t.find("#"+e.id).on("click",r),s.register({tagname:s.METHOD_COMMIT,callback:r})}},f.set=function(e){e&&(this.data=e,a.call(this,{data:e}),this.bindEvents=this.data.bindEvents,this.isCreate=!1,this.hide())},f.reset=function(e){e&&(this.set(e),this.trigger("onShow"))},f.delegateEvents=function(e,t){if(e){l.call(this,"#c-ui-header-home","click",e.homeHandler,t),l.call(this,"#c-ui-header-return","click",e.returnHandler,t),this.rootBox.find("header").append($("#c-ui-header-return"));var n=this,r=function(){e.returnHandler.call(t||n)};s.register({tagname:s.METHOD_BACK,callback:r});if(e.citybtnHandler){var i=function(){e.citybtnHandler.call(t||n)};s.register({tagname:s.METHOD_CITY_CHOOSE,callback:i})}}};var l=function(e,t,n,r){this.rootBox.find(e).on(t,function(){n.call(r||this)})};f.getView=function(){return this.rootBox},f.updateHeader=function(e,t){this.data[e]=t,this.set(this.data),this.show()},f.html=null,f.htmlMap={home:'<i class="icon_home i_bef" id="c-ui-header-home"></i>',tel:'<a href="tel:<%=tel.number||4000086666 %>" class="icon_phone i_bef __hreftel__" id="c-ui-header-tel"></a>',customtitle:"<div><%=customtitle %></div>",title:"<h1><%=title %></h1>",back:'<i id="c-ui-header-return" class="returnico i_bef"></i>',btn:'<i id="<%=btn.id%>" class="<%=btn.classname%>"><%=btn.title %></i>',custom:"<%=custom %>"},f.create=function(){!this.isCreate&&this.status!==t.AbstractView.STATE_ONCREATE&&(this.rootBox=this.rootBox||$("body"),this.rootBox.empty(),this.root=$(this.createHtml()),this.rootBox.append(this.root),setTimeout($.proxy(function(){i.replaceContent(this.root)},this),200),this.rootBox.css("height",this.root.css("height")),this.trigger("onCreate"),this.status=t.AbstractView.STATE_ONCREATE,this.isCreate=!0)},f.hideHandler=function($super){r.isInApp()?s.request({name:s.METHOD_SET_NAVBAR_HIDDEN}):this.hide()},f.showAction=function(e){r.isInApp()?(this.rootBox.hide(),this.saveHead()):this.root.show(),e()},f.saveHead=function(){var e={left:[],center:[],centerButtons:[],right:[]},t=this.data;t.back&&e.left.push({tagname:"back"}),t.title&&e.center.push({tagname:"title",value:t.title}),t.subtitle&&e.center.push({tagname:"subtitle",value:t.subtitle}),t.btn&&e.right.push({tagname:"commit",value:t.btn.title}),t.tel&&e.right.push({tagname:"call"}),t.home&&e.right.push({tagname:"home"}),t.citybtn&&e.centerButtons.push({tagname:"cityChoose",value:t.citybtn,a_icon:"icon_arrowx",i_icon:"icon_arrowx.png"});try{var n=JSON.stringify(e);s.request({name:s.METHOD_REFRESH_NAV_BAR,config:n})}catch(r){}},n.register({name:o,fn:c})}),define("cWidgetListView",["cBase","cUICore","cWidgetFactory"],function(e,t,n){var r="ListView";if(n.hasWidget(r))return;var i=function(t){var n=new e.Hash;for(var r=0;r<t.length;r++)n.add($(t[r]).data("hash"),$(t[r]));return n},s=s||{};s.__propertys__=function(){},s.initialize=function($super,e){e.container&&(this.rootBox=e.container),this.noResultText="您还没有记录哦",this.autoEmptyView=typeof e.autoEmptyView!="undefined"?e.autoEmptyView:!0,e.noResultText&&(this.noResultText=e.noResultText),e.listadapter&&(this.listadapter=e.listadapter,this.listadapter.regiseterObserver(this)),e.origin&&(this.origin=e.origin);if(!e.itemView)throw"ListView:no item view template";this.templateFactory=this.template(e.itemView),this.bindItemViewEvent=e.bindItemViewEvent,this.onUpdatePrepared=e.onUpdatePrepared,this.onUpdateFinished=e.onUpdateFinished,$super(e)},s.createHtml=function(){return this.update()},s.createItemView=function(e,t){var n=this.templateFactory(e);return $(n).addClass("c-item-view").data("hash",t)},s.update=function(){var t=this.rootBox.find(".c-item-view");this.map=i(t),this.onUpdatePrepared&&typeof this.onUpdatePrepared=="function"&&this.onUpdatePrepared();var n=new e.Hash,r=this,s=function(e,t,i){var s=r.map.getItem(t);s||(e.C_ITEM_INDEX=i,e.__origin__=r.origin,s=r.createItemView(e,t),r.bindItemViewEvent(s)),n.add(t,s)};this.listadapter.map.each(s),this.rootBox.hide(),this.rootBox.empty();if(this.listadapter.list.length>0){var o=function(e,t,n){r.rootBox.append(e)};n.each(o)}else this.autoEmptyView&&this.rootBox.append('<div class="cui-load-error"><div class="cui-i cui-wifi cui-exclam"></div>'+this.noResultText+"</div>");this.rootBox.show(),this.onUpdateFinished&&typeof this.onUpdateFinished=="function"&&this.onUpdateFinished()},s.onUpdatePrepared=function(){},s.onUpdateFinished=function(){},s.openAutoEmptyView=function(){this.autoEmptyView=!0},s.closeAutoEmptyView=function(){this.autoEmptyView=!1};var o=new e.Class(t.AbstractView,s);n.register({name:r,fn:o})}),define("cWidgetTipslayer",["cBase","cUICore","cWidgetFactory","cUIScroll"],function(e,t,n,r){var i="TipsLayer";if(n.hasWidget(i))return;var s=new e.Class(t.Layer,{__propertys__:function(){this.showTitle=!0,this.contentDom,this.title="",this.body="",this.mask=new t.Mask({classNames:[t.config.prefix+"opacitymask"]});var e=this;this.mask.addEvent("onShow",function(){this.setzIndexTop(-1),$(window).bind("resize",this.onResize),this.onResize();var t=this;this.root.bind("click",function(){t.hide(),t.root.unbind("click"),e.hide()})}),this._loadButtonHtml=function(){if(this.buttons.length==0)return"";var e=['<div class="cui-roller-btns">'];return $.each(this.buttons,function(t,n){var r="cui-btns-sure";n.type=="cancle"&&(r="cui-btns-cancle"),e.push('<div class="cui-flexbd '+r+'">'+n.text+"</div>")}),e.push("</div>"),e.join("")},this.html=""},initialize:function($super,e){$super({onCreate:function(){},onShow:function(){this.title=e.title||"",this.buttons=e.buttons||[],this.html=e.html||"",typeof e.showTitle!="undefined"&&(this.showTitle=e.showTitle),this.html=$(this.html),this.btns=$(this._loadButtonHtml()),this.header=e.header,this.footer=e.footer,this.buttons=e.buttons||[],this.contentDom.html(['<div class="cui-pop-box">','<div class="cui-hd">'+this.title+'<div class="lab-close-area"><span class="cui-top-close">×</span></div></div>','<div class="cui-bd" style="overflow: hidden; position: relative; background-color: #fafafa; width: 100%;">',"</div>","</div>"].join("")),e.width&&this.contentDom.find(".cui-pop-box").css({width:e.width+"px"}),this.mask.show(),this.reposition(),this.closeDom=this.contentDom.find(".cui-top-close").parent(),this.body=this.contentDom.find(".cui-bd"),this.header&&this.body.before($(this.header)),this.footer&&this.body.after($(this.footer)),this.html.length>1&&(this.html=$('<div style="width: 100%;"></div>').append(this.html)),this.html.css("background-color","white"),this.body.append(this.html);var t=parseInt($(window).height()*.7),n=this.html.height(),i=n;e.height&&(i=e.height),i>t&&(i=t),this.body.css({height:i+"px"}),this.showTitle||this.contentDom.find(".cui-hd").hide();var s={wrapper:this.body,scroller:this.html};$.extend(s,e),i<n&&(this.s=new r(s)),this.contentDom.find(".cui-pop-box").append(this.btns);var o=this;this.closeDom.on("click",function(){o.hide()}),$.each(this.btns,function(e,t){var n=o.buttons[e].click;$(t).on("click",function(){n.call(o)})}),this.setHtml=function(e){o.body.html(e)};var u=""},onHide:function(){this.s&&this.s.destroy(),this.mask.hide(),this.closeDom.off("click"),this.root.remove(),this.mask.root.remove()}})}});n.register({name:i,fn:s})}),define("cWidgetInputValidator",["cBase","cUICore","cWidgetFactory","cUtility","libs"],function(cBase,cUICore,WidgetFactory,util){var validate=util.validate,WIDGET_NAME="InputValidator";if(WidgetFactory.hasWidget(WIDGET_NAME))return;var InputValidator=new cBase.Class(cUICore.Layer,{__propertys__:function(){this.TypeMsg={idCard:"身份证格式错误",num:"不是数字",email:"email格式错误",phone:"手机格式错误",chinese:"不是中文",password:"密码格式错误"},this.validatorArr={}},initialize:function($super,e){e=e||{},$super(e),this.requredMsg=e.requredMsg||"该项必填",this.rangeMsg=e.rangeMsg||"您输入的字符范围错误",this.regexMsg=e.regexMsg||"格式错误",this.compareMsg=e.compareMsg||"对比不成立",this.els=e.els||$(".formValidate"),this.msgPosition=e.msgPosition||"bottom",this.isShowMsg=e.isShowMsg||!1,this.init()},init:function(){for(var e=0,t=this.els.length;e<t;e++){var n=$(this.els[e]);this.initItem(n)}},initItem:function(el,insertType){var scope=this;typeof el=="string"&&(el=$("#"+el));var cfg=el.attr("data-cfg");if(!cfg||cfg.length==0)return!1;cfg=eval("("+cfg+")"),cfg.check!==!1&&(cfg.check=!0),insertType&&(cfg.check=!0);if(cfg.check===!1)return!1;cfg.id=el.attr("id")||"_"+Math.random(),cfg.el=el,cfg.validate=function(){scope.funcValidate(cfg)},this.validatorArr[cfg.id]=cfg;var s=""},validate:{requred:function(e){return e==""?!1:!0},regex:function(e,t){return t.test(e)?!0:!1},range:function(e,t){var n=t.split("|");return n.length!=3?(0,!1):this["_"+n[0]](e,n[1],n[2])},_num:function(e,t,n){return e=parseInt(e),e>t&&e<n?!0:!1},_str:function(e,t,n){return e.length>t&&e.length<n?!0:!1},_date:function(e,t,n){return!0},compare:function(e,t){var n=t.split("|");return n.length!=3?(0,!1):this["_c"+n[0]](e,$("#"+n[1]).val(),n[2])},_cnum:function(e,t,n){e=parseInt(e),t=parseInt(t);if(n=="<"){if(e<t)return!0}else if(n=="="){if(e==t)return!0}else if(n==">"&&e>t)return!0;return!1},_cstr:function(e,t,n){e=e.length,t=t.length;if(n=="<"){if(e<t)return!0}else if(n=="="){if(e==t)return!0}else if(n==">"&&e>t)return!0;return!1},_cdate:function(e,t,n){return!0}},funcValidate:function(e){if(this.validatorArr[e.id]===undefined)return!1;var t=e.el.val()||e.el.html().replace(/(^\s*)|(\s*$)/g,""),n={};n.isPass=!0,n.el=e.el,n.id=e.id,n.errorItem={};if(this.validatorArr[e.id].check===!1)return this.validatorArr[e.id].result=n,!1;e.requred&&(n.errorItem.requred=this.validate.requred(t),n.errorItem.requred===!0?n.isPass=!0:(n.isPass=!1,n.msg=this.requredMsg));if(n.isPass&&typeof e.type=="string"&&t!=""){var r=e.type;r="is"+r.substr(0,1).toUpperCase()+r.substr(1,r.length),n.errorItem[e.type]=validate[r](t),n.errorItem[e.type]===!0?n.isPass=!0:(n.isPass=!1,n.msg=this.TypeMsg[e.type]||"格式错误")}n.isPass&&e.regexObj&&t!=""&&(n.errorItem.regex=this.validate.regex(t,e.regexObj),n.errorItem.regex===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.regexMsg)),n.isPass&&e.rangeObj&&t!=""&&(n.errorItem.range=this.validate.range(t,e.rangeObj),n.errorItem.range===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.rangeMsg)),n.isPass&&e.compareObj&&t!=""&&(n.errorItem.compare=this.validate.compare(t,e.compareObj),n.errorItem.compare===!0?n.isPass=!0:(n.isPass=!1,n.msg=e.errorMsg||this.compareMsg)),this.validatorArr[e.id].result=n},showMsg:function(e){this.msgTimer&&clearTimeout(this.msgTimer);var t=$("body");for(var n=0,r=e.length;n<r;n++){var i=$("#"+e[n].id+"Tips");if(!i[0]){i=$('<div class="validateTips validateError" id="'+e[n].id+'Tips"><div class="triangle_icon"><div class="before"></div><div class="after"></div></div>'+e[n].msg+"</div>");var s=e[n].el.offset(),o=parseInt(e[n].el.height()),u=parseInt(e[n].el.width()),a=s.left,f=s.top;this.msgPosition=="bottom"?(i.addClass("posBottom"),f+=o+4):this.msgPosition=="right"?(i.addClass("posRight"),a+=u+6):this.msgPosition=="top"&&(i.addClass("posTop"),f+=o*-1-8),i.css({left:a,top:f}),t.append(i)}}this.msgTimer=setTimeout(function(){$(".validateTips").remove()},3e3)},validateAll:function(e,t,n){for(var r in this.validatorArr){var i=this.validatorArr[r];i.validate()}var s=this.getValidatorState();s===!0?typeof e=="function"&&e.call(n):(this.isShowMsg&&this.showMsg(s),typeof t=="function"&&t.call(n,s))},removeValidator:function(e){if(e&&this.validatorArr[e]){var t=this.validatorArr[e];this.validatorArr[e].check=!1;var n=""}},addValidator:function(e){typeof e=="string"&&(e=$("#"+e)),this.initItem(e,"add")},getValidatorState:function(){var e=!0,t=[];for(var n in this.validatorArr)this.validatorArr[n].result.isPass==0&&(e=!1,t.push(this.validatorArr[n].result));return e?!0:t}});WidgetFactory.register({name:WIDGET_NAME,fn:InputValidator})}),define("cWidgetPublisher",["cUtility","cWidgetFactory","CommonStore"],function(e,t,n){var r="Publisher",i=!1;if(t.hasWidget(r))return;var s=s||{},o={non_member_login:function(e){u.non_member_login=function(t){e.callback(t)}},locate:function(e){u.locate=function(t){try{var n=t;typeof t=="string"&&(n=JSON.parse(t)),e.success(n)}catch(r){e.error(!0,"定位失败")}}},login:function(e){u.login=function(t){typeof t=="string"&&(t=JSON.parse(t));var r=n.UserStore.getInstance(),i=r.getUser();r.setUser(t.data);var s=n.HeadStore.getInstance(),o=s.get();o.auth=t.data.Auth,s.set(o),typeof e.success=="function"&&e.success()}},back:function(e){u.back=e.callback},commit:function(e){u.commit=e.callback}},u={refresh:function(){window.location.reload()}},a={non_member_login:function(e){typeof u.non_member_login=="function"&&u.non_member_login(e)},locate:function(e){typeof u.locate=="function"&&u.locate(e)},login:function(e){typeof u.login=="function"&&u.login(e)},back:function(){typeof u.back=="function"&&u.back()},commit:function(){typeof u.commit=="function"&&u.commit()}},f=function(e){var t=e.replace(/\+/g,"%20");return window.decodeURIComponent(t)},l={callback:function(e){if(i)return;var t=e;if(typeof e=="string")try{t=JSON.parse(window.decodeURIComponent(e))}catch(n){setTimeout(function(){0},0)}document.activeElement.blur(),typeof a[t.tagname]=="function"&&a[t.tagname](t.param)}},c=function(e){for(var t in l)e[t]=e[t]||l[t]};s.setApi=function(){if(e.isInApp()){var t=window.app=window.app||{};c(t)}},s.register=function(t){e.isInApp()&&typeof o[t.name]=="function"&&o[t.name](t)},s.lock=function(){e.isInApp()&&(i=!0)},s.unlock=function(){e.isInApp()&&(i=!1)},s.requestEntryInfo=function(){e.isInApp()&&app_entry()},s.requestAnomyousUser=function(){e.isInApp()&&app_non_member_login()},s.monitor=function(t){e.isInApp()&&app_log_event(t)},s.sendHotelInfo=function(t,n,r,i){e.isInApp()&&app_go_to_hotel_detail(t,n,r,i)},s.requestAutoLogin=function(){e.isInApp()&&app_member_auto_login()},t.register({name:r,fn:s})}),define("cWidgetAbstractCalendar",["cCoreInherit","cUIAbstractView","cWidgetFactory"],function(e,t,n){"user strict";var r="Abstract.Calendar";if(n.hasWidget(r))return;var i=new e.Class(t,{__propertys__:function(){this.CONSTANT={CALENDAR_CHINESE_LUNAR_INFO:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],CALENDAR_CHINESE_WEEKDAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],CALENDAR_CHINESE_NUMBER:["日","一","二","三","四","五","六","七","八","九","十"],CALENDAR_CHINESE_CARRT:["初","十","廿","卅","　"],CALENDAR_CHINESE_HOLIDAY:{1230:"除夕","0101":"初一","0115":"元宵","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},CALENDAR_COMMON_HOLIDAY:{"0101":"元旦","0214":"情人节","0501":"五一",1001:"国庆",1225:"圣诞节"},CALENDAR_WEEKDAY_NAME:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},CALENDAR_WEEKDAY_SHORTNAME:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},CALENDAR_WEEKDAY_SHORTNAME2:{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},CALENDAR_INIT_DATE:1,CALENDAR_MONTH:5,INIT_DATE_TIME:{H:0,M:0,S:0,MS:0},CALENDAR:"calendar"}},initialize:function($super,e){this.isLeapYear(this.startMonth.getFullYear())||this.isLeapYear(this.startMonth.getFullYear()-1)?(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]):(this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0405"]="清明",delete this.CONSTANT.CALENDAR_COMMON_HOLIDAY["0404"]),$super(e)},setCalendarDate:function(e){this.dateObj=e!=="undefined"?e:new Date,this.SY=this.dateObj.getFullYear(),this.SM=this.dateObj.getMonth(),this.SD=this.dateObj.getDate(),this.lunarInfo=this.CONSTANT.CALENDAR_CHINESE_LUNAR_INFO},leapMonth:function(e){return this.lunarInfo[e-1900]&15},monthDays:function(e,t){return this.lunarInfo[e-1900]&65536>>t?30:29},leapDays:function(e){return this.leapMonth(e)?this.lunarInfo[e-1900]&65536?30:29:0},lYearDays:function(e){var t=348;for(var n=32768;n>8;n>>=1)t+=this.lunarInfo[e-1900]&n?1:0;return t+this.leapDays(e)},Lunar:function(e){var t,n=0,r=0,i={},s=new Date(1900,0,31),o=(e-s)/864e5;i.dayCyl=o+40,i.monCyl=14;for(t=1900;t<2050&&o>0;t++)r=this.lYearDays(t),o-=r,i.monCyl+=12;o<0&&(o+=r,t--,i.monCyl-=12),i.year=t,i.yearCyl=t-1864,n=this.leapMonth(t),i.isLeap=!1;for(t=1;t<13&&o>0;t++)n>0&&t===n+1&&i.isLeap===!1?(--t,i.isLeap=!0,r=this.leapDays(i.year)):r=this.monthDays(i.year,t),i.isLeap===!0&&t===n+1&&(i.isLeap=!1),o-=r,i.isLeap===!1&&i.monCyl++;return o===0&&n>0&&t===n+1&&(i.isLeap?i.isLeap=!1:(i.isLeap=!0,--t,--i.monCyl)),o<0&&(o+=r,--t,--i.monCyl),i.month=t,i.day=o+1,i},cDay:function(e,t){var n=this.CONSTANT.CALENDAR_CHINESE_NUMBER,r=this.CONSTANT.CALENDAR_CHINESE_CARRT,i;e>10?i="十"+n[e-10]:i=n[e],i+="月";switch(t){case 10:i+="初十";break;case 20:i+="二十";break;case 30:i+="三十";break;default:i+=r[Math.floor(t/10)],i+=n[t%10]}return i},solarDay2:function(e){this.setCalendarDate(e);var t=new Date(this.SY,this.SM,this.SD),n=this.Lunar(t),r=(n.month>=10?n.month:"0"+n.month)+""+(n.day>=10?n.day:"0"+n.day);return n=null,r},weekday:function(){var e=this.CONSTANT.CALENDAR_CHINESE_WEEKDAY;return e[this.dateObj.getDay()]},YYMMDD:function(){var e=[this.SY,"年",this.SM+1,"月",this.SD,"日"];return e.join("")},_isDate:function(e){var t=Object.prototype.toString.call(e);return t==="[object Date]"},_objectKey:function(e){var t=[];if(e)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isLeapYear:function(e){return e===0?!1:e%4!=0?!1:e%100==0&&e%400!=0?!1:!0}});n.register({name:r,fn:i})}),define("cWidgetCalendar",["cCoreInherit","cUtility","cUIBase","cUIHashObserve","cWidgetFactory","cWidgetAbstractCalendar"],function(e,t,n,r,s){"user strict";var o="Calendar";if(s.hasWidget(o))return;var u=s.create("Abstract.Calendar"),a=new e.Class(u,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.DAYTITLE2=this.CONSTANT.CALENDAR_WEEKDAY_NAME,this.addClass(n.config.prefix+this.CONSTANT.CALENDAR),this.startMonth=t.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=t.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.dateVal={},this.titledom,this.leftback,this.cls=[this.CONSTANT.CALENDAR],this.title,this.noabsolute=!1,this.curDate,this.dateDoms={},this.html,this.clickEnabled=!0,this.msg="",this.callback=function(){},this.hashObserve=new r({hash:this.id,callback:function(){this._hide()},scope:this}),this.animatSwitch=!1,this.timeNum=250},initialize:function($super,e){this.setOption(function(e,t){switch(e){case"Months":case"timeNum":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":case"msg":case"clickEnabled":case"animatSwitch":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(0,0,0,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),$super(e),this.buildEvent()},selectedDate:function(){var e;for(var t in this.date)e=this.root.find("."+this.buildSelectCls(t))[0],this.dateDoms[t]=e,this.dateVal[t]=this.date[t].value;!this.curDate&&(this.curDate=t)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},buildElement:function(){this.titledom=this.root.find("header"),this.leftback=this.root.find("#js_return")},onCreate:function(){this.selectedDate(),this.buildElement(),this.buildElementsEvent(),this.noabsolute||this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){this.root.css({top:0,left:0,width:"100%"}),$(window).bind("resize",this.windowResizeHander),this.setzIndexTop(),this.hashObserve.start();if(this.animatSwitch){var e=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},e.timeNum,function(){e.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var e=n.getPageSize();this.root.css({width:$(window).width(),height:e.height})},onHide:function($super){$(window).unbind("resize",this.windowResizeHander),this.hashObserve.end()},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var e=this;this.clickEnabled&&this.root.delegate(".cui_cld_daybox li","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var n=b.attr("data-date");if(!n)return;n=t.Date.parse(n).valueOf(),e.isAccordBound(n)&&e._setDate(n,b)}),this.root.delegate("#js_return","click",$.proxy(function(){this._hide()},this))},_hide:function(){if(this.animatSwitch){var e=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},e.timeNum,function(){e.hide()})})}else this.hide()},isAccordBound:function(e){var t=this.date[this.curDate];if(!t.bound)return!0;if(!t.bound.rules||!t.bound.error)return!0;var n=t.bound.rules,r;for(var i in n){r=typeof n[i]=="string"?this.dateVal[n[i]]:this._isDate(n[i])&&n[i],e.setHours(0,0,0,0);if(r){r.setHours(0,0,0,0);switch(i){case"<":if(!(e<r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">":if(!(e>r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case"<=":if(!(e<=r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">=":if(!(e>=r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1}}}return!0},_setDate:function(e,n){var r=this.root.find("."+this.buildSelectCls(this.curDate));r.each($.proxy(function(e,n){var i=$(n);i.html(this.formatTitle(t.Date.parse(r.attr("data-date")).valueOf())),i.removeClass(this.buildSelectCls(this.curDate)),i.removeClass(this.buildSelectCls())},this)),this.dateDoms[this.curDate]=n;var i=$(n),s,o=this,u=this.date[this.curDate].title;typeof u=="function"?s=this.formatTitle2(u):s=this.formatTitle,i.html(s.call(this,e)),i.removeClass("cui_cld_dayfuture"),i.removeClass("cui_cld_day_hint"),i.addClass("cui_cld_day_havetxt"),i.addClass(this.buildSelectCls(this.curDate)),i.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=e,this.callback&&this.callback.call(this,e,this.curDate,this.dateVal,this.getDateInfo(e),this.calendarend)},setCurDate:function(e){this.curDate=e,this.create();var t=this.getCurTitle();this.titledom.html(t)},getEndDate:function(){return this.calendarend},buildSelectCls:function(e){return e?"selected-"+e:"cui_cld_daycrt"},getCurTitle:function(){var e=this.date[this.curDate],t="";return e&&(t=e.headtitle||this.title),t||this.title},createCalendar:function(){var e=[],n,r=this.getCurTitle(),i=t.isInApp(),s=i?' style=" margin-top: 0"':"";this.title&&!i&&e.push(["<header>","<h1>"+r+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),e.push(['<article class="cont_wrap"',s,'><div class="cui_cldwrap">'].join("")),e.push(this.createWeek(i));for(var o=0;o<this.Months;o++)n=new Date(this.startMonth),n.setMonth(n.getMonth()+o),e.push(this.createMonth(n));return e.push(["</div></atricle>"].join("")),e.join("")},createWeek:function(e){var t=e?" cui_cldweek_top0":"",n=['<ul class="cui_cldweek'+t+'">'];this.msg&&n.push('<p  class="cui_cldmsg">'+this.msg+"</p>");for(i in this.SDAYTITLE)n.push("<li>"+this.SDAYTITLE[i]+"</li>");return n.push("</ul>"),n.join("")},createMonth:function(e){var n=this.calcStructData(e),r=[],i;r.push('<section class="cui_cldunit">'),r.push('<h1 class="cui_cldmonth">'+t.Date.format(e,"Y年n月")+"</h1>"),r.push('<ul class="cui_cld_daybox">');var s,o,u=n.days.length,a=this;for(var i=0;i<u;i++){o=n.days[i].length;for(var f=0;f<o;f++){s={};var l=n.days[i][f];if(l){var c=this.validStartDate||n.start,h=this.validEndDate||n.end;l>=c&&l<=h?s.valid=!0:(s.cui_cld_daypass=!0,s.invalid=!0)}else s.cui_cld_dayfuture=!0,s.invalid=!0;var p,d=this.getDateInfo(l);if(d){p=d.daytitle||d.holiday||d.chineseday;if(p){s.cui_cld_day_havetxt=!0;if(d.holiday||d.chineseday)s.cui_cld_day_hint=!0;p="<em>"+d.date+"</em><i>"+p+"</i>"}else p="<em>"+d.date+"</em>"}else p="";if(this.date)for(var v in this.date)l&&t.Date.format(this.dateVal[v]||this.date[v].value,"Y-m-d")==t.Date.format(l,"Y-m-d")&&(delete s.cui_cld_dayfuture,delete s.cui_cld_day_hint,s.cui_cld_day_havetxt=!0,s[this.buildSelectCls()]=!0,s[this.buildSelectCls(v)]=!0,p=this.date[v].title(l,function(){return d.daytitle||d.holiday||d.chineseday||d.date}),p="<em>"+p+"</em>");r.push('<li data-date="'+t.Date.format(l,"Y-m-d")+'" '+(s?' class="'+this._objectKey(s).join(" ")+'"':"")+">"+p+"</li>")}}return r.push("</ul></section>"),r.join("")},formatTitle:function(e){if(!e)return"";var t=this.getDateInfo(e);return t.holiday||t.chineseday||t.daytitle||t.date},getDateInfo:function(e){if(!e)return;var n=t.getServerDate(),r=new Date(e);r.setHours(1,1,1,0),n.setHours(1,1,1,0);var i=(r-n)/864e5,s={};t.Date.format(n,"Ymd")==t.Date.format(e,"Ymd")?s.daytitle="今天":i==1?s.daytitle="明天":i==2?s.daytitle="后天":s.daytitle="";var o=this.solarDay2(e);this.chineseHoliday[o]?s.chineseday=this.chineseHoliday[o]:s.chineseday="";var u=t.Date.format(e,"md");return this.holiday[u]?s.holiday=this.holiday[u]:s.holiday="",s.week=this.DAYTITLE[e.getDay()],s.week2=this.DAYTITLE2[e.getDay()],s.date=t.Date.format(e,"j"),s},formatTitle2:function(e){return $.proxy(function(t){return e(t,$.proxy(function(e){return this.formatTitle(e)},this))},this)},calcStructData:function(e){var t=new Date(e),n=new Date(e);t.setDate(1),t.setHours(0,0,0,0);var r=t.getDay();n.setMonth(n.getMonth()+1,1),n.setHours(-24,0,0,0);var i=n.getDay(),s=(n.getDate()+(r+(6-i)))/7,o=[],u;for(var a=0,f=0;a<s;a++){o[a]=[];for(var l=0;l<7;l++)if(a==0&&l<r)o[a].push("");else{u=new Date(t),u.setDate(u.getDate()+f);if(u>n)break;o[a].push(u),f++}}return this.calendarend=n,{start:t,end:n,days:o,loops:s}},setDate:function(e){this.create();for(var n in e)if(this.date[n]&&this._isDate(e[n])){e[n].setHours(0,0,0,0),this.date[n].value=e[n],this.dateVal[n]=e[n];var r=this.root.find("."+this.buildSelectCls(n));if(r.length){var i=t.Date.parse(r.data("date")).valueOf();r.removeClass(this.buildSelectCls(n)),r.removeClass(this.buildSelectCls()),r.html(this.formatTitle(i))}var s=this.root.find('[data-date="'+t.Date.format(e[n],"Y-m-d")+'"]');s.each($.proxy(function(t,r){r=$(r),r.hasClass("valid")&&(r.addClass(this.buildSelectCls(n)),r.addClass(this.buildSelectCls()),r.html(this.formatTitle2(this.date[n].title)(e[n])))},this)),this.dateDoms[n]=s}},addDate:function(e,n){this.create();var r,i,s;for(var o in e)if(!this.date[o]||n){this.date[o]=e[o],r=this.date[o]&&this.date[o].value,i=this.date[o]&&this.date[o].title,i=typeof i=="function"?this.formatTitle2(i):$.proxy(this.formatTitle,this);var u=this.root.find("."+this.buildSelectCls(o));u.length&&(u.removeClass(this.buildSelectCls(o)),u.removeClass(this.buildSelectCls())),r&&(s=this.root.find('[data-date="'+t.Date.format(r,"Y-m-d")+'"]'),s.each($.proxy(function(e,t){t=$(t),t.hasClass("valid")&&(t.html(i(r)),t.addClass(this.buildSelectCls(o)),t.addClass(this.buildSelectCls()),this.dateVal[o]=r)},this)))}},removeDate:function(e){this.create();for(var n=0,r,i=e.length;n<i;n++){r=e[n];if(this.date[r]){var s=this.root.find("."+this.buildSelectCls(r));s.each($.proxy(function(e,n){var i=$(n);i.removeClass(this.buildSelectCls(r)),i.removeClass(this.buildSelectCls()),i.html(this.formatTitle(t.Date.parse(i.data("date")).valueOf()))},this)),delete this.date[r],delete this.dateVal[r]}}},getDate:function(){var e={};for(var t in this.date)e[t]=this.date[t].value;return _.isEmpty(this.dateVal)?_.isEmpty(e)?{}:e:this.dateVal},update:function(e){this.setOption(function(e,t){switch(e){case"Months":case"date":case"curDate":case"root":case"callback":case"title":case"noabsolute":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(0,0,0,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),this.readOption(e),this.create(),this.root.html(this.createCalendar()),this.trigger("onChange")}});s.register({name:o,fn:a})}),define("cWidgetCalendarPrice",["cCoreInherit","cUtility","cUIBase","cWidgetFactory","cWidgetAbstractCalendar","cWidgetGuider"],function(e,t,n,r){"user strict";var s="Calendar.Price",o=0;if(r.hasWidget(s))return;var u=r.create("Guider"),a=r.create("Abstract.Calendar"),f=new e.Class(a,{__propertys__:function(){this.chineseHoliday=this.CONSTANT.CALENDAR_CHINESE_HOLIDAY,this.holiday=this.CONSTANT.CALENDAR_COMMON_HOLIDAY,this.DAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME,this.SDAYTITLE=this.CONSTANT.CALENDAR_WEEKDAY_SHORTNAME2,this.addClass(n.config.prefix+this.CONSTANT.CALENDAR),this.showChineseHoliday=!0,this.showHoliday=!0,this.startMonth=t.getServerDate(),this.startMonth.setDate(this.CONSTANT.CALENDAR_INIT_DATE),this.Months=this.CONSTANT.CALENDAR_MONTH,this.validStartDate=t.getServerDate(),this.validStartDate.setHours(this.CONSTANT.INIT_DATE_TIME.H,this.CONSTANT.INIT_DATE_TIME.M,this.CONSTANT.INIT_DATE_TIME.S,this.CONSTANT.INIT_DATE_TIME.MS),this.validEndDate,this.date,this.onlyread=!1,this.dateVal={},this.cls=[this.CONSTANT.CALENDAR],this.curDate,this.dateDoms={},this.html,this.windowResizeHander,this.animatSwitch=!1,this.lowerPriceClass="",this.holidayClass="",this.todayClass="",this.lowestpriceMap={},this._formatPrice=function(e,t){return t(e)},this.callback=function(){},this.title=!1,this.returnCallback=function(){}},initialize:function($super,e){this.setOption(function(e,t){switch(e){case"Months":case"curDate":case"root":case"callback":case"onlyread":case"title":case"returnCallback":case"showChineseHoliday":case"animatSwitch":case"lowerPriceClass":case"holidayClass":case"todayClass":this[e]=t;break;case"date":if(t)for(var n in t)this.dateVal[n]=t[n].value;this[e]=t;break;case"formatPrice":this._formatPrice=t;break;case"showHoliday":this[e]=t;break;case"validDates":this[e]=t;break;case"cls":this.cls.push(t);break;case"validStartDate":case"validEndDate":this[e]=t,this[e].setHours(1,1,1,0);break;case"startMonth":this[e]=t,this[e].setDate(1)}}),$super(e),this.buildEvent(),this.lowerPriceClass&&this.validDates&&this.sortMonthPrice()},sortMonthPrice:function(){this.lowestpriceMap={};var e=this;$.each(this.validDates,function(t,n){var r=e.validDates[t].date;if(typeof e.lowestpriceMap[r.getFullYear().toString()+r.getMonth().toString()]=="undefined"){e.lowestpriceMap[r.getFullYear().toString()+r.getMonth().toString()]=e.validDates[t].price;return}if(e.lowestpriceMap[r.getFullYear().toString()+r.getMonth().toString()]>e.validDates[t].price){e.lowestpriceMap[r.getFullYear().toString()+r.getMonth().toString()]=e.validDates[t].price;return}})},selectedDate:function(){var e;for(var t in this.date)e=this.root.find("."+this.buildSelectCls(t))[0],this.dateDoms[t]=e,this.dateVal[t]=this.date[t].value;!this.curDate&&(this.curDate=t)},buildEvent:function(){this.addEvent("onCreate",this.onCreate),this.addEvent("onShow",this.onShow),this.addEvent("onHide",this.onHide)},onCreate:function(){this.selectedDate(),this.buildElementsEvent(),this.root.css({position:"absolute"}),this.windowResizeHander=$.proxy(this.position,this)},onShow:function(){$(window).bind("resize",this.windowResizeHander),this.root.css("z-index","1000"),this.windowResizeHander(),setTimeout(this.windowResizeHander,100);var e=this;u.apply({hybridCallback:function(){e.root.find(".cui_cldweek").css("top","0")},callback:function(){}});if(this.animatSwitch){var e=this;window.scrollTo(0,0),this.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)"},e.timeNum,function(){e.windowResizeHander()})})}},position:function(){this.root.css({left:"0px",top:"0px"});var e=n.getPageSize();this.root.css({width:$(window).width(),height:e.height})},onHide:function(){$(window).unbind("resize",this.windowResizeHander)},createHtml:function(){return this.createCalendar()},buildElementsEvent:function(){var e=this;this.root.delegate("li.valid","click",function(){b=$(this),b.hasClass("valid")||(b=b.closest(".valid"));var n=t.Date.parse(b.attr("data-date")).valueOf();e.isAccordBound(n)&&e._setDate(n,b)}),this.root.delegate("#js_return","click",$.proxy(function(){this.returnCallback&&this.returnCallback(),this.hide()},this))},_hide:function(){if(this.animatSwitch){var e=this;this.root.animate({"-webkit-transform":"translate(0px, 0px) translateZ(0px)",top:"0px"},0,function(){e.root.animate({"-webkit-transform":"translate(100%, 0px) translateZ(0px)"},e.timeNum,function(){e.hide()})})}else this.hide()},isAccordBound:function(e){var t=this.date[this.curDate];if(!t.bound)return!0;if(!t.bound.rules||!t.bound.error)return!0;var n=t.bound.rules,r;for(var i in n){r=typeof n[i]=="string"?this.dateVal[n[i]]:this._isDate(n[i])&&n[i];switch(i){case"<":if(!(e<r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">":if(!(e>r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case"<=":if(!(e<=r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1;break;case">=":if(!(e>=r))return t.bound.error.call(this,e,this.curDate,this.dateVal),!1}}return!0},_setDate:function(e,t){if(this.onlyread)return;if(this.dateDoms[this.curDate]){var n=$(this.dateDoms[this.curDate]);n.removeClass(this.buildSelectCls(this.curDate)),n.removeClass(this.buildSelectCls())}this.dateDoms[this.curDate]=t;var r=$(t),i,s=this,o=this.date[this.curDate].title;typeof o=="function"?i=function(e){return o(e,function(e){return s.formatTitle(e)})}:i=this.formatTitle;var u=parseFloat(parseInt((t.attr("data-price")||0)*100)/100),a=$.proxy(this.formatPrice,this);r.addClass(this.buildSelectCls(this.curDate)),r.addClass(this.buildSelectCls()),this.dateVal[this.curDate]=e;var f=$.grep(this.validDates,function(t,n){var r=t.date.valueOf()==e.valueOf();return r}),l=r.html().replace(/^\d+/mg,"");isNaN(l)===!1&&(l=this.DAYTITLE[e.getDay()]),this.callback&&this.callback.call(this,e,u,l,this.dateVal)},setCurDate:function(e){this.curDate=e},buildSelectCls:function(e){return e?"selected-"+e:"cui_cld_daycrt"},createCalendar:function(){var e=[],t;this.title&&e.push(["<header>","<h1>"+this.title+'</h1><i class="returnico i_bef" id="js_return"></i>',"</header>"].join("")),e.push(['<article class="cont_wrap" style="margin: 0 0 0">','<div class="cui_cldwrap">'].join("")),e.push(this.createWeek());for(var n=0;n<this.Months;n++)t=new Date(this.startMonth),t.setMonth(t.getMonth()+n),e.push(this.createMonth(t));return e.push(["</div></atricle>"].join("")),e.join("")},createWeek:function(){var e=['<ul class="cui_cldweek">'];for(i in this.SDAYTITLE)e.push("<li>"+this.SDAYTITLE[i]+"</li>");return e.push("</ul>"),e.join("")},createMonth:function(e){var n=this.calcStructData(e),r=[],i;r.push('<section class="cui_cldunit">'),r.push('<h1 class="cui_cldmonth">'+t.Date.format(e,"Y年n月")+"</h1>"),r.push('<ul class="cui_cld_daybox">');var s,u,a=n.days.length,f=this;0;for(var i=0;i<a;i++){u=n.days[i].length;for(var l=0;l<u;l++){o++,s={};var c=n.days[i][l];if(c){var h=this.validStartDate||n.start,p=this.validEndDate||n.end;c>=h&&c<=p?(s.cui_cld_dayfuture=!0,s.valid=!0):(s.cui_cld_daypass=!0,s.invalid=!0)}else s.cui_cld_dayfuture=!0,s.invalid=!0;var d="",v="";if(this.validDates&&c){var m=$.grep(this.validDates,function(e,t){return e.date.getFullYear()===c.getFullYear()&&e.date.getMonth()===c.getMonth()&&e.date.getDate()===c.getDate()?!0:!1});m.length===0?(delete s.valid,s.invalid=!0):(s.cui_cld_day_havetxt=!0,d=m[0].price,v=c.getFullYear().toString()+c.getMonth().toString())}var g=this.formatTitle;if(this.date)for(var y in this.date)this.dateVal[y]&&s.valid&&t.Date.format(this.dateVal[y]||this.date[y].value,"Y-m-d")==t.Date.format(n.days[i][l],"Y-m-d")&&(delete s.cui_cld_dayfuture,delete s.cui_cld_day_hint,s[this.buildSelectCls()]=!0,s[this.buildSelectCls(y)]=!0,g=function(e){return function(t){return e(t,function(e){return f.formatTitle(e)})}}(this.date[y].title));var b=$.proxy(this.formatPrice,this),w=this._formatPrice(d,b,!!s.valid);d&&this.lowerPriceClass&&v&&this.lowestpriceMap[v]===d&&(w=w.split("<i>").join('<i class="'+this.lowerPriceClass+'">'));var E=g.call(this,c);if(c&&E!=c.getDate()){var S=t.getServerDate(),x=new Date(c);x.setHours(1,1,1,0),S.setHours(1,1,1,0);var T=(x-S)/864e5;T<=2?E='<em class="'+this.todayClass+'">'+E+"</em>":this.holidayClass?E='<em class="'+this.holidayClass+'">'+E+"</em>":E="<em>"+E+"</em>"}else E="<em>"+E+"</em>";r.push('<li data-price="'+d+'" data-date="'+t.Date.format(c,"Y-m-d")+'" '+(s?' class="'+this._objectKey(s).join(" ")+'"':"")+">"+E+w+"</li>")}}return r.push("</ul></section>"),r.join("")},formatPrice:function(e){return e>0?"<i>&yen;"+e+"</i>":""},formatTitle:function(e){if(!e)return"";var n=t.getServerDate();if(t.Date.format(n,"Ymd")==t.Date.format(e,"Ymd"))return"今天";var r=new Date(e);r.setHours(1,1,1,0),n.setHours(1,1,1,0);var i=(r-n)/864e5;if(i==1)return"明天";if(i==2)return"后天";if(this.showChineseHoliday===!0){var s=this.solarDay2(e);if(this.chineseHoliday[s])return this.chineseHoliday[s]}if(this.showHoliday==1){var o=t.Date.format(e,"md");if(this.holiday[o])return this.holiday[o]}return t.Date.format(e,"j")},calcStructData:function(e){var t=new Date(e),n=new Date(e);t.setDate(1),t.setHours(0,0,0,0);var r=t.getDay();n.setMonth(n.getMonth()+1,1),n.setHours(-24,0,0,0);var i=n.getDay(),s=(n.getDate()+(r+(6-i)))/7,o=[],u;for(var a=0,f=0;a<s;a++){o[a]=[];for(var l=0;l<7;l++)if(a==0&&l<r)o[a].push("");else{u=new Date(t),u.setDate(u.getDate()+f);if(u>n)break;o[a].push(u),f++}}return{start:t,end:n,days:o,loops:s}},setDate:function(e){for(var n in e)if(this.date[n]&&this._isDate(e[n])){e[n].setHours(1,1,1,0),this.date[n].value=e[n],this.dateVal[n]=e[n];var r=$(this.dateDoms[n]);r.removeCls(this.buildSelectCls(n)),r.removeCls(this.buildSelectCls());var i=$(this.root.query('[data-date="'+t.Date.format(e[n],"Y-m-d")+'"]')[0]);i.hasClass("valid")&&(i.addClass(this.buildSelectCls(n)),i.addClass(this.buildSelectCls())),this.dateDoms[n]=i}},getDate:function(){return this.dateVal}});r.register({name:s,fn:f})}),define("cWidgetSlide",["cBase","cUICore","cWidgetFactory","libs"],function(e,t,n){var r="Slide";if(n.hasWidget(r))return;var i=0,s=new e.Class({__propertys__:function(){this.images=[],this.index=1,this.delay=3,this.defaultIndex,this.autoplay=!1,this.root,this.imageinter,this.imageouter,this.navbox,this.navs,this.navinter,this.container,this.interWidth,this.itemWidth,this.onchange=function(){},this.onerror=function(){},this.loop=!0,this.ENUM_STATE_EMPTY=0,this.ENUM_STATE_NOTEMPTY=1,this.state=this.ENUM_STATE_EMPTY,this.notimage="",this.notimagedom,this.setTimeoutResoure,this.isMove=!1,this.isadaptive=!1,this.dirs={left:"next",right:"pre"},this.dir="left",this.startX=0,this.startY=0},initialize:function(e){this.setOption(e),this.createLayout(),this.addImageItems();var n=function(){this.calcinterWidth(),this.state===this.ENUM_STATE_NOTEMPTY&&(this.initposition(),this.autoplay&&this.play(),this.images&&this.images.length>1&&this.buildEvent())};setTimeout($.proxy(n,this),0);var r=this;this.isadaptive&&$(window).on("resize",function(){r.calcinterWidth(),r.initposition();var e=0;$("."+t.config.prefix+"slide-img-item img").each(function(t,n){$(n).height()>e&&(e=$(n).height())}),r.imageinter.height(e),r.imageouter.height(e),r.container.height(e)})},setOption:function(e){for(var t in e)switch(t){case"autoplay":case"defaultIndex":case"container":case"notimage":case"delay":case"dir":case"loop":case"onchange":case"onerror":case"isadaptive":this[t]=e[t];break;case"images":if(e[t]&&typeof e[t][0]=="string"){var n=[];for(var r=0,i=e[t].length;r<i;r++)n.push({src:e[t][r]});this[t]=n}else this[t]=e[t]}},calcinterWidth:function(){var e=this.imageinter.find("."+t.config.prefix+"slide-img-item"),n=0;this.interWidth=n,this.itemWidth=this.imageouter.width(),e.css("width",this.itemWidth+"px"),e.each(function(){n+=$(this).width()}),this.imageinter.css("width",n+"px")},createLayout:function(){this.root=$(['<div class="'+t.config.prefix+'slide">','<div class="'+t.config.prefix+'slide-imgsouter">','<div class="'+t.config.prefix+'slide-imgsinter">',"</div>","</div>",'<div class="'+t.config.prefix+'slide-nav">','<div class="'+t.config.prefix+'slide-nav-padding">',"</div>","</div>","</div>"].join("")),this.imageouter=this.root.find("."+t.config.prefix+"slide-imgsouter"),this.imageinter=this.root.find("."+t.config.prefix+"slide-imgsinter"),this.navbox=this.root.find("."+t.config.prefix+"slide-nav"),this.navinter=this.root.find("."+t.config.prefix+"slide-nav-padding"),this.isadaptive&&this.container.height(i),this.container.empty().append(this.root)},createImageItem:function(e,n,r){var i=[t.config.prefix+"slide-img-item"];n&&i.push(t.config.prefix+"slide-img-item-current"),r&&[].push.call(i,r);var s=$(['<div class="'+i.join(" ")+'">','<a href="'+(e.link?e.link:"javascript:void(0);")+'"><img src="'+e.src+'" title="'+(e.title||"")+'"/></a>',"</div>"].join("")),o=this;return s.find("img").bind("error",function(){var e=this;setTimeout(function(){o.notimage&&(e.src=o.notimage),o.onerror&&o.onerror(e),$(e).unbind("error")},100)}),s},addImageItems:function(){for(var e=0,n=this.images.length,r;e<n;e++)this.addItem(this.images[e],this.defaultIndex===e);var i,s;if(this.images.length){this.state=this.ENUM_STATE_NOTEMPTY,i=this.createImageItem(this.images[0],null,[t.config.prefix+"slide-img-pre"]),s=this.createImageItem(this.images[Math.max(0,this.images.length-1)],null,[t.config.prefix+"slide-img-last"]),this.loop||(i.css({visibility:"hidden"}),s.css({visibility:"hidden"}));if(this.isadaptive){var o=this,u=i.find("img");u.on("load",function(){o.container.height(u.height())})}this.imageinter.append(i),this.imageinter.prepend(s),this.navs=this.navinter.find("."+t.config.prefix+"slide-nav-item")}else this.state=this.ENUM_STATE_EMPTY,this.addEmptyItem(this.notimage)},initposition:function(){this.go(this.index,function(){},!0),this.onchange(this.index,this.index);var e=this.calcNextIndex();this.setNavCurrent(e)},addEmptyItem:function(e){var n=[t.config.prefix+"slide-img-item",t.config.prefix+"slide-img-item-empey"];this.notimagedom=$('<div class="'+n.join(" ")+'"></div>'),this.notimagedom.append(e),this.imageinter.append(this.notimagedom)},buildEvent:function(){this.imageouter.bind("touchstart",$.proxy(this.onTouchStart,this)),this.imageouter.bind("touchmove",$.proxy(this.onTouchMove,this)),this.imageouter.bind("touchend",$.proxy(this.onTouchEnd,this)),this.imageouter.bind("touchcancel",$.proxy(this.onTouchEnd,this))},onTouchStart:function(e){e.preventDefault();if(this.isMove){this.isTouchStart=!1;return}this.isTouchStart=!0;var n=t.Tools.getMousePosOfElement(e.targetTouches[0],e.currentTarget);this.stop(),this.startX=n.x,this.startY=n.y,this.imageinterLeft=parseInt(this.imageinter.css("left"))},onTouchMove:function(e){e.preventDefault();if(this.isMove||!this.isTouchStart)return;var n=t.Tools.getMousePosOfElement(e.targetTouches[0],e.currentTarget),r=n.x-this.startX,i=n.y-this.startY;this.imageinter.css("left",this.imageinterLeft+r+"px")},onTouchEnd:function(e){e.preventDefault();if(this.isMove||!this.isTouchStart)return;var n=t.Tools.getMousePosOfElement(e.changedTouches[0],e.currentTarget),r=n.x-this.startX,i=n.y-this.startY,s=$.proxy(function(){this.autoplay&&this.loop&&this.play()},this),o=this.calcNextIndex()+1,u=this.images.length;r>50&&this.loop||r>50&&!this.loop&&o!==1?this.pre(s):r<-50&&this.loop||r<-50&&!this.loop&&o<u?this.next(s):this.imageinter.animate({left:this.imageinterLeft+"px"},null,s)},createNavItem:function(e){return $(['<span class="'+t.config.prefix+"slide-nav-item"+(e?t.config.prefix+"slide-nav-item-current":"")+'"></span>'].join(""))},addItem:function(e,t){var n=this.createImageItem(e,t),r=this.createNavItem(t);this.imageinter.append(n),this.navinter.append(r)},play:function(){clearInterval(this.setTimeoutResoure);if(!this.images||this.images.length<2)return;this.setTimeoutResoure=setInterval($.proxy(function(){this[this.dirs[this.dir]]()},this),this.delay*1e3)},stop:function(){clearInterval(this.setTimeoutResoure)},go:function(e,t,n){this.isMove=!0;var r=-(this.itemWidth*e);n?(this.imageinter.css({left:r+"px"}),this.isMove=!1,t&&t()):this.imageinter.animate({left:r+"px"},null,null,$.proxy(function(){this.isMove=!1,t&&t()},this))},next:function(e){var t=this.index;this.go(++this.index,$.proxy(function(){if(this.index===this.images.length+1){this.index=1;var n=-(this.itemWidth*this.index);this.imageinter.css({left:n+"px"})}var r=this.calcNextIndex();this.setNavCurrent(r),this.onchange(this.index,t),e&&e()},this))},setNavCurrent:function(e){this.navs.removeClass(t.config.prefix+"slide-nav-item-current"),$(this.navs.get(e)).addClass(t.config.prefix+"slide-nav-item-current")},calcNextIndex:function(){return this.index>this.images.length?0:this.index-1},pre:function(e){this.index==0&&(this.index=1);var t=this.index;this.go(--this.index,$.proxy(function(){if(this.index===0){this.index=this.images.length;var n=-(this.itemWidth*this.index);this.imageinter.css({left:n+"px"})}var r=this.calcPreIndex();this.setNavCurrent(r),this.onchange(this.index,t),e&&e()},this))},calcPreIndex:function(){return this.index<1?Math.max(0,this.images.length-1):this.index-1},empty:function(){this.stop(),this.imageinter.find("img").remove()}});n.register({name:r,fn:s})}),define("cWidgetMember",["cUtility","cWidgetFactory","cHybridFacade"],function(e,t,n){var r="Member",i={MEMBER_LOGIN:"/webapp/myctrip/#account/login",NON_MEMBER_LOGIN:"/webapp/myctrip/#account/login",REGISTER:"/webapp/myctrip/#account/reg"},s=function(e,t){var n=e;t&&(n=t.domain?t.domain+e:e,t.param&&typeof t.param=="string"&&(n=n+"?"+t.param)),window.location.href=n},o={memberLogin:function(e){s(i.MEMBER_LOGIN,e)},nonMemberLogin:function(e){s(i.NON_MEMBER_LOGIN,e)},register:function(e){s(i.REGISTER,e)},autoLogin:function(){return!1}},u={memberLogin:function(e){n.request({name:n.METHOD_MEMBER_LOGIN,callback:e.callback})},nonMemberLogin:function(e){n.request({name:n.METHOD_NON_MEMBER_LOGIN,callback:e.callback})},register:function(e){n.request({name:n.METHOD_REGISTER,callback:e.callback})},autoLogin:function(e){n.request({name:n.METHOD_AUTO_LOGIN,callback:e.callback})}};t.register({name:r,fn:e.isInApp()?u:o})}),define("cWidgetCaptcha",["cWidgetFactory","cStorage","c"],function(e,t,n){var r="Captcha",i=function(){};i={islock:!1,getCode:function(e,t){var r=this;if(!r.islock){t.showLoading(),this.islock=!0;var i;e.excute(function(e){t.hideLoading(),r.islock=!1;if(e.rc==0)r.islock=!0,r.showtime(t.els.sendcodebtn);else if(e.rc==2){e.rmsg="很抱歉，您的验证次数已达上限，请明天再试";var i=new n.ui.Alert({message:e.rmsg,buttons:[{text:"确定",click:function(){this.hide();for(var e in t.els){var n=t.els[e][0];n&&n.nodeName=="INPUT"&&!n.disabled&&(n.value="")}}}]});i.show()}else e.rmsg=e.rmsg||"获取验证码失败，请重试",t.showToast(e.rmsg)},function(){r.islock=!1,t.hideLoading(),t.showToast("获取验证码失败，请重试")})}},showtime:function(e){var t=60,n=this;if(n.islock)var r=setInterval(function(){e.addClass("cgrey"),e.removeClass("cblue1"),e.text(t+"秒后重发");if(t<=0||!n.islock)clearInterval(r),e.removeClass("cgrey"),e.addClass("cblue1"),e.text("免费获取"),n.islock=!1;t--},1e3)},setinit:function(e){this.islock=!1}},e.register({name:r,fn:i})}),define("cBasePageView",["libs","c","cWidgetFactory","cWidgetHeaderView","cWidgetGuider"],function(e,t,n){var r=n.create("Guider"),i=i||{};i.injectHeaderView=function(e){var t=n.create("HeaderView");this.headerview=new t(e),$("#main").before(this.headerview.getView())},i._initializeHeader=function(){},i._getDefaultHeader=function(){},i.hybridBridgeRender=function(){var e=this,t=$.proxy(e.showView,e),n=$.proxy(e.showView,e);r.apply({hybridCallback:t,callback:n})},i.registerCallback=function(e){},i.callAppInit=function(e){var t=0;if(window.localStorage){var n=window.localStorage.getItem("APPINFO");n=JSON.parse(n),n&&(t=n.version)}r.init({version:t,callback:e})};var s=t.view.extend(i);return s.ONCLICK="click",s}),define("cCommonPageFactory",["libs"],function(e){var t=t||{};return t.products={},t.hasPage=function(e){return!!t.products[e]},t.register=function(e){if(!(e&&e.name&&e.fn))throw"CommonPageFactory: factory is lack of necessary infomation.";if(t.products[e.name])throw"CommonPageFactory: factory has been register in CommonPageFactory";t.products[e.name]=e.fn},t.create=function(e){return t.products[e]},t}),define("cCommonListPage",["libs","cUI","cBasePageView","cWidgetFactory","cCommonPageFactory","cWidgetListView"],function(e,t,n,r,i){var s="CommonListPage";if(i.hasPage(s))return;var o=o||{};o.injectListView=function(e){e.workspace||(e.workspace=$(this.defaultHtml)),this.$el.append(e.workspace),e.container?e.container=this.$el.find(e.container):e.container=e.workspace.find("#c-list-view-container");var t=r.create("ListView");this.listview=new t(e)},o._onWidnowScroll=null,o.__isComplete__=!1,o.__isLoading__=!1,o.bottomLoading=null,o.addScrollListener=function(){this.__isComplete__=!1,this.__isLoading__=!1,$(window).bind("scroll",this._onWidnowScroll)},o.removeScrollListener=function(){$(window).unbind("scroll",this._onWidnowScroll),this.bottomLoading&&(this.bottomLoading.remove(),this.bottomLoading=null)},o.onWidnowScroll=function(){var e=t.Tools.getPageScrollPos();if(e.top==0)return;var n=e.pageHeight-(e.top+e.height);n<=81&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&this.onBottomPull())},o.closeBottomPull=function(){this.__isComplete__=!0},o.endPull=function(){this.__isLoading__=!1},o.showBottomLoading=function(){this.bottomLoading||(this.bottomLoading=$('<div class="cui-zl-load" id="zlLoading" style=""> <div class="cui-i cui-b-loading"></div><div class="cui-i  cui-mb-logo"></div> <p>加载中</p></div>'),this.$el.append(this.bottomLoading)),this.bottomLoading.show()},o.hideBottomLoading=function(){this.bottomLoading&&this.bottomLoading.hide(),this.__isLoading__=!1},o.defaultHtml='<section class="res_list"><ul class="res_list_tab_arr_r" id="c-list-view-container"></ul></section>';var u=n.extend(o);i.register({name:s,fn:u})}),function(){var e="app/";require.config({baseUrl:"/webapp/",shim:{_:{exports:"_"},B:{deps:["_"],exports:"Backbone"},cBase:{exports:"cBase"},cAjax:{exports:"cAjax"},cView:{deps:["B"],exports:"cView"}},paths:{text:"res/libs/require.text",AbstractAPP:e+"c.abstract.app",App:e+"business/c.business.app",rsa:e+"business/c.business.rsa",cView:e+"business/c.business.view",c:e+"common/c",cBase:e+"common/c.base",cLog:e+"common/c.log",cAjax:e+"common/c.ajax",cSales:e+"common/c.sales",cLazyload:e+"common/c.lazyload",cListAdapter:e+"common/c.common.listadapter",cGeoService:e+"common/c.geo.service",cUtilityHybrid:e+"util/c.utility.hybrid",cUtilityHash:e+"util/c.utility.hash",cUtilityDate:e+"util/c.utility.date",cUtilityServertime:e+"util/c.utility.servertime",cUtilityCrypt:e+"util/c.utility.crypt",cUtility:e+"util/c.utility",Validate:e+"util/c.validate",cCoreInherit:e+"core/c.core.inherit",cAbstractStore:e+"store/c.abstract.store",cAbstractStorage:e+"store/c.abstract.storage",cStore:e+"store/c.local.store",cStorage:e+"store/c.local.storage",cSessionStore:e+"store/c.session.store",cSessionStorage:e+"store/c.session.storage",memStore:e+"store/c.memorystore",CommonStore:e+"store/c.common.store",PageStore:e+"store/c.store.package",cAbstractModel:e+"model/c.abstract.model",cModel:e+"model/c.model",cUserModel:e+"model/c.user.model",cMultipleDate:e+"model/c.multiple.data",cUI:e+"ui/c.ui",cUICore:e+"ui/c.ui.core",cHistory:e+"ui/c.ui.history",cUIView:e+"ui/c.ui.view",cDataSource:e+"ui/c.ui.datasource",cUIBase:e+"ui/c.ui.base",cUIAbstractView:e+"ui/c.ui.abstract.view",cAdView:e+"ui/c.ui.ad",cUIAlert:e+"ui/c.ui.alert",cUIAnimation:e+"ui/c.ui.animation",cUICitylist:e+"ui/c.ui.citylist",cUIHeadWarning:e+"ui/c.ui.head.warning",cUIInputClear:e+"ui/c.ui.input.clear",cUILayer:e+"ui/c.ui.layer",cUILoading:e+"ui/c.ui.loading",cUILoadingLayer:e+"ui/c.ui.loading.layer",cUIMask:e+"ui/c.ui.mask",cUIPageview:e+"ui/c.ui.page.view",cUIScrollRadio:e+"ui/c.ui.scroll.radio",cUIScrollRadioList:e+"ui/c.ui.scroll.radio.list",cUIScrollList:e+"ui/c.ui.scrolllist",cUIToast:e+"ui/c.ui.toast",cUIWarning:e+"ui/c.ui.warning",cUIWarning404:e+"ui/c.ui.warning404",cUIHashObserve:e+"ui/c.ui.hash.observe",cUIEventListener:e+"ui/c.ui.event.listener",cUISwitch:e+"ui/c.ui.switch",cUIScroll:e+"ui/c.ui.scroll",cUINum:e+"ui/c.ui.num",cUIGroupList:e+"ui/c.ui.group.list",cUIBusinessGroupList:e+"ui/c.ui.business.group.list",cUITab:e+"ui/c.ui.tab",cUIImageSlider:e+"ui/c.ui.imageSlider",cUIBubbleLayer:e+"ui/c.ui.bubble.layer",cWidgetFactory:e+"widget/c.widget.factory",cWidgetHeaderView:e+"widget/c.widget.headerview",cWidgetListView:e+"widget/c.widget.listview",cWidgetTipslayer:e+"widget/c.widget.tipslayer",cWidgetInputValidator:e+"widget/c.widget.inputValidator",cWidgetPublisher:e+"widget/c.widget.publisher",cWidgetGeolocation:e+"widget/c.widget.geolocation",cWidgetAbstractCalendar:e+"widget/c.widget.abstract.calendar",cWidgetCalendar:e+"widget/c.widget.calendar",cWidgetCalendarPrice:e+"widget/c.widget.calendar.price",cWidgetSlide:e+"widget/c.widget.slide",cWidgetMember:e+"widget/c.widget.member",cWidgetGuider:e+"widget/c.widget.guider",cWidgetCaptcha:e+"widget/c.widget.captcha",cBasePageView:e+"page/c.page.base",cCommonPageFactory:e+"page/c.page.factory",cCommonListPage:e+"page/c.page.common.list",cHybridFacade:e+"hybrid/c.hybrid.facade"}})}(),define("common",function(){});