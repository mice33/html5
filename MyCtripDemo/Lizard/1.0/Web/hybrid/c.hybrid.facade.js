define(["libs","CommonStore","cLog"],function(a,b,c){var d=d||{};d.METHOD_ENTRY="METHOD_ENTRY",d.METHOD_MEMBER_LOGIN="METHOD_MEMBER_LOGIN",d.METHOD_NON_MEMBER_LOGIN="METHOD_NON_MEMBER_LOGIN",d.METHOD_AUTO_LOGIN="METHOD_AUTO_LOGIN",d.METHOD_LOCATE="METHOD_LOCATE",d.METHOD_REFRESH_NAV_BAR="METHOD_REFRESH_NAV_BAR",d.METHOD_CALL_PHONE="METHOD_CALL_PHONE",d.METHOD_BACK_TO_HOME="METHOD_BACK_TO_HOME",d.METHOD_BACK_TO_BOOK_CAR="METHOD_BACK_TO_BOOK_CAR",d.METHOD_BACK="METHOD_BACK",d.METHOD_COMMIT="METHOD_COMMIT",d.METHOD_REGISTER="METHOD_REGISTER",d.METHOD_LOG_EVENT="METHOD_LOG_EVENT",d.METHOD_INIT="METHOD_INIT",d.METHOD_CALL_SERVICE_CENTER="METHOD_CALL_SERVICE_CENTER",d.METHOD_BACK_TO_LAST_PAGE="METHOD_BACK_TO_LAST_PAGE",d.METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE="METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE",d.METHOD_GO_TO_HOTEL_DETAIL="METHOD_GO_TO_HOTEL_DETAIL",d.METHOD_OPEN_URL="METHOD_OPEN_URL",d.METHOD_CHECK_UPDATE="METHOD_CHECK_UPDATE",d.METHOD_RECOMMEND_APP_TO_FRIEND="METHOD_RECOMMEND_APP_TO_FRIEND",d.METHOD_ADD_WEIXIN_FRIEND="METHOD_ADD_WEIXIN_FRIEND",d.METHOD_SHOW_NEWEST_INTRODUCTION="METHOD_SHOW_NEWEST_INTRODUCTION",d.METHOD_BECOME_ACTIVE="METHOD_BECOME_ACTIVE",d.METHOD_WEB_VIEW_FINISHED_LOAD="METHOD_WEB_VIEW_FINISHED_LOAD",d.METHOD_CROSS_DOMAIN_HREF="METHOD_CROSS_DOMAIN_HREF",d.METHOD_CHECK_APP_INSTALL="METHOD_CHECK_APP_INSTALL",d.METHOD_CROSS_JUMP="METHOD_CROSS_JUMP",d.METHOD_REFRESH_NATIVE="METHOD_REFRESH_NATIVE",d.METHOD_H5_NEED_REFRESH="METHOD_H5_NEED_REFRESH",d.METHOD_READ_FROM_CLIPBOARD="METHOD_READ_FROM_CLIPBOARD",d.METHOD_COPY_TO_CLIPBOARD="METHOD_COPY_TO_CLIPBOARD",d.METHOD_SHARE_TO_VENDOR="METHOD_SHARE_TO_VENDOR",d.METHOD_DOWNLOAD_DATA="METHOD_DOWNLOAD_DATA",d.METHOD_NATIVE_LOG="METHOD_NATIVE_LOG",d.METHOD_ENCRYPT_BASE64="METHOD_ENCRYPT_BASE64",d.METHOD_SEND_H5_PIPE_REQUEST="METHOD_SEND_H5_PIPE_REQUEST",d.METHOD_SEND_HTTP_PIPE_REQUEST="METHOD_SEND_HTTP_PIPE_REQUEST",d.METHOD_CHECK_PAY_APP_INSTALL_STATUS="METHOD_CHECK_PAY_APP_INSTALL_STATUS",d.METHOD_OPEN_PAY_APP_BY_URL="METHOD_OPEN_PAY_APP_BY_URL",d.METHOD_CHECK_TICKET_IN_SAMSUNG_WALLET="METHOD_CHECK_TICKET_IN_SAMSUNG_WALLET",d.METHOD_DOWNLOAD_TICKET_IN_SAMSUNG_WALLET="METHOD_DOWNLOAD_TICKET_IN_SAMSUNG_WALLET",d.METHOD_SHOW_TICKET_IN_SAMSUNG_WALLET="METHOD_SHOW_TICKET_IN_SAMSUNG_WALLET";var e="h5_init_finished",f="member_login",g="non_member_login",h="member_auto_login",i="locate",j="back",k="commit",l="member_register",m="init_member_H5_info",n="become_active",o="web_view_finished_load",p="check_app_install_status",q="app_h5_need_refresh",r="read_copied_string_from_clipboard",s="download_data",t="base64_encode",u="send_h5_pipe_request",v="send_http_pipe_request",w="check_pay_app_install_status",x="check_ticket_in_samsung_wallet",y="download_ticket_in_samsung_wallet",z="show_ticket_in_samsung_wallet",A=!1,B={METHOD_NON_MEMBER_LOGIN:function(a){C[g]=function(d){c.applog("METHOD_NON_MEMBER_LOGIN",d),"string"==typeof d&&(d=JSON.parse(d));{var e=b.UserStore.getInstance();e.getUser()}e.setUser(d.data);var f=b.HeadStore.getInstance(),g=f.get();g.auth=d.data.Auth,f.set(g),"function"==typeof a.callback&&a.callback(d)}},METHOD_ENCRYPT_BASE64:function(a){C[t]=function(b){"string"==typeof b&&(b=JSON.parse(b)),"function"==typeof a.callback&&a.callback(b)}},METHOD_LOCATE:function(a){C[i]=function(b){c.applog("METHOD_LOCATE",b);try{var d=b;"string"==typeof b&&(d=JSON.parse(b)),a.success(d)}catch(e){a.error(!0,"定位失败")}}},METHOD_MEMBER_LOGIN:function(a){C[f]=function(d){if(c.applog("METHOD_MEMBER_LOGIN",d),!d&&"function"==typeof a.callback)return a.callback();"string"==typeof d&&(d=JSON.parse(d));{var e=b.UserStore.getInstance();e.getUser()}e.setUser(d.data);var f=b.HeadStore.getInstance(),g=f.get();g.auth=d.data.Auth,f.set(g),"function"==typeof a.callback&&a.callback()}},METHOD_AUTO_LOGIN:function(a){C[h]=function(d){if(c.applog("METHOD_AUTO_LOGIN",d),"string"==typeof d&&(d=JSON.parse(d)),d){{var e=b.UserStore.getInstance();e.getUser()}e.setUser(d.data);var f=b.HeadStore.getInstance(),g=f.get();g.auth=d.data.Auth,f.set(g)}"function"==typeof a.callback&&a.callback(d)}},METHOD_REGISTER:function(a){C[l]=function(d){c.applog("METHOD_REGISTER",d),"string"==typeof d&&(d=JSON.parse(d));{var e=b.UserStore.getInstance();e.getUser()}e.setUser(d.data);var f=b.HeadStore.getInstance(),g=f.get();g.auth=d.data.Auth,f.set(g),"function"==typeof a.callback&&a.callback()}},METHOD_ENTRY:function(a){C[e]=a.callback},METHOD_BACK:function(a){C[j]=a.callback},METHOD_COMMIT:function(a){C[k]=a.callback},METHOD_SEND_H5_PIPE_REQUEST:function(a){C[u]=function(b){"function"==typeof a.callback&&a.callback(b)}},METHOD_SEND_HTTP_PIPE_REQUEST:function(a){C[v]=function(b){"function"==typeof a.callback&&a.callback(b)}},METHOD_CHECK_PAY_APP_INSTALL_STATUS:function(a){C[w]=function(b){"function"==typeof a.callback&&a.callback(b)}},METHOD_INIT:function(a){C[m]=function(d){if(c.applog("METHOD_INIT",d),"string"==typeof d&&(d=JSON.parse(d)),window.localStorage&&d){if(d&&d.userInfo)try{{var e=b.UserStore.getInstance();e.getUser()}e.setUser(d.userInfo.data);var f=b.HeadStore.getInstance(),g=f.get();g.auth=d.userInfo.data.Auth,f.set(g)}catch(h){}if(d&&d.device){var i={device:d.device};window.localStorage.setItem("DEVICEINFO",JSON.stringify(i))}if(d&&d.appId){var j={version:d.version,appId:d.appId,serverVersion:d.serverVersion,platform:d.platform};window.localStorage.setItem("APPINFO",JSON.stringify(j))}d&&d.timestamp&&window.localStorage.setItem("SERVERDATE",d.timestamp),d&&d.sourceId&&window.localStorage.setItem("SOURCEID",d.sourceId),d&&d.isPreProduction&&window.localStorage.setItem("isPreProduction",d.isPreProduction)}a.callback()}},METHOD_WEB_VIEW_FINISHED_LOAD:function(a){C[o]=a.callback},METHOD_BECOME_ACTIVE:function(a){C[n]=a.callback},METHOD_CHECK_APP_INSTALL:function(a){C[p]=function(b){c.applog("METHOD_CHECK_APP_INSTALL",b),a.callback(b)}},METHOD_H5_NEED_REFRESH:function(a){C[q]=a.callback},METHOD_READ_FROM_CLIPBOARD:function(a){C[r]=function(b){c.applog("METHOD_READ_FROM_CLIPBOARD",b),a.callback(b)}},METHOD_DOWNLOAD_DATA:function(a){C[s]=function(b){c.applog("METHOD_DOWNLOAD_DATA",b),"function"==typeof a.callback&&a.callback(b)}},METHOD_CHECK_TICKET_IN_SAMSUNG_WALLET:function(a){C[x]=function(b){"function"==typeof a.callback&&a.callback(b)}},METHOD_DOWNLOAD_TICKET_IN_SAMSUNG_WALLET:function(a){C[y]=function(b){"function"==typeof a.callback&&a.callback(b)}},METHOD_SHOW_TICKET_IN_SAMSUNG_WALLET:function(a){C[z]=function(b){"function"==typeof a.callback&&a.callback(b)}}},C={},D={h5_init_finished:function(a){"function"==typeof C[e]&&C[e](a)},non_member_login:function(a){"function"==typeof C[g]&&C[g](a)},locate:function(a){"function"==typeof C[i]&&C[i](a)},member_login:function(a){"function"==typeof C[f]&&C[f](a)},back:function(){"function"==typeof C[j]&&C[j]()},commit:function(){"function"==typeof C[k]&&C[k]()},init_member_H5_info:function(a){"function"==typeof C[m]&&C[m](a)},member_register:function(){"function"==typeof C[l]&&C[l]()},web_view_finished_load:function(){"function"==typeof C[o]&&C[o]()},become_active:function(){"function"==typeof C[n]&&C[n]()},member_auto_login:function(a){"function"==typeof C[h]&&C[h](a)},check_app_install_status:function(a){"function"==typeof C[p]&&C[p](a)},app_h5_need_refresh:function(a){"function"==typeof C[q]&&C[q](a)},read_copied_string_from_clipboard:function(a){"function"==typeof C[r]&&C[r](a)},download_data:function(a){"function"==typeof C[s]&&C[s](a)},base64_encode:function(a){"function"==typeof C[t]&&C[t](a)},send_h5_pipe_request:function(a){"function"==typeof C[u]&&C[u](a)},send_http_pipe_request:function(a){"function"==typeof C[v]&&C[v](a)},check_pay_app_install_status:function(a){"function"==typeof C[w]&&C[w](a)},check_ticket_in_samsung_wallet:function(a){"function"==typeof C[x]&&C[x](a)},download_ticket_in_samsung_wallet:function(a){"function"==typeof C[y]&&C[y](a)},show_ticket_in_samsung_wallet:function(a){"function"==typeof C[z]&&C[z](a)}},E={callback:function(a){if(!A){var b=a;if("string"==typeof a)try{b=JSON.parse(window.decodeURIComponent(a))}catch(c){setTimeout(function(){0},0)}return"function"==typeof D[b.tagname]?(D[b.tagname](b.param),!0):void 0}}},F=function(a){for(var b in E)a[b]=a[b]||E[b]};return d.init=function(){var a=window.app={};F(a)},d.register=function(a){"function"==typeof B[a.tagname]&&B[a.tagname](a)},d.request=function(a){var b={METHOD_INIT:function(a){d.register({tagname:d.METHOD_INIT,callback:a.callback}),CtripUtil.app_init_member_H5_info()},METHOD_ENTRY:function(){},METHOD_MEMBER_LOGIN:function(a){d.register({tagname:d.METHOD_MEMBER_LOGIN,callback:a.callback}),CtripUser.app_member_login()},METHOD_NON_MEMBER_LOGIN:function(a){d.register({tagname:d.METHOD_NON_MEMBER_LOGIN,callback:a.callback}),CtripUser.app_non_member_login()},METHOD_AUTO_LOGIN:function(a){d.register({tagname:d.METHOD_AUTO_LOGIN,callback:a.callback}),CtripUser.app_member_auto_login()},METHOD_REGISTER:function(a){d.register({tagname:d.ETHOD_REGISTER,callback:a.callback}),CtripUser.app_member_register()},METHOD_LOCATE:function(a){d.register({tagname:d.METHOD_LOCATE,success:a.success,error:a.error});var b=!0;a.isAsync&&(b=a.isAsync),CtripUtil.app_locate(b)},METHOD_REFRESH_NAV_BAR:function(a){CtripUtil.app_refresh_nav_bar(a.config)},METHOD_CALL_PHONE:function(a){CtripUtil.app_call_phone(a.tel)},METHOD_BACK_TO_HOME:function(){CtripUtil.app_back_to_home()},METHOD_BACK_TO_BOOK_CAR:function(){app_back_to_book_car()},METHOD_LOG_EVENT:function(a){CtripUtil.app_log_event(a.event_name)},METHOD_CALL_SERVICE_CENTER:function(){CtripUtil.app_call_phone()},METHOD_BACK_TO_LAST_PAGE:function(a){var b=a.param||"";CtripUtil.app_back_to_last_page(b)},METHOD_GO_TO_BOOK_CAR_FINISHED_PAGE:function(a){CtripUtil.app_go_to_book_car_finished_page(a.url)},METHOD_GO_TO_HOTEL_DETAIL:function(a){CtripUtil.app_go_to_hotel_detail(a.hotelId,a.hotelName,a.cityId,a.isOverSea)},METHOD_OPEN_URL:function(a){var b=a.title||"";CtripUtil.app_open_url(a.openUrl,a.targetMode,b)},METHOD_CHECK_UPDATE:function(){CtripUtil.app_check_update()},METHOD_RECOMMEND_APP_TO_FRIEND:function(){CtripUtil.app_recommend_app_to_friends()},METHOD_ADD_WEIXIN_FRIEND:function(){CtripUtil.app_add_weixin_friend()},METHOD_CROSS_DOMAIN_HREF:function(a){CtripUtil.app_cross_domain_href(a.moduleType,a.anchor,a.param)},METHOD_SHOW_NEWEST_INTRODUCTION:function(){CtripUtil.app_show_newest_introduction()},METHOD_CHECK_APP_INSTALL:function(a){d.register({tagname:d.METHOD_CHECK_APP_INSTALL,callback:a.callback}),CtripUtil.app_check_app_install_status(a.url,a.package)},METHOD_CROSS_JUMP:function(a){CtripUtil.app_cross_package_href(a.path,a.param)},METHOD_REFRESH_NATIVE:function(a){CtripUtil.app_refresh_native_page(a.package,a.json)},METHOD_READ_FROM_CLIPBOARD:function(a){d.register({tagname:d.METHOD_READ_FROM_CLIPBOARD,callback:a.callback}),CtripUtil.app_read_copied_string_from_clipboard()},METHOD_COPY_TO_CLIPBOARD:function(a){CtripUtil.app_copy_string_to_clipboard(a.content)},METHOD_SHARE_TO_VENDOR:function(a){CtripUtil.app_call_system_share(a.imgUrl,a.text)},METHOD_DOWNLOAD_DATA:function(a){d.register({tagname:d.METHOD_DOWNLOAD_DATA,callback:a.callback}),CtripUtil.app_download_data(a.url,a.suffix)},METHOD_NATIVE_LOG:function(a){var b=window.localStorage.getItem("isPreProduction");b&&""!==b&&CtripTool.app_log("@[Wireless H5] "+a.log,a.result)},METHOD_ENCRYPT_BASE64:function(a){d.register({tagname:d.METHOD_ENCRYPT_BASE64,callback:a.callback}),CtripEncrypt.app_base64_encode(a.info)},METHOD_SEND_H5_PIPE_REQUEST:function(a){d.register({tagname:d.METHOD_SEND_H5_PIPE_REQUEST,callback:a.callback}),CtripPipe.app_send_H5_pipe_request(a.serviceCode,a.header,a.data,a.sequenceId)},METHOD_SEND_HTTP_PIPE_REQUEST:function(a){d.register({tagname:d.METHOD_SEND_HTTP_PIPE_REQUEST,callback:a.callback}),CtripPipe.app_send_HTTP_pipe_request(a.target,a.methods,a.header,a.queryData,a.retryInfo)},METHOD_CHECK_PAY_APP_INSTALL_STATUS:function(a){d.register({tagname:d.METHOD_CHECK_PAY_APP_INSTALL_STATUS,callback:a.callback}),CtripPay.app_check_pay_app_install_status()},METHOD_OPEN_PAY_APP_BY_URL:function(a){CtripPay.app_open_pay_app_by_url(a.payAppName,a.payURL,a.successRelativeURL,a.detailRelativeURL)},METHOD_CHECK_TICKET_IN_SAMSUNG_WALLET:function(a){d.register({tagname:d.METHOD_CHECK_TICKET_IN_SAMSUNG_WALLET,callback:a.callback}),CtripSumSungWallet.app_check_ticket_in_samsung_wallet(a.ticketID)},METHOD_DOWNLOAD_TICKET_IN_SAMSUNG_WALLET:function(a){d.register({tagname:d.METHOD_DOWNLOAD_TICKET_IN_SAMSUNG_WALLET,callback:a.callback}),CtripSumSungWallet.app_download_ticket_in_samsung_wallet(a.ticketID)},METHOD_SHOW_TICKET_IN_SAMSUNG_WALLET:function(a){d.register({tagname:d.METHOD_SHOW_TICKET_IN_SAMSUNG_WALLET,callback:a.callback}),CtripSumSungWallet.app_show_ticket_in_samsung_wallet(a.ticketID)}};b[a.name](a)},d.getOpenUrl=function(a){var b="ctrip://wireless/"+a.module+"?";return _.each(a.param,function(a,c){b+=c+"="+a+"&"}),"&"===b[b.length-1]&&(b=b.slice(0,b.length-1)),b},d});