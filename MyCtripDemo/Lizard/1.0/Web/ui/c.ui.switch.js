define(["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.mouseData={sX:0,eX:0,sY:0,eY:0}},c.initialize=function($super,a){this.bindEvent(),this.allowsConfig.changed=!0,$super(a),this.show(),a.checked?this.checked():this.unChecked()},c.bindEvent=function(){this.addEvent("onShow",function(){var a=this;this.el=this.root.find(".cui-switch"),this.switchBar=this.el.find(".cui-switch-bg");var b="ontouchstart"in document.documentElement;this.start=b?"touchstart":"mousedown",this.move=b?"touchmove":"mousemove",this.end=b?"touchend":"mouseup",this.startFn=function(b){a._touchStart.call(a,b)},this.moveFn=function(b){a._touchMove.call(a,b)},this.endFn=function(b){a._touchEnd.call(a,b)},this.el[0].addEventListener(this.start,this.startFn,!1),this.el[0].addEventListener(this.move,this.moveFn,!1),this.el[0].addEventListener(this.end,this.endFn,!1)})},c.createHtml=function(){return['<div class="cui-switch">','<div class="cui-switch-bg"></div>','<div class="cui-switch-scroll"></div>',"</div>"].join("")},c._touchStart=function(a){var b=a.changedTouches&&a.changedTouches[0]||a;this.mouseData.sX=b.pageX,this.mouseData.sY=b.pageY,a.preventDefault()},c._touchMove=function(a){this.res&&clearTimeout(this.res);a.changedTouches&&a.changedTouches[0]||a;a.preventDefault()},c._touchEnd=function(a){this.res&&clearTimeout(this.res);var b=a.changedTouches&&a.changedTouches[0]||a;this.mouseData.eX=b.pageX,this.mouseData.eY=b.pageY;var c="move";return this.mouseData.sX==this.mouseData.eX&&this.mouseData.sY==this.mouseData.eY?c="tap":Math.abs(this.mouseData.eY-this.mouseData.sY)<Math.abs(this.mouseData.eX-this.mouseData.sX)&&(c=this._getLRDir()),"tap"==c?void(this.el.hasClass("current")?this.unChecked():this.checked()):void("left"==c?this.unChecked():"right"==c&&this.checked())},c._getLRDir=function(){return this.mouseData.eX-this.mouseData.sX>0?"right":this.mouseData.eX-this.mouseData.sX<0?"left":void 0},c.unChecked=function(){this.el.removeClass("current"),this.switchBar.removeClass("current"),this._triggerChanged()},c.checked=function(){this.el.addClass("current"),this.switchBar.addClass("current"),this._triggerChanged()},c._triggerChanged=function(){"function"==typeof this.changed&&this.changed.call(this)},c.getStatus=function(){return this.el.hasClass("current")},new a.Class(b,c)});